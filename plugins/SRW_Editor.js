/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./js/Editor/AllyPilotUI.js":
/*!**********************************!*\
  !*** ./js/Editor/AllyPilotUI.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AllyPilotUI)\n/* harmony export */ });\n/* harmony import */ var _EditorUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditorUI.js */ \"./js/Editor/EditorUI.js\");\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n/* harmony import */ var _FaceManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FaceManager.js */ \"./js/Editor/FaceManager.js\");\n/* harmony import */ var _OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OverworldSpriteManager */ \"./js/Editor/OverworldSpriteManager.js\");\n\r\n\r\n\r\n\r\n\r\nfunction AllyPilotUI(container, mainUIHandler){\r\n\t_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, container, mainUIHandler);\r\n\tthis._dataFile = \"data/AllyPilots.json\";\r\n\tthis._vanillaFile = \"data/Actors.json\";\r\n\tthis._gameVar = \"$dataActors\";\r\n\tthis._currentAbiPage = 0;\r\n\tthis._abiPageSize = 10;\r\n\t\r\n\tthis._currentRelPage = 0;\r\n\tthis._relPageSize = 10;\r\n}\r\n\r\nAllyPilotUI.prototype = Object.create(_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nAllyPilotUI.prototype.constructor = AllyPilotUI;\r\n\r\nAllyPilotUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\tvar containerNode = _this._container;\r\n\t_this._propertyHandlers = {\r\n\t\tface: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\treturn \"<div class='portrait_preview unit_img_preview'></div>\";\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tfunction updatePortraitPreviews(){\r\n\t\t\t\t\tvar divs = containerNode.querySelectorAll(\".portrait_preview\");\r\n\t\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\t\t_FaceManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].loadFaceByParams(entry.faceName, entry.faceIndex, div);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tupdatePortraitPreviews();\r\n\t\t\t\t\r\n\t\t\t\tvar divs = containerNode.querySelectorAll(\".portrait_preview\");\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\t\tlet result = await _FaceManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].showFaceSelector(e, entry.faceName, entry.faceIndex, this);\r\n\t\t\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\t\t\tentry.faceName = result.faceName;\r\n\t\t\t\t\t\t\tentry.faceIndex = result.faceIndex;\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.isModified();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\t\t\t\r\n\t\t},\r\n\t\tname: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_name;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='prop_name' value='\"+entry.name+\"'></input>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_use_mech_name;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='use_classname' type=checkbox \"+(_this.getMetaValue(\"pilotUsesClassName\")*1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.GENERAL.label_editor_tag;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='editor_tag' value='\"+_this.getMetaValue(\"editorTag\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_stats_label;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='stats_name' value='\"+_this.getMetaValue(\"pilotStatsLabel\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_name\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tentry.name = this.value;\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#use_classname\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"pilotUsesClassName\", this.checked ? 1 : 0);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#editor_tag\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"editorTag\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#stats_name\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"pilotStatsLabel\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tdefault_mech: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_default_mech;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='prop_default_mech'>\";\r\n\t\t\t\tfor(var i = 1; i < $dataClasses.length; i++){\r\n\t\t\t\t\tcontent+=\"<option \"+(i == entry.classId ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataClasses[i].name+\"</option>\";\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_default_mech\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tentry.classId = this.value;\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tstats: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tfunction createGrowthControls(prop){\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(prop);\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tvar type = parts.length > 1 ? \"curve\" : \"flat\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select id='prop_curve_\"+prop+\"'>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(type == \"flat\" ? \"selected\" : \"\")+\" value='flat'>flat</option>\";\r\n\t\t\t\t\tcontent+=\"<option \"+(type == \"curve\" ? \"selected\" : \"\")+\" value='curve'>curve</option>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(type == \"flat\"){\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_rate;\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=\"<input id='prop_\"+prop+\"_flat_rate' value='\"+parts[0]+\"'></input>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_rate;\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=\"<input id='prop_\"+prop+\"_curve_rate' value='\"+parts[1]+\"'></input>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_max;\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=\"<input id='prop_\"+prop+\"_curve_max' value='\"+parts[0]+\"'></input>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseSP\", EDITORSTRINGS.PILOT.label_SP);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotSPGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseMP\", EDITORSTRINGS.PILOT.label_MP);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotMPGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseMelee\", EDITORSTRINGS.PILOT.label_melee);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotMeleeGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseRanged\", EDITORSTRINGS.PILOT.label_ranged);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotRangedGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseSkill\", EDITORSTRINGS.PILOT.label_skill);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotSkillGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseDefense\", EDITORSTRINGS.PILOT.label_defense);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotDefenseGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseEvade\", EDITORSTRINGS.PILOT.label_evade);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotEvadeGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"pilotBaseHit\", EDITORSTRINGS.PILOT.label_hit);\r\n\t\t\t\tcontent+=createGrowthControls(\"pilotHitGrowth\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tlet hookedProperties = [\r\n\t\t\t\t\t\"pilotBaseSP\",\r\n\t\t\t\t\t\"pilotBaseMP\",\r\n\t\t\t\t\t\"pilotBaseMelee\",\r\n\t\t\t\t\t\"pilotBaseRanged\",\r\n\t\t\t\t\t\"pilotBaseSkill\",\r\n\t\t\t\t\t\"pilotBaseDefense\",\r\n\t\t\t\t\t\"pilotBaseEvade\",\r\n\t\t\t\t\t\"pilotBaseHit\"\t\t\t\t\t\r\n\t\t\t\t];\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\thookedProperties = [\r\n\t\t\t\t\t\"pilotSPGrowth\",\r\n\t\t\t\t\t\"pilotMPGrowth\",\r\n\t\t\t\t\t\"pilotMeleeGrowth\",\r\n\t\t\t\t\t\"pilotRangedGrowth\",\r\n\t\t\t\t\t\"pilotSkillGrowth\",\r\n\t\t\t\t\t\"pilotDefenseGrowth\",\r\n\t\t\t\t\t\"pilotEvadeGrowth\",\r\n\t\t\t\t\t\"pilotHitGrowth\"\t\t\t\t\t\r\n\t\t\t\t];\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_curve_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\tif(value == \"flat\"){\r\n\t\t\t\t\t\t\t_this.setMetaValue(prop, 0);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.setMetaValue(prop, \"0,0\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar flatRate = containerNode.querySelector(\"#prop_\"+prop+\"_flat_rate\");\r\n\t\t\t\t\tif(flatRate){\r\n\t\t\t\t\t\tflatRate.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar curveRate = containerNode.querySelector(\"#prop_\"+prop+\"_curve_rate\");\r\n\t\t\t\t\tvar curveMax = containerNode.querySelector(\"#prop_\"+prop+\"_curve_max\");\r\n\t\t\t\t\tif(curveRate && curveMax){\r\n\t\t\t\t\t\tcurveRate.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\t\tvar current = _this.getMetaValue(prop);\r\n\t\t\t\t\t\t\tvar parts = current.split(\",\");\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t\tparts[1] = value;\r\n\t\t\t\t\t\t\t\t_this.setMetaValue(prop, parts.join(\",\"));\r\n\t\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcurveMax.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\t\tvar current = _this.getMetaValue(prop);\r\n\t\t\t\t\t\t\tvar parts = current.split(\",\");\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t\tparts[0] = value;\r\n\t\t\t\t\t\t\t\t_this.setMetaValue(prop, parts.join(\",\"));\r\n\t\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//species: handleDefaultProp(\"pilotSpecies\", \"Species\"),\r\n\t\tterrain: {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=_this.createTerrainControls(\"pilotTerrain\");\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tlet entries = containerNode.querySelectorAll(\".terrain_container .entry\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar parts = _this.getMetaValue(\"pilotTerrain\").split(\"\");\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-scoreidx\");\r\n\t\t\t\t\t\tvar score = this.getAttribute(\"data-score\");\r\n\t\t\t\t\t\tparts[idx] = score;\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotTerrain\", parts.join(\"\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\texp_yield: handleDefaultProp(\"pilotExpYield\", EDITORSTRINGS.PILOT.label_exp_yield),\r\n\t\tpp_yield: handleDefaultProp(\"pilotPPYield\", EDITORSTRINGS.PILOT.label_pp_yield),\r\n\t\ttags: handleDefaultProp(\"pilotTags\", EDITORSTRINGS.PILOT.label_tags),\r\n\t\ttarget_formula: handleDefaultProp(\"pilotTargetingFormula\", EDITORSTRINGS.PILOT.label_target_formula),\r\n\t\ttext_alias:{\r\n\t\t\tcreateControls(){\r\n\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_text_alias;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='prop_text_alias'>\";\r\n\t\t\t\tconst value = _this.getMetaValue(\"pilotTextAlias\");\r\n\t\t\t\tcontent+=\"<option \"+(value == -1 ? \"selected\" : \"\")+\" value='-1'>None</option>\";\r\n\t\t\t\tfor(var i = 1; i < $dataActors.length; i++){\r\n\t\t\t\t\tcontent+=\"<option \"+(i == value ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataActors[i].name+\"</option>\";\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_text_alias\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"pilotTextAlias\", this.value);\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tattribute1: handleDefaultProp(\"pilotAttribute1\",  EDITORSTRINGS.MECH.label_attribute1),\r\n\t\tattribute2: handleDefaultProp(\"pilotAttribute2\",  EDITORSTRINGS.MECH.label_attribute2),\r\n\t\tspirits: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar spiritDefs = $spiritManager.getSpiritDefinitions();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tfunction createSpiritControl(idx){\t\t\t\t\t\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"pilotSpirit\"+idx);\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\t\tvar learnedAt = parts[1] || 0;\r\n\t\t\t\t\tvar cost = parts[2] || 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"#\"+idx;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='spirit_select_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var i = 0; i < spiritDefs.length; i++){\r\n\t\t\t\t\t\tif(spiritDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+spiritDefs[i].desc+\"' value='\"+i+\"'>\"+spiritDefs[i].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_level;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<input data-idx='\"+idx+\"' id='spirit_learned_\"+idx+\"' value='\"+learnedAt+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_cost;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<input data-idx='\"+idx+\"' id='spirit_cost_\"+idx+\"' value='\"+cost+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 1; i <= 6; i++){\r\n\t\t\t\t\tcontent+=createSpiritControl(i);\r\n\t\t\t\t}\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tfor(var i = 1; i <= 6; i++){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#spirit_select_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotSpirit\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotSpirit\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#spirit_learned_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotSpirit\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tif(!isNaN(this.value)){\r\n\t\t\t\t\t\t\tparts[1] = this.value;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotSpirit\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#spirit_cost_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotSpirit\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tif(!isNaN(this.value)){\r\n\t\t\t\t\t\t\tparts[2] = this.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotSpirit\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttwin_spirit: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar spiritDefs = $spiritManager.getSpiritDefinitions();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tvar value = _this.getMetaValue(\"pilotTwinSpirit\");\r\n\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\tvar cost = parts[1] || 0;\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_twin;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='spirit_select_twin'>\";\r\n\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\tfor(var i = 0; i < spiritDefs.length; i++){\r\n\t\t\t\t\tif(spiritDefs[i]){\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+spiritDefs[i].desc+\"' value='\"+i+\"'>\"+spiritDefs[i].name+\"</option>\";\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_cost;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='spirit_cost_twin' value='\"+cost+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#spirit_select_twin\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"pilotTwinSpirit\");\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t_this.setMetaValue(\"pilotTwinSpirit\", parts.join(\",\"));\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#spirit_cost_twin\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"pilotTwinSpirit\");\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tif(!isNaN(this.value)){\r\n\t\t\t\t\t\tparts[1] = this.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.setMetaValue(\"pilotTwinSpirit\", parts.join(\",\"));\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tabilities: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $pilotAbilityManager.getDefinitions()\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tfunction createAbilityControl(idx){\t\t\t\t\t\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"pilotAbility\"+idx);\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\t\tvar abilityLevel = parts[1] || 0;\r\n\t\t\t\t\tvar requiredLevel = parts[2] || 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"#\"+String(idx).padStart(3,0);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='ability_select_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_ability_level;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t//content+=\"<input data-idx='\"+idx+\"' id='ability_level_\"+idx+\"' value='\"+abilityLevel+\"'></input>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='ability_level_\"+idx+\"'>\";\r\n\t\t\t\t\tvar maxLevel = 1;\r\n\t\t\t\t\tif(abilityDefs[id]){\r\n\t\t\t\t\t\tmaxLevel = abilityDefs[id].maxLevel;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i = 1; i <= maxLevel; i++){\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == abilityLevel ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+i+\"</option>\";\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_learned_at;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<input data-idx='\"+idx+\"' id='ability_learned_\"+idx+\"' value='\"+requiredLevel+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"<div class='ability_scroll'>\";\t\r\n\t\t\t\tfor(var i = 1 + (_this._currentAbiPage * _this._abiPageSize); i <= Math.min((_this._currentAbiPage * _this._abiPageSize) + _this._abiPageSize); i++){\r\n\t\t\t\t\tcontent+=createAbilityControl(i);\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tfor(var i = 1 + (_this._currentAbiPage * _this._abiPageSize); i <= Math.min((_this._currentAbiPage * _this._abiPageSize) + _this._abiPageSize); i++){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#ability_select_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotAbility\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t\tif(!parts[1]){\r\n\t\t\t\t\t\t\tparts[1] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!parts[2]){\r\n\t\t\t\t\t\t\tparts[2] = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotAbility\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#ability_level_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotAbility\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tif(!isNaN(this.value)){\r\n\t\t\t\t\t\t\tparts[1] = this.value;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotAbility\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#ability_learned_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotAbility\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tif(!isNaN(this.value)){\r\n\t\t\t\t\t\t\tparts[2] = this.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotAbility\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, \r\n\t\tace_ability: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $pilotAbilityManager.getDefinitions()\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tvar id = _this.getMetaValue(\"pilotAbilityAce\");\r\n\t\t\t\tif(id == \"\"){\r\n\t\t\t\t\tid = -1;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_ace_ability;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select  id='ability_select_ace'>\";\r\n\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#ability_select_ace\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"pilotAbilityAce\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\twill_on_hit: handleDefaultProp(\"pilotOnHitWill\", EDITORSTRINGS.PILOT.label_will_on_hit),\r\n\t\twill_on_miss: handleDefaultProp(\"pilotOnMissWill\", EDITORSTRINGS.PILOT.label_will_on_miss),\r\n\t\twill_on_damage: handleDefaultProp(\"pilotOnDamageWill\", EDITORSTRINGS.PILOT.label_will_on_damage),\r\n\t\twill_on_evade: handleDefaultProp(\"pilotOnEvadeWill\", EDITORSTRINGS.PILOT.label_will_on_evade),\r\n\t\twill_on_destroy: handleDefaultProp(\"pilotOnDestroyWill\", EDITORSTRINGS.PILOT.label_will_on_destroy),\r\n\t\twill_on_ally_down: handleDefaultProp(\"pilotOnAllyDownWill\", EDITORSTRINGS.PILOT.label_will_on_ally_down),\r\n\t\tassets: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_cutin_path;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"img/SRWBattleScene/\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<input id='cutin_path' value='\"+_this.getMetaValue(\"pilotCutinPath\")+\"'></input>\";\r\n\t\t\t\tcontent+=\".png\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_overworld;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+= \"<div class='overworld_preview unit_img_preview'></div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#cutin_path\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"pilotCutinPath\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\r\n\t\t\t\tvar overworldInfo = [\r\n\t\t\t\t\t_this.getProperty(\"characterName\"),\r\n\t\t\t\t\t_this.getProperty(\"characterIndex\")\r\n\t\t\t\t];//_this.getMetaValue(\"srpgOverworld\").split(\",\");\r\n\t\t\t\tvar divs = containerNode.querySelectorAll(\".overworld_preview\");\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\t_OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loadOverworldByParams(overworldInfo[0], overworldInfo[1], div);\r\n\t\t\t\t});\t\t\r\n\r\n\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\t\tlet result = await _OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].showOverworldSelector(e, overworldInfo[0], overworldInfo[1], this);\r\n\t\t\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\t\t\t//_this.setMetaValue(\"srpgOverworld\", result.faceName+\",\"+result.faceIndex);\r\n\t\t\t\t\t\t\t_this.setProperty(\"characterName\", result.faceName);\t\r\n\t\t\t\t\t\t\t_this.setProperty(\"characterIndex\", result.faceIndex);\t\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.isModified();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\t\t\r\n\t\t\t\t});\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\trelationships: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $relationshipBonusManager.getDefinitions()\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tfunction createAbilityControl(idx){\t\t\t\t\t\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"pilotRelationship\"+idx);\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tvar pilotId = parts[0] || -1;\r\n\t\t\t\t\tvar effectId = parts[1] || -1;\r\n\t\t\t\t\tvar effectLevel = parts[2] || 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"#\"+String(idx).padStart(2,0);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_receiving;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='rel_pilot_select_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var i = 1; i < $dataActors.length; i++){\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == pilotId ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+$dataActors[i].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_effect;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t//content+=\"<input data-idx='\"+idx+\"' id='ability_level_\"+idx+\"' value='\"+abilityLevel+\"'></input>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='rel_abi_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option value=''></option>\";\r\n\t\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == effectId ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.PILOT.label_rel_level;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t//content+=\"<input data-idx='\"+idx+\"' id='rel_abi_level_\"+idx+\"' value='\"+(effectLevel + 1)+\"'></input>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='rel_abi_level_\"+idx+\"'>\";\r\n\t\t\t\t\t//content+=\"<option value=''></option>\";\r\n\t\t\t\t\tfor(var i = 0; i < 3; i++){\r\n\t\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == effectLevel ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(i + 1)+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"<div class='ability_scroll'>\";\t\r\n\t\t\t\tfor(var i = 1 + (_this._currentRelPage * _this._relPageSize); i <= Math.min((_this._currentRelPage * _this._relPageSize) + _this._relPageSize); i++){\r\n\t\t\t\t\tcontent+=createAbilityControl(i);\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tfor(var i = 1 + (_this._currentRelPage * _this._relPageSize); i <= Math.min((_this._currentRelPage * _this._relPageSize) + _this._relPageSize); i++){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#rel_pilot_select_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotRelationship\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotRelationship\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#rel_abi_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotRelationship\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\t\t\t\t\t\t\r\n\t\t\t\t\t\tparts[1] = this.value;\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotRelationship\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#rel_abi_level_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"pilotRelationship\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tif(!isNaN(this.value)){\r\n\t\t\t\t\t\t\tparts[2] = this.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.setMetaValue(\"pilotRelationship\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, \r\n\t};\t\r\n\t\r\n\tfunction handleDefaultProp(prop, name){\r\n\t\treturn {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=_this.createValueInput(prop, name);\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n\r\n\r\nAllyPilotUI.prototype.show = async function(){\r\n\tlet _this = this;\r\n\t_this.loadData();\r\n\tvar listScroll = 0;\r\n\tif(this._dbList){\r\n\t\tlistScroll = this._dbList.getScroll();\r\n\t}\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tvar content = \"\";\r\n\tcontent+=\"<div class='editor_ui'>\";\r\n\tcontent+=\"<div class='list_pane'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='edit_pane'>\";\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button class='cancel'>\"+EDITORSTRINGS.GENERAL.label_cancel+\"</button>\";\r\n\tcontent+=\"<button class='save'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='main_info'>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_general_info;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content'>\";\r\n\tcontent+=_this._propertyHandlers.face.createControls();\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.name.createControls();\r\n\tcontent+=_this._propertyHandlers.default_mech.createControls();\r\n\t/*content+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.species.createControls();\r\n\tcontent+=\"</div>\";*/\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.terrain.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.exp_yield.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.pp_yield.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.ace_ability.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.tags.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.target_formula.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\r\n\tcontent+=_this._propertyHandlers.text_alias.createControls();\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.attribute1.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.attribute2.createControls();\r\n\tcontent+=\"</div>\";\r\n\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_stats;\t\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.stats.createControls();\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_spirits;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.spirits.createControls();\r\n\tcontent+=_this._propertyHandlers.twin_spirit.createControls();\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_abilities;\t\r\n\t\r\n\tcontent+=\"<div class='abi_page_control'>\";\r\n\tcontent+=\"<img title='Previous page' id='abi_page_left' src='svg/chevron_right.svg'/>\"\r\n\tcontent+=\"<img title='Next page' id='abi_page_right' src='svg/chevron_right.svg'/>\"\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.abilities.createControls();\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_personality;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.will_on_hit.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.will_on_miss.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.will_on_damage.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.will_on_evade.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.will_on_destroy.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.will_on_ally_down.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\r\n\t\r\n\t\r\n\tcontent+=_this.createRelationshipSection();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_assets;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content'>\";\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.assets.createControls();\r\n\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tthis._container.innerHTML = content;\r\n\tvar search = \"\";\r\n\tif(this._dbList){\r\n\t\tsearch = this._dbList.getSearch();\r\n\t}\r\n\tthis._dbList = new _DBList_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\r\n\t\tthis._container.querySelector(\".list_pane\"), \r\n\t\tthis._data, \r\n\t\tthis,\r\n\t\t{\r\n\t\t\tselected: function(id){\r\n\t\t\t\t_this._currentId = id;\r\n\t\t\t\t_this.show();\r\n\t\t\t},\r\n\t\t\tcountChanged: function(amount){\r\n\t\t\t\t\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\tfor(var i = 0; i < amount + 1; i++){\r\n\t\t\t\t\tlet blankEntry = _this.getEmpty(i);\r\n\t\t\t\t\ttmp.push(_this._data[i] || blankEntry);\r\n\t\t\t\t}\r\n\t\t\t\t_this._data = tmp;\r\n\t\t\t\t_this.show();\r\n\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tthis._dbList.setSearch(search);\r\n\tthis._dbList.show(_this._currentId);\r\n\tif(listScroll){\r\n\t\tthis._dbList.setScroll(listScroll);\r\n\t}\r\n\t\r\n\tthis.hook();\r\n\t\r\n}\r\n\r\nAllyPilotUI.prototype.createRelationshipSection = function(){\r\n\tlet content = \"\";\r\n\tcontent+=\"<div class='section relationships'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.PILOT.label_rel_bonus;\r\n\tcontent+=\"<div class='abi_page_control'>\";\r\n\tcontent+=\"<img title='Previous page' id='rel_page_left' src='svg/chevron_right.svg'/>\"\r\n\tcontent+=\"<img title='Next page' id='rel_page_right' src='svg/chevron_right.svg'/>\"\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\tcontent+=\"<div class='table'>\";\r\n\r\n\tcontent+=this._propertyHandlers.relationships.createControls();\r\n\r\n\tcontent+=\"</div>\";\r\n\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\treturn content;\r\n}\r\n\r\nAllyPilotUI.prototype.hook = function(){\r\n\tlet _this = this;\r\n\t_this._container.querySelector(\".edit_pane .controls .save\").addEventListener(\"click\", function(){\r\n\t\t_this.save();\r\n\t\t_this._mainUIHandler.clearModified();\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\".edit_pane .controls .cancel\").addEventListener(\"click\", function(){\r\n\t\tvar c = true;\r\n\t\tif(_this._mainUIHandler.isModified()){\r\n\t\t\tc = confirm(\"Discard all unsaved changes?\");\r\n\t\t}\r\n\t\tif(c){\r\n\t\t\t_this._data = null;\r\n\t\t\t_this.show();\t\r\n\t\t\t_this._mainUIHandler.clearModified();\r\n\t\t}\t\t\r\n\t});\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tObject.keys(_this._propertyHandlers).forEach(function(prop){\r\n\t\t_this._propertyHandlers[prop].hook(currentEntry);\r\n\t});\r\n\t\r\n\t\r\n\t_this.hookPageControls();\r\n}\r\n\r\nAllyPilotUI.prototype.hookPageControls = function(){\r\n\tlet _this = this;\r\n\t\r\n\t_this._container.querySelector(\"#abi_page_left\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage > 0){\r\n\t\t\t_this._currentAbiPage--;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\"#abi_page_right\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage < 19){\r\n\t\t\t_this._currentAbiPage++;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\"#rel_page_left\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentRelPage > 0){\r\n\t\t\t_this._currentRelPage--;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n\r\n\t_this._container.querySelector(\"#rel_page_right\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentRelPage < 4){\r\n\t\t\t_this._currentRelPage++;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n}\r\n\r\nAllyPilotUI.prototype.getEmpty = function(id){\r\n\treturn {\r\n\t  \"id\": id,\r\n\t  \"learnings\": [],\r\n\t  \"name\": \"\",\r\n\t  \"note\": \"\",\r\n\t  \"meta\": {},\r\n\t  classId: 1\r\n\t};\r\n}\t\n\n//# sourceURL=webpack://src/./js/Editor/AllyPilotUI.js?");

/***/ }),

/***/ "./js/Editor/BasicBattleSpriteManager.js":
/*!***********************************************!*\
  !*** ./js/Editor/BasicBattleSpriteManager.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BasicBattleSpriteManager)\n/* harmony export */ });\n/* harmony import */ var _style_menuSpriteSelector_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/menuSpriteSelector.css */ \"./js/Editor/style/menuSpriteSelector.css\");\n/* harmony import */ var _style_menuSpriteSelector_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_menuSpriteSelector_css__WEBPACK_IMPORTED_MODULE_0__);\n\r\nfunction BasicBattleSpriteManager(){\r\n\t\r\n}\r\n\r\nBasicBattleSpriteManager.showSelector = function(e, current, elem){\r\n\tvar currentSearch = \"\";\r\n\te.stopPropagation();\r\n\tif(!current){\r\n\t\tcurrent = \"none\";\r\n\t}\r\n\treturn new Promise(function(resolve, reject){\t\r\n\t\tvar path = __webpack_require__(/*! path */ \"path\");\r\n\t\tvar base = getBase();\r\n\t\tconst dir = base+\"img/basic_battle\";\r\n\t\tvar availableFiles = [];\r\n\t\tconst FILESYSTEM = __webpack_require__(/*! fs */ \"fs\"); \r\n\t\tFILESYSTEM.readdirSync(dir).forEach(function(file) {\t\r\n\t\t\tfile = file.replace(/\\.png$/, \"\");\r\n\t\t\tavailableFiles.push(file);\t\t\r\n\t\t});\t\r\n\t\t\r\n\t\tvar editorContainer = document.querySelector(\"#srw_editor\");\r\n\t\t\r\n\t\tvar container;\r\n\t\tvar containerId = \"menu_selector_container\";\r\n\t\tvar container = editorContainer.querySelector(\"#menu_selector_container\");\r\n\t\tif(!container){\t\t\r\n\t\t\tcontainer = document.createElement(\"div\");\r\n\t\t\tcontainer.id = \"menu_selector_container\";\r\n\t\t\teditorContainer.appendChild(container);\t\r\n\t\t\t\r\n\t\t\tcontainer.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar rect = elem.getBoundingClientRect();\r\n\t\tcontainer.style.top = rect.top + \"px\";\r\n\t\tcontainer.style.left = rect.right + 5 + \"px\";\r\n\t\t\r\n\t\tvar content = \"\";\r\n\t\tcontent+=\"<div class='preview_selector'>\";\r\n\t\tcontent+=\"<div class='controls'>\";\r\n\t\tcontent+=\"<div class='label'>Search </div>\";\r\n\t\tcontent+=\"<input class='search'></input>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class='selection_pane'>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontainer.innerHTML = content;\r\n\t\tcontainer.style.display = \"\";\r\n\t\t\r\n\t\t\r\n\t\r\n\t\t\r\n\t\tfunction updateSelector(){\r\n\t\t\tvar ctr = 0;\r\n\t\t\tvar content = \"\";\r\n\t\t\tvar ctr = 0;\r\n\t\t\tcontent+=\"<div class='selector_container'>\";\r\n\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\tcontent+=\"<div data-file='none' class='entry_container \"+(current == \"none\" ? \"selected\" : \"\")+\" '>\";\r\n\t\t\tcontent+=\"<div class='entry'>\";\r\n\t\t\tcontent+=\"None\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tavailableFiles.forEach(function(file){\r\n\t\t\t\tif(file.toLowerCase().indexOf(currentSearch.toLowerCase()) != -1){\r\n\t\t\t\t\tif(!((ctr + 1) % 3)){\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontent+=\"<div data-file='\"+file+\"' class='entry_container \"+(current == \"file\" ? \"selected\" : \"\")+\"'>\";\r\n\t\t\t\t\tcontent+=\"<div class='entry'>\";\r\n\t\t\t\t\tcontent+=\"<img src='img/basic_battle/\"+file+\".png'/>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div title='\"+file+\"' class='file_name'>\";\r\n\t\t\t\t\tcontent+=file;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tctr++;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t/*content+=\"<div class='controls'>\";\r\n\t\t\tcontent+=\"<div class='label '>Face name:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceName+\"</div>\";\r\n\t\t\tcontent+=\"<div class='label '>Face index:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceIndex+\"</div>\";\r\n\t\t\tcontent+=\"</div>\";*/\r\n\t\t\t\r\n\t\t\tcontainer.querySelector(\".selection_pane\").innerHTML = content;\t\t\t\r\n\t\t\t\r\n\t\t\tvar selectors = container.querySelectorAll(\".selection_pane .entry_container\");\r\n\t\t\tselectors.forEach(function(selector){\r\n\t\t\t\tselector.addEventListener(\"click\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tvar path = this.getAttribute(\"data-file\");\r\n\t\t\t\t\tif(path == \"none\"){\r\n\t\t\t\t\t\tpath = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve({status: \"updated\", path: path});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateAll(){\r\n\t\t\tupdateSelector();\r\n\t\t\tvar containerRect = container.getBoundingClientRect();\r\n\t\t\tif(containerRect.bottom > window.innerHeight){\r\n\t\t\t\tcontainer.style.top = rect.top - (containerRect.bottom - window.innerHeight + 5) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tupdateAll();\r\n\t\t\r\n\t\tif(!BasicBattleSpriteManager.hideHandler){\r\n\t\t\tBasicBattleSpriteManager.hideHandler = editorContainer.addEventListener(\"click\", function(){\r\n\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\tresolve({status: \"cancelled\"});\r\n\t\t\t});\r\n\t\t\t//hacky, solution to hide element if the container holding the parent element is scrolled\r\n\t\t\tif(document.querySelector(\".text_scroll_default\")){\r\n\t\t\t\tdocument.querySelector(\".text_scroll_default\").addEventListener(\"scroll\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tresolve({status: \"cancelled\"});\r\n\t\t\t\t});\t\r\n\t\t\t}\t\t\t\r\n\t\t}\t\r\n\t\t\r\n\t\tcontainer.querySelector(\".search\").addEventListener(\"keyup\", function(){\r\n\t\t\tcurrentSearch = this.value;\r\n\t\t\tupdateAll();\r\n\t\t});\r\n\t});\r\n}\n\n//# sourceURL=webpack://src/./js/Editor/BasicBattleSpriteManager.js?");

/***/ }),

/***/ "./js/Editor/DBList.js":
/*!*****************************!*\
  !*** ./js/Editor/DBList.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ DBList)\n/* harmony export */ });\nfunction DBList(container, data, copyHandler, callbacks){\r\n\tthis._container = container;\r\n\tthis._data = data;\r\n\tthis._callbacks = callbacks;\r\n\tthis._selectedIdx = -1;\r\n\tthis._copyHandler = copyHandler;\r\n\tthis._search = \"\";\r\n}\r\n\r\nDBList.prototype.getScroll = function(){\r\n\tvar elem = this._container.querySelector(\".scroll\")\r\n\tif(elem){\r\n\t\treturn elem.scrollTop;\r\n\t} else {\r\n\t\treturn 0;\r\n\t}\r\n}\r\n\r\nDBList.prototype.setScroll = function(scroll){\r\n\tvar elem = this._container.querySelector(\".scroll\")\r\n\tif(elem){\r\n\t\telem.scrollTop = scroll;\r\n\t}\r\n}\r\n\r\nDBList.prototype.getSearch = function(){\r\n\treturn this._search;\r\n}\r\n\r\nDBList.prototype.setSearch = function(search){\r\n\tthis._search = search;\r\n}\r\n\r\nDBList.prototype.show = function(idx, isSearch){\r\n\tlet _this = this;\r\n\tvar content = \"\";\r\n\tthis._selectedIdx = idx;\r\n\t\r\n\tcontent+=\"<div class='db_list'>\";\r\n\tcontent+=\"<div class='list_controls'>\";\r\n\tcontent+=\"<div class='label'>\"+EDITORSTRINGS.GENERAL.label_max_entries+\"</div><input id='max_entries' value='\"+(this._data.length - 1)+\"'></input>\";\r\n\tcontent+=\"<div class='label' id='list_search_label'>\"+EDITORSTRINGS.GENERAL.label_search+\"</div><input id='list_search' value='\"+(this._search)+\"'></input>\";\r\n\tcontent+=\"<img title='\"+EDITORSTRINGS.GENERAL.hint_clear+\"' id='clear_search' src='\"+_this._copyHandler._svgPath+\"close-line.svg'>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='scroll'>\";\r\n\t//RPG Maker MV databases are 1-indexed\r\n\tfor(var i = 1; i < this._data.length; i++){\r\n\t\tif(this._search == \"\" || this._data[i].name.toLowerCase().indexOf(this._search.toLowerCase()) != -1){\t\t\r\n\t\t\tcontent+=\"<div class='entry \"+(i == idx ? \"selected\" : \"\")+\"' data-idx='\"+i+\"'>\";\r\n\t\t\tcontent+=String(i).padStart(4, 0) + \" \" +this._data[i].name;\r\n\t\t\tif(this._data[i].meta.editorTag){\r\n\t\t\t\tcontent+= \" <div class='editor_tag'>[\" +this._data[i].meta.editorTag+\"]</div>\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='controls' >\";\r\n\t\t\tif(this._copyHandler.copyIsBuffered()){\r\n\t\t\t\t//content+=\"<button data-idx='\"+i+\"' class='paste'>Paste</button>\";\r\n\t\t\t\tcontent+=\"<img title='\"+EDITORSTRINGS.GENERAL.hint_paste+\"' data-idx='\"+i+\"' class='paste' src='\"+_this._copyHandler._svgPath+\"paste.svg'>\";\t\r\n\t\t\t}\r\n\t\t\t//content+=\"<button data-idx='\"+i+\"' class='copy'>Copy</button>\";\t\r\n\t\t\tcontent+=\"<img title='\"+EDITORSTRINGS.GENERAL.hint_copy+\"' data-idx='\"+i+\"' class='copy' src='\"+_this._copyHandler._svgPath+\"copy.svg'>\";\t\r\n\t\t\t\r\n\t\t\tcontent+=\"<img title='\"+EDITORSTRINGS.GENERAL.hint_erase+\"' data-idx='\"+i+\"' class='delete' src='\"+_this._copyHandler._svgPath+\"close-line.svg'>\";\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tthis._container.innerHTML = content;\r\n\tif(isSearch){\r\n\t\tvar searchInput = this._container.querySelector(\"#list_search\");\t\t\r\n\t\tconst end = searchInput.value.length;\r\n\t\tsearchInput.setSelectionRange(end, end);\t\t\r\n\t\tsearchInput.focus();\r\n\t}\t\r\n\tthis.hook();\r\n}\r\n\r\nDBList.prototype.hook = function(){\r\n\tlet _this = this;\r\n\tthis._container.querySelector(\"#max_entries\").addEventListener(\"change\", function(){\r\n\t\tvar newCount = this.value * 1;\r\n\t\tif(!isNaN(newCount) && newCount >= 1){\r\n\t\t\tvar c = true;\r\n\t\t\tif(newCount < _this._data.length - 1){\r\n\t\t\t\tc = confirm(EDITORSTRINGS.GENERAL.confirm_remove_entries);\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(c){\r\n\t\t\t\t_this._callbacks.countChanged(newCount);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\tthis._container.querySelector(\"#list_search\").addEventListener(\"change\", function(){\r\n\t\t_this._search = this.value;\r\n\t\t_this.show(null, true);\r\n\t});\r\n\t\r\n\tthis._container.querySelector(\"#clear_search\").addEventListener(\"click\", function(){\r\n\t\t_this._search = \"\";\r\n\t\t_this.show(_this._selectedIdx);\r\n\t});\r\n\t\t\r\n\tvar entries = this._container.querySelectorAll(\".entry\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t_this._callbacks.selected(this.getAttribute(\"data-idx\"));\r\n\t\t});\r\n\t});\t\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".copy\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t_this._copyHandler.copyEntry(this.getAttribute(\"data-idx\"));\r\n\t\t});\r\n\t});\t\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".paste\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t_this._copyHandler.pasteEntry(this.getAttribute(\"data-idx\"));\r\n\t\t});\r\n\t});\t\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".delete\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t_this._copyHandler.deleteEntry(this.getAttribute(\"data-idx\"));\r\n\t\t});\r\n\t});\t\r\n}\n\n//# sourceURL=webpack://src/./js/Editor/DBList.js?");

/***/ }),

/***/ "./js/Editor/DeployActionUI.js":
/*!*************************************!*\
  !*** ./js/Editor/DeployActionUI.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ DeployActionUI)\n/* harmony export */ });\n/* harmony import */ var _EditorUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditorUI.js */ \"./js/Editor/EditorUI.js\");\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n/* harmony import */ var _MenuSpriteManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MenuSpriteManager */ \"./js/Editor/MenuSpriteManager.js\");\n/* harmony import */ var _BasicBattleSpriteManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BasicBattleSpriteManager */ \"./js/Editor/BasicBattleSpriteManager.js\");\n/* harmony import */ var _OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OverworldSpriteManager */ \"./js/Editor/OverworldSpriteManager.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction DeployActionUI(editorContainer, managedMech, mainUIHandler, callbacks){\r\n\t_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, mainUIHandler);\r\n\tthis._managedMech = managedMech;\r\n\tthis._dataFile = \"data/DeployActions.json\";\r\n\tthis._callbacks = callbacks;\r\n\tthis._editorContainer = editorContainer;\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.id=\"deploy_action_ui\";\r\n\tdiv.classList.add(\"overlay_container\");\r\n\teditorContainer.appendChild(div);\t\r\n\t\r\n\tthis._container = div;\r\n}\r\n\r\nDeployActionUI.prototype = Object.create(_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nDeployActionUI.prototype.constructor = DeployActionUI;\r\n\r\nDeployActionUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\tvar containerNode = _this._container;\r\n}\r\n\r\nDeployActionUI.prototype.parseData = function(){\r\n\tlet _this = this;\r\n\t\r\n}\r\n\r\nDeployActionUI.prototype.packData = function(){\r\n\tlet _this = this;\r\n\tvar outData = JSON.parse(JSON.stringify(_this._data));\r\n\treturn JSON.stringify(outData);\r\n}\r\n\r\nDeployActionUI.prototype.show = async function(){\r\n\tlet _this = this;\r\n\t_this.loadData();\r\n\t\r\n\tvar currentScroll;\r\n\tvar scrollContainer = _this._container.querySelector(\".scroll\");\r\n\tif(scrollContainer){\r\n\t\tcurrentScroll = scrollContainer.scrollTop;\r\n\t}\r\n\t\r\n\tlet content = \"\";\r\n\tlet typeOptions = [\"main\", \"sub\"];\r\n\t\r\n\tlet sourceOptions = [\"direct\", \"main\", \"sub\"];\r\n\t\r\n\t_this.initMechDef(_this._managedMech);\r\n\tvar mechData = _this._data[_this._managedMech];\r\n\t\r\n\tcontent+=\"<div class='content_container'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=\"Deploy Actions for #\"+String(_this._managedMech).padStart(3,0)+\" \"+$dataClasses[_this._managedMech].name;\r\n\tcontent+=\"<img id='close_deploy_actions' class='remove_button' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='scroll'>\";\r\n\tObject.keys(mechData).sort().forEach(function(pilotId){\r\n\t\t\r\n\t\t\tcontent+=\"<div class='section_block'>\";\r\n\t\t\tcontent+=\"<div class='title'>\";\r\n\t\t\tcontent+=\"If deployed with pilot\";\r\n\t\t\tcontent+=\"<select class='pilot_block_main_select' data-blockid='\"+pilotId+\"'>\";\r\n\t\t\tcontent+=\"<option \"+(i == -1 ? \"selected\" : \"\")+\" value='-1'>Any</option>\";\r\n\t\t\tfor(var i = 1; i < $dataActors.length; i++){\t\r\n\t\t\t\tcontent+=\"<option \"+(i == pilotId ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataActors[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t\t\t}\t\r\n\t\t\tcontent+=\"</select>\";\r\n\t\t\tcontent+=\"Optional\";\r\n\t\t\tcontent+=\"<input type='checkbox' data-blockid='\"+pilotId+\"' class='pilot_block_optional_toggle' \"+(mechData[pilotId].optional ? \"checked\" : \"\")+\"/>\";\r\n\t\t\tcontent+=\"<img class='remove_pilot_block remove_button' data-blockid='\"+pilotId+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<div class='content'>\";\r\n\t\t\tvar mechEntries = mechData[pilotId];\r\n\t\t\t\r\n\t\t\tObject.keys(mechEntries).sort().forEach(function(mechId){\r\n\t\t\t\t//hack to avoid having to change the deployAction structure\r\n\t\t\t\tif(mechId != \"optional\"){\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='section_block'>\";\r\n\t\t\t\t\tcontent+=\"<div class='title'>\";\r\n\t\t\t\t\tcontent+=\"Change the pilot(s) of \";\r\n\t\t\t\t\tcontent+=\"<select class='mech_block_select' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option></option>\";\r\n\t\t\t\t\tfor(var i = 1; i < $dataClasses.length; i++){\t\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == mechId ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataClasses[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"<img class='remove_mech_block remove_button' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='content'>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar targetIdx = 0;\r\n\t\t\t\t\tvar targetEntries = mechData[pilotId][mechId];\r\n\t\t\t\t\ttargetEntries.forEach(function(targetEntry){\r\n\t\t\t\t\t\tcontent+=\"<div class='section_block'>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='title'>\";\r\n\t\t\t\t\t\tcontent+=\"Take pilot\";\r\n\t\t\t\t\t\tcontent+=\"<img class='remove_target_block remove_button' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='target_control'>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\tcontent+=\"Type\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<select class='source_type_select' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"'>\";\r\n\t\t\t\t\t\tcontent+=\"<option></option>\";\r\n\t\t\t\t\t\tfor(var i = 0; i < sourceOptions.length; i++){\t\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(sourceOptions[i] == targetEntry.source.type ? \"selected\" : \"\")+\" value='\"+sourceOptions[i]+\"'>\"+sourceOptions[i]+\"</option>\";\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\tcontent+=\"</select>\";\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tif(targetEntry.source.type == \"direct\"){\r\n\t\t\t\t\t\t\tcontent+=\"<div class='target_control'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\t\tcontent+=\"Pilot\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\tcontent+=\"<select class='source_pilot_select' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<option></option>\";\r\n\t\t\t\t\t\t\tfor(var i = 1; i < $dataActors.length; i++){\t\r\n\t\t\t\t\t\t\t\tcontent+=\"<option \"+(i == targetEntry.source.id ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataActors[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tif(targetEntry.source.type == \"main\" || targetEntry.source.type == \"sub\"){\r\n\t\t\t\t\t\t\tcontent+=\"<div class='target_control'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\t\tcontent+=\"Take from\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\tcontent+=\"<select class='source_mech_select' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<option></option>\";\r\n\t\t\t\t\t\t\tfor(var i = 1; i < $dataClasses.length; i++){\t\r\n\t\t\t\t\t\t\t\tcontent+=\"<option \"+(i == targetEntry.source.mech_id ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataClasses[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(targetEntry.source.type == \"sub\"){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcontent+=\"<div class='target_control'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\t\tcontent+=\"Slot\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\t\r\n\t\t\t\t\t\t\tcontent+=\"<input class='source_slot' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"' value='\"+(targetEntry.source.slot || \"\")+\"'></input>\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<div class='title'>\";\r\n\t\t\t\t\t\tcontent+=\"Put them into slot(of #\"+(String(mechId).padStart(3, 0))+\" \"+($dataClasses[mechId].name)+\") \";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='target_control'>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\tcontent+=\"Type\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<select class='target_type_select' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"'>\";\r\n\t\t\t\t\t\tcontent+=\"<option></option>\";\r\n\t\t\t\t\t\tfor(var i = 0; i < typeOptions.length; i++){\t\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(typeOptions[i] == targetEntry.target.type ? \"selected\" : \"\")+\" value='\"+typeOptions[i]+\"'>\"+typeOptions[i]+\"</option>\";\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\tcontent+=\"</select>\";\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tif(targetEntry.target.type == \"sub\"){\r\n\t\t\t\t\t\t\tcontent+=\"<div class='target_control'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\t\tcontent+=\"Slot\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\t\r\n\t\t\t\t\t\t\tcontent+=\"<input class='target_sub_slot' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"' data-targetidx='\"+targetIdx+\"' value='\"+(targetEntry.target.slot || \"\")+\"'></input>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='hint'>Starts at 0</div>\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\ttargetIdx++;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontent+=\"<div class='controls'>\";\r\n\t\t\t\t\tcontent+=\"<button class='add_target_block' data-blockid='\"+pilotId+\"' data-mechid='\"+mechId+\"'>Add Target</button>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='controls'>\";\r\n\t\t\tcontent+=\"<button class='add_mech_block' data-blockid='\"+pilotId+\"' >Add Mech</button>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t});\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button id='add_pilot_block'>Add Pilot</button>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button id='apply_deploy_actions'>Save</button>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\r\n\t\r\n\t\r\n\tthis._container.innerHTML = content;\r\n\tvar scrollContainer = _this._container.querySelector(\".scroll\");\r\n\tif(scrollContainer){\r\n\t\tscrollContainer.scrollTop = currentScroll;\r\n\t}\r\n\t\r\n\t\r\n\tthis.hook();\r\n\t\r\n}\r\n\r\nDeployActionUI.prototype.getUnusedPilot = function(list){\r\n\tlet _this = this;\r\n\tif(!list[-1]){\r\n\t\treturn -1;\r\n\t} else {\r\n\t\tvar id;\r\n\t\tvar ctr = 1;\r\n\t\twhile(id == null && ctr < $dataActors.length){\r\n\t\t\tif(!list[ctr]){\r\n\t\t\t\tid = ctr;\r\n\t\t\t}\r\n\t\t\tctr++;\r\n\t\t}\r\n\t\treturn id;\r\n\t}\r\n}\r\n\r\nDeployActionUI.prototype.getUnusedMech = function(list){\r\n\tlet _this = this;\r\n\t\r\n\tvar id;\r\n\tvar ctr = 1;\r\n\twhile(id == null && ctr < $dataClasses.length){\r\n\t\tif(!list[ctr]){\r\n\t\t\tid = ctr;\r\n\t\t}\r\n\t\tctr++;\r\n\t}\r\n\treturn id;\t\r\n}\r\n\r\nDeployActionUI.prototype.initMechDef = function(id){\r\n\tif(!this._data[id]){\r\n\t\tthis._data[id] = {};\r\n\t}\r\n}\r\n\r\nDeployActionUI.prototype.hook = function(){\r\n\tlet _this = this;\r\n\tthis._container.querySelector(\"#close_deploy_actions\").addEventListener(\"click\", function(){\r\n\t\t_this._editorContainer.removeChild(_this._container);\r\n\t});\t\r\n\t\r\n\tthis._container.querySelector(\"#add_pilot_block\").addEventListener(\"click\", function(){\r\n\t\t\r\n\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\tvar newId = _this.getUnusedPilot( _this._data[_this._managedMech]);\r\n\t\tif(newId != null){\r\n\t\t\tmechData[newId] = {};\r\n\t\t\t_this.show();\r\n\t\t}\t\t\t\t\r\n\t});\t\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".remove_pilot_block\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\t\tdelete mechData[blockId];\r\n\t\t\t_this.show();\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".pilot_block_main_select\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\t\tvar newId = this.value;\r\n\t\t\tif(!mechData[newId]){\r\n\t\t\t\tmechData[newId] = mechData[blockId];\r\n\t\t\t\tdelete  mechData[blockId];\r\n\t\t\t\t_this.show();\r\n\t\t\t} else {\r\n\t\t\t\talert(\"This pilot already has a definition!\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".pilot_block_optional_toggle\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\t\tmechData[blockId].optional = this.checked;\r\n\t\t\t_this.show();\t\t\r\n\t\t});\r\n\t});\t\r\n\t\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".add_mech_block\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\t\tvar newId = _this.getUnusedMech(mechData[blockId]);\r\n\t\t\tif(newId != null){\r\n\t\t\t\tmechData[blockId][newId] = [];\r\n\t\t\t\t_this.show();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".remove_mech_block\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\t\t\t\r\n\t\t\tdelete mechData[blockId][mechId];\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".mech_block_select\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechData = _this._data[_this._managedMech];\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar newId = this.value;\r\n\t\t\t\r\n\t\t\tif(!mechData[blockId][newId]){\r\n\t\t\t\tmechData[blockId][newId] = mechData[blockId][mechId];\r\n\t\t\t\tdelete mechData[blockId][mechId];\r\n\t\t\t\t_this.show();\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\talert(\"This mech already has a definition!\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\t\t\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\t \r\n\tvar entries = this._container.querySelectorAll(\".add_target_block\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId];\r\n\t\t\tdata.push({target: {type: \"main\"}, source: {type: \"direct\", id: 1}});\t\t\t\t\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".remove_target_block\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId];\r\n\t\t\tdata.splice(targetIdx, 1);\t\t\t\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".source_type_select\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId][targetIdx];\r\n\t\t\tdata.source.type = this.value;\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".source_pilot_select\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId][targetIdx];\r\n\t\t\tdata.source.id = this.value;\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".source_mech_select\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId][targetIdx];\r\n\t\t\tdata.source.mech_id = this.value;\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".source_slot\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId][targetIdx];\r\n\t\t\tdata.source.slot = this.value;\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".target_type_select\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId][targetIdx];\r\n\t\t\tdata.target.type = this.value;\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar entries = this._container.querySelectorAll(\".target_sub_slot\");\r\n\tentries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\tvar blockId = this.getAttribute(\"data-blockid\");\r\n\t\t\tvar mechId = this.getAttribute(\"data-mechid\");\r\n\t\t\tvar targetIdx = this.getAttribute(\"data-targetidx\");\r\n\t\t\tvar data = _this._data[_this._managedMech][blockId][mechId][targetIdx];\r\n\t\t\tdata.target.slot = this.value;\r\n\t\t\t_this.show();\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tthis._container.querySelector(\"#apply_deploy_actions\").addEventListener(\"click\", function(){\r\n\t\t_this.save();\r\n\t\t_this._editorContainer.removeChild(_this._container);\r\n\t});\t\r\n}\r\n\n\n//# sourceURL=webpack://src/./js/Editor/DeployActionUI.js?");

/***/ }),

/***/ "./js/Editor/EditorUI.js":
/*!*******************************!*\
  !*** ./js/Editor/EditorUI.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EditorUI)\n/* harmony export */ });\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n/* harmony import */ var _FaceManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FaceManager.js */ \"./js/Editor/FaceManager.js\");\nPromise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./style/editor.css */ \"./js/Editor/style/editor.css\", 23));\r\n\r\n\r\n\r\nfunction EditorUI(container, mainUIHandler){\r\n\tthis._container = container;\r\n\tthis._mainUIHandler = mainUIHandler;\r\n\tthis._data;\r\n\tthis._currentId = 1;\r\n\tthis.initPropertyHandlers();\r\n\tthis._svgPath = \"svg/editor/\";\r\n\tif(this._mainUIHandler){\r\n\t\tthis._mainUIHandler.registerUnloadListener();\r\n\t}\t\r\n}\r\n\r\nEditorUI.prototype.initPropertyHandlers = function(){\r\n\tthrow(\"No initPropertyHandlers implementation provided!\");\r\n}\r\n\r\nEditorUI.prototype.parseData = function(){\r\n\tlet _this = this;\r\n\t_this._data.forEach(function(entry){\r\n\t\tif(entry){\r\n\t\t\tDataManager.extractMetadata(entry);\r\n\t\t}\t\t\r\n\t});\t\r\n}\r\n\r\nEditorUI.prototype.loadData = function(){\r\n\tlet _this = this;\t\r\n\tconst FILESYSTEM = __webpack_require__(/*! fs */ \"fs\"); \r\n\tif(!_this._data){\r\n\t\tvar path = __webpack_require__(/*! path */ \"path\");\r\n\t\tthis._data = JSON.parse(FILESYSTEM.readFileSync(this._dataFile, 'utf8'));\t\t\r\n\t\tthis.parseData();\r\n\t\tthis.saveBackup();\r\n\t}\t\t\t\r\n}\r\n\r\nEditorUI.prototype.packData = function(){\r\n\tlet _this = this;\r\n\tvar outData = JSON.parse(JSON.stringify(_this._data));\r\n\toutData.forEach(function(entry){\r\n\t\tif(entry){\r\n\t\t\tvar meta = entry.meta;\r\n\t\t\tvar parts = [];\r\n\t\t\tObject.keys(meta).forEach(function(metaKey){\r\n\t\t\t\tparts.push(\"<\"+metaKey+\":\"+meta[metaKey]+\">\");\r\n\t\t\t});\r\n\t\t\tentry.note = parts.join(\"\\n\");\r\n\t\t\tdelete entry.meta;\r\n\t\t}\t\t\r\n\t});\r\n\treturn JSON.stringify(outData);\r\n}\r\n\r\nEditorUI.prototype.save = function(){\r\n\tvar fs = __webpack_require__(/*! fs */ \"fs\");\r\n\tfs.writeFileSync(this._dataFile, this.packData(this._data));\r\n\tif(this._vanillaFile){\r\n\t\tfs.writeFileSync(this._vanillaFile, this.packData(this._data));\r\n\t}\r\n\tif(this._gameVar){\r\n\t\twindow[this._gameVar] = JSON.parse(JSON.stringify(this._data));\r\n\t}\r\n}\r\n\r\nEditorUI.prototype.saveBackup = function(){\r\n\tvar fs = __webpack_require__(/*! fs */ \"fs\");\r\n\tfs.writeFileSync(this._dataFile+\".bak\", this.packData(this._data));\r\n}\r\n\r\nEditorUI.prototype.hook = function(){\r\n\t\r\n}\r\n\r\nEditorUI.prototype.getCurrentEntry = function(){\r\n\treturn this._data[this._currentId];\r\n}\r\n\r\nEditorUI.prototype.getMetaValue = function(key){\r\n\tif(this.getCurrentEntry().meta[key] == null){\r\n\t\treturn \"\";\r\n\t}\r\n\treturn String(this.getCurrentEntry().meta[key]).trim();\r\n}\r\n\r\nEditorUI.prototype.setMetaValue = function(key, value){\r\n\treturn this.getCurrentEntry().meta[key] = String(value);\r\n}\r\n\r\nEditorUI.prototype.getProperty = function(key){\r\n\tif(this.getCurrentEntry()[key] == null){\r\n\t\treturn \"\";\r\n\t}\r\n\treturn this.getCurrentEntry()[key];\r\n}\r\n\r\nEditorUI.prototype.setProperty = function(key, value){\r\n\treturn this.getCurrentEntry()[key] = value;\r\n}\r\n\r\nEditorUI.prototype.createValueInput = function(key, name, preHint, postHint){\r\n\tlet _this = this;\r\n\tvar content = \"\";\r\n\t\r\n\tcontent+=\"<div class='cell'>\";\r\n\tcontent+=name;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='cell'>\";\r\n\tif(preHint){\r\n\t\tcontent+=\"<div class='hint_text pre'>\"+preHint+\"</div>\";\r\n\t}\r\n\tcontent+=\"<input id='prop_\"+key+\"' value='\"+_this.getMetaValue(key)+\"'></input>\";\r\n\tif(postHint){\r\n\t\tcontent+=\"<div class='hint_text post'>\"+postHint+\"</div>\";\r\n\t}\r\n\tcontent+=\"</div>\";\r\n\t\r\n\treturn content;\r\n}\r\n\r\nEditorUI.prototype.createPilotSelect = function(id, classString, selected, data){\r\n\tlet _this = this;\r\n\tvar content = \"\";\t\r\n\tcontent+=\"<select class='\"+classString+\"' \"+data+\" id='\"+id+\"'>\";\r\n\tcontent+=\"<option title='None' value=''>None</option>\";\r\n\tfor(var i = 1; i < $dataActors.length; i++){\t\r\n\t\tcontent+=\"<option \"+(i == selected ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataActors[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t}\t\r\n\tcontent+=\"</select>\";\r\n\t\r\n\treturn content;\r\n}\r\n\r\nEditorUI.prototype.createMechSelect = function(id, classString, selected, data){\r\n\tlet _this = this;\r\n\tvar content = \"\";\t\r\n\tcontent+=\"<select class='\"+classString+\"' \"+data+\" id='\"+id+\"'>\";\r\n\tcontent+=\"<option title='None' value=''>None</option>\";\r\n\tfor(var i = 1; i < $dataClasses.length; i++){\r\n\t\tcontent+=\"<option \"+(i == selected ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataClasses[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t}\t\r\n\tcontent+=\"</select>\";\r\n\t\r\n\treturn content;\r\n}\r\nEditorUI.prototype.createTerrainControls = function(key, name){\r\n\tlet _this = this;\r\n\tvar unitScores = _this.getMetaValue(key).split(\"\");\r\n\tvar terrains = [\"AIR\", \"LND\", \"SEA\", \"SPC\"];\r\n\tvar scores = [\"S\", \"A\", \"B\", \"C\", \"D\", \"-\"];\r\n\tvar content = \"\";\r\n\t\r\n\tcontent+=\"<div class='cell'>\";\r\n\tcontent+=EDITORSTRINGS.GENERAL.label_terrain || \"Terrain\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='cell'>\";\r\n\tcontent+=\"<div class='terrain_container'>\";\r\n\tfor(var i = 0; i < terrains.length; i++){\r\n\t\tcontent+=\"<div class='column'>\";\r\n\t\tcontent+=\"<div class='entry terrain_header'>\";\r\n\t\tcontent+=terrains[i];\r\n\t\tcontent+=\"</div>\";\r\n\t\tfor(var j = 0; j < scores.length; j++){\r\n\t\t\tcontent+=\"<div data-scoreidx='\"+i+\"' data-score='\"+scores[j]+\"' class='entry \"+(unitScores[i] == scores[j] ? \"selected\" : \"\")+\"'>\";\r\n\t\t\tcontent+=scores[j];\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\r\n\t\tcontent+=\"</div>\";\r\n\t}\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\treturn content;\r\n}\r\n\r\n\r\nEditorUI.prototype.copyEntry = function(id){\r\n\tthis._copyBuffer = JSON.parse(JSON.stringify(this._data[id]));\r\n}\r\n\t\t\r\nEditorUI.prototype.pasteEntry = function(id){\r\n\tif(this._copyBuffer){\r\n\t\tthis._data[id] = JSON.parse(JSON.stringify(this._copyBuffer));\r\n\t\tthis._data[id].id = id * 1;\r\n\t\tthis.show();\r\n\t}\r\n}\r\n\r\nEditorUI.prototype.deleteEntry = function(id){\r\n\tvar c  = confirm(\"Erase this entry?\");\r\n\tif(c){\r\n\t\tthis._data[id] = this.getEmpty(id);\r\n\t\tthis.show();\r\n\t}\t\r\n}\r\n\r\nEditorUI.prototype.copyIsBuffered = function(){\r\n\treturn !!this._copyBuffer;\r\n}\r\n\t\r\nEditorUI.prototype.escapeAttribute = function(string){\r\n\tif(!string){\r\n\t\treturn \"\";\r\n\t}\r\n\treturn string.replace(/\\'/g, \"&apos;\").replace(/\\\"/g, \"&quot;\").replace(/\\<br\\>/g, \"\\n\");\r\n}\t\n\n//# sourceURL=webpack://src/./js/Editor/EditorUI.js?");

/***/ }),

/***/ "./js/Editor/EnemyPilotUI.js":
/*!***********************************!*\
  !*** ./js/Editor/EnemyPilotUI.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EnemyPilotUI)\n/* harmony export */ });\n/* harmony import */ var _AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AllyPilotUI.js */ \"./js/Editor/AllyPilotUI.js\");\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n/* harmony import */ var _FaceManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FaceManager.js */ \"./js/Editor/FaceManager.js\");\n\r\n\r\n\r\n\r\nfunction EnemyPilotUI(container, mainUIHandler){\r\n\t_AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, container, mainUIHandler);\r\n\tthis._dataFile = \"data/EnemyPilots.json\";\r\n\tthis._vanillaFile = \"data/Enemies.json\";\r\n\tthis._gameVar = \"$dataEnemies\";\r\n}\r\n\r\nEnemyPilotUI.prototype = Object.create(_AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nEnemyPilotUI.prototype.constructor = EnemyPilotUI;\r\n\r\nEnemyPilotUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\t\r\n\t_AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.initPropertyHandlers.call(this);\r\n\tlet containerNode = _this._container;\r\n\t_this._propertyHandlers.face = {\r\n\t\tcreateControls(entry){\r\n\t\t\treturn \"<div class='portrait_preview unit_img_preview'></div>\";\r\n\t\t},\r\n\t\thook(entry){\r\n\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\tfunction updatePortraitPreviews(){\r\n\t\t\t\tvar divs = containerNode.querySelectorAll(\".portrait_preview\");\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\t_FaceManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].loadFaceByParams(_this.getMetaValue(\"faceName\"),_this.getMetaValue(\"faceIndex\") - 1, div);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tupdatePortraitPreviews();\r\n\t\t\t\r\n\t\t\tvar divs = containerNode.querySelectorAll(\".portrait_preview\");\r\n\t\t\tdivs.forEach(function(div){\r\n\t\t\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\tlet result = await _FaceManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].showFaceSelector(e, _this.getMetaValue(\"faceName\"),_this.getMetaValue(\"faceIndex\") - 1, this);\r\n\t\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\t\t_this.setMetaValue(\"faceName\", result.faceName);\r\n\t\t\t\t\t\t_this.setMetaValue(\"faceIndex\", result.faceIndex * 1 + 1);\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.isModified();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\t\t\r\n\t\t\t});\r\n\t\t}\t\t\t\r\n\t}\r\n\t_this._propertyHandlers.text_alias = {\r\n\t\tcreateControls(){\r\n\r\n\t\t\tvar content = \"\";\r\n\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\tcontent+=EDITORSTRINGS.PILOT.label_text_alias;\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\tcontent+=\"<select id='prop_text_alias'>\";\r\n\t\t\tconst value = _this.getMetaValue(\"pilotTextAlias\");\r\n\t\t\tcontent+=\"<option \"+(value == -1 ? \"selected\" : \"\")+\" value='-1'>None</option>\";\r\n\t\t\tfor(var i = 1; i < $dataEnemies.length; i++){\r\n\t\t\t\tcontent+=\"<option \"+(i == value ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(4, 0))+\" \"+$dataEnemies[i].name+\"</option>\";\r\n\t\t\t}\r\n\t\t\tcontent+=\"</select>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\treturn content;\r\n\t\t},\r\n\t\thook(){\r\n\t\t\tcontainerNode.querySelector(\"#prop_text_alias\").addEventListener(\"change\", function(){\r\n\t\t\t\t_this.setMetaValue(\"pilotTextAlias\", this.value);\r\n\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tdelete _this._propertyHandlers.relationships;\r\n}\r\n\r\nEnemyPilotUI.prototype.createRelationshipSection = function(){\r\n\treturn \"\";\r\n}\r\n\r\n\r\n\r\nEnemyPilotUI.prototype.hookPageControls = function(){\r\n\tlet _this = this;\r\n\t_this._container.querySelector(\"#abi_page_right\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage < 19){\r\n\t\t\t_this._currentAbiPage++;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n\r\n}\n\n//# sourceURL=webpack://src/./js/Editor/EnemyPilotUI.js?");

/***/ }),

/***/ "./js/Editor/FaceManager.js":
/*!**********************************!*\
  !*** ./js/Editor/FaceManager.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FaceManager)\n/* harmony export */ });\n/* harmony import */ var _style_faceSelector_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/faceSelector.css */ \"./js/Editor/style/faceSelector.css\");\n/* harmony import */ var _style_faceSelector_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_faceSelector_css__WEBPACK_IMPORTED_MODULE_0__);\n\r\nfunction FaceManager(){\r\n\t\r\n}\r\n\r\nFaceManager.faceSize = 144;\r\nFaceManager.faceScale = 0.5;\r\n\r\nFaceManager.faceFileColumns = 4;\r\nFaceManager.faceFileRows = 2;\r\n\r\nFaceManager.loadFaceByParams = function(faceName, faceIndex, elem) {\r\n\tvar width = Window_Base._faceWidth;\r\n    var height = Window_Base._faceHeight;\r\n\t\r\n\telem.innerHTML = \"\";\r\n\t\r\n\tvar targetBitmap = new Bitmap(width, height);\r\n\t\r\n\tvar bitmap = ImageManager.loadFace(faceName);\t\r\n\tbitmap.addLoadListener(function(){\r\n\t\tvar pw = Window_Base._faceWidth;\r\n\t\tvar ph = Window_Base._faceHeight;\r\n\t\tvar sw = Math.min(width, pw);\r\n\t\tvar sh = Math.min(height, ph);\r\n\t\tvar dx = Math.floor(0 + Math.max(width - pw, 0) / 2);\r\n\t\tvar dy = Math.floor(0 + Math.max(height - ph, 0) / 2);\r\n\t\tvar sx = faceIndex % 4 * pw + (pw - sw) / 2;\r\n\t\tvar sy = Math.floor(faceIndex / 4) * ph + (ph - sh) / 2;   \r\n\t\t\r\n\t\ttargetBitmap.blt(bitmap, sx, sy, sw, sh, dx, dy);\r\n\t\tvar facePicContainer = document.createElement(\"div\");\r\n\t\tfacePicContainer.classList.add(\"face_pic_container\");\r\n\t\tvar facePic = document.createElement(\"img\");\r\n\t\tfacePic.style.width = \"100%\";\r\n\t\tfacePic.setAttribute(\"src\", targetBitmap.canvas.toDataURL());\r\n\t\tfacePicContainer.appendChild(facePic);\t\r\n\t\telem.appendChild(facePicContainer);\t\r\n\t});\r\n}\r\n\r\nFaceManager.showFaceSelector = function(e, faceName, faceIndex, elem){\r\n\te.stopPropagation();\r\n\tconst FILESYSTEM = __webpack_require__(/*! fs */ \"fs\"); \r\n\tlet _this = this;\r\n\t_this.visible = true;\r\n\t_this._searchBuffer = \"\";\r\n\treturn new Promise(function(resolve, reject){\t\r\n\t\tvar path = __webpack_require__(/*! path */ \"path\");\r\n\t\tvar base = getBase();\r\n\t\tconst dir = base+\"img/faces\";\r\n\t\tvar availableFaceFiles = [];\r\n\t\tFILESYSTEM.readdirSync(dir).forEach(function(file) {\t\r\n\t\t\tfile = file.replace(/\\.png$/, \"\");\r\n\t\t\tavailableFaceFiles.push(file);\t\t\r\n\t\t});\t\r\n\t\t\r\n\t\tvar editorContainer = document.querySelector(\"#srw_editor\");\r\n\t\t\r\n\t\tvar container;\r\n\t\tvar containerId = \"face_selector_container\";\r\n\t\tvar container = editorContainer.querySelector(\"#face_selector_container\");\r\n\t\tif(!container){\t\t\r\n\t\t\tcontainer = document.createElement(\"div\");\r\n\t\t\tcontainer.id = \"face_selector_container\";\r\n\t\t\teditorContainer.appendChild(container);\t\r\n\t\t\t\r\n\t\t\tcontainer.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar rect = elem.getBoundingClientRect();\r\n\t\tcontainer.style.top = rect.top + \"px\";\r\n\t\tcontainer.style.left = rect.right + 5 + \"px\";\r\n\t\t\r\n\t\tvar content = \"\";\r\n\t\tcontent+=\"<div class='face_selector'>\";\r\n\t\tcontent+=\"<div class='face_file_list'>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class='selection_pane'>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontainer.innerHTML = content;\r\n\t\tcontainer.style.display = \"\";\r\n\t\t\r\n\t\tvar containerRect = container.getBoundingClientRect();\r\n\t\tif(containerRect.bottom > window.innerHeight){\r\n\t\t\tcontainer.style.top = rect.top - (containerRect.bottom - window.innerHeight + 5) + \"px\";\r\n\t\t}\r\n\t\t\r\n\t\tWindow.innerHeight\r\n\t\t\r\n\t\tfunction updateFaceList(){\r\n\t\t\tvar ctr = 0;\r\n\t\t\tvar content = \"\";\r\n\t\t\tavailableFaceFiles.forEach(function(faceFile){\r\n\t\t\t\tcontent+=\"<div class='entry \"+(faceFile == faceName ? \"selected\" : \"\")+\"' data-facename=\"+faceFile+\">\";\r\n\t\t\t\tcontent+=faceFile;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tctr++;\r\n\t\t\t});\t\r\n\t\t\tcontainer.querySelector(\".face_file_list\").innerHTML = content;\r\n\t\t\tvar selected = container.querySelector(\".face_file_list .entry[data-facename='\"+faceName+\"']\");\r\n\t\t\tif(selected){\r\n\t\t\t\tselected.scrollIntoView(false);\r\n\t\t\t}\r\n\t\t\tvar entries = container.querySelectorAll(\".face_file_list .entry\");\r\n\t\t\tentries.forEach(function(entry){\r\n\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\tfaceName = this.getAttribute(\"data-facename\");\r\n\t\t\t\t\tupdateAll();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateFaceSelector(){\r\n\t\t\tvar ctr = 0;\r\n\t\t\tvar content = \"\";\r\n\t\t\tcontent+=\"<div class='selector_container'>\";\r\n\t\t\t\r\n\t\t\tvar width = FaceManager.faceSize * FaceManager.faceScale + \"px\";\r\n\t\t\tvar height = FaceManager.faceSize * FaceManager.faceScale + \"px\"\r\n\t\t\tfor(var i = 0; i < FaceManager.faceFileRows; i++){\r\n\t\t\t\tfor(var j = 0; j < FaceManager.faceFileColumns; j++){\r\n\t\t\t\t\tvar top = i * FaceManager.faceSize * FaceManager.faceScale - 1 + \"px\";\r\n\t\t\t\t\tvar left = j * FaceManager.faceSize * FaceManager.faceScale - 1 + \"px\";\r\n\t\t\t\t\tvar idx = i * FaceManager.faceFileColumns + j;\r\n\t\t\t\t\tcontent+=\"<div style='width: \"+width+\"; height: \"+height+\"; top: \"+top+\"; left: \"+left+\"' class='selector_square \"+(idx == faceIndex ? \"current\" : \"\")+\"' data-idx='\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t/*content+=\"<div class='controls'>\";\r\n\t\t\tcontent+=\"<div class='label '>Face name:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceName+\"</div>\";\r\n\t\t\tcontent+=\"<div class='label '>Face index:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceIndex+\"</div>\";\r\n\t\t\tcontent+=\"</div>\";*/\r\n\t\t\t\r\n\t\t\tcontainer.querySelector(\".selection_pane\").innerHTML = content;\r\n\t\t\tvar selectorContainer = container.querySelector(\".selection_pane .selector_container\");\r\n\t\t\tselectorContainer.style.width = FaceManager.faceFileColumns * FaceManager.faceSize * FaceManager.faceScale + \"px\";\r\n\t\t\tselectorContainer.style.height = FaceManager.faceFileRows * FaceManager.faceSize * FaceManager.faceScale + \"px\";\r\n\t\t\tselectorContainer.style.backgroundImage = \"url('img/faces/\"+faceName+\".png')\";\t\t\r\n\t\t\tselectorContainer.style.backgroundSize = FaceManager.faceFileColumns * FaceManager.faceSize * FaceManager.faceScale + \"px\";\r\n\t\t\t\r\n\t\t\tvar faceSelectors = container.querySelectorAll(\".selection_pane .selector_square\");\r\n\t\t\tfaceSelectors.forEach(function(faceSelector){\r\n\t\t\t\tfaceSelector.addEventListener(\"click\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tresolveResult({status: \"updated\", faceName: faceName, faceIndex: this.getAttribute(\"data-idx\")});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateAll(){\r\n\t\t\tupdateFaceList();\r\n\t\t\tupdateFaceSelector();\r\n\t\t}\r\n\t\t\r\n\t\tupdateAll();\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif(!FaceManager.hideHandler){\r\n\t\t\tFaceManager.hideHandler = editorContainer.addEventListener(\"click\", function(){\r\n\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t_this.visible = false;\r\n\t\t\t\tresolveResult({status: \"cancelled\"});\r\n\t\t\t});\r\n\t\t\r\n\t\t\t//hacky, solution to hide element if the container holding the parent element is scrolled\r\n\t\t\tif(document.querySelector(\".text_scroll_default\")){\r\n\t\t\t\tdocument.querySelector(\".text_scroll_default\").addEventListener(\"scroll\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\t_this.visible = false;\r\n\t\t\t\t\tresolveResult({status: \"cancelled\"});\r\n\t\t\t\t});\t\r\n\t\t\t}\t\t\t\r\n\t\t}\t\r\n\t\t\r\n\t\tfunction handleKeySearch(e){\r\n\t\t\t_this._searchBuffer+=String.fromCharCode(e.which);\r\n\t\t\tvar entries = container.querySelectorAll(\".face_file_list .entry\");\r\n\t\t\tlet targetEntry;\r\n\t\t\tlet ctr = 0;\r\n\t\t\twhile(ctr < entries.length && !targetEntry){\r\n\t\t\t\tlet entry = entries[ctr];\t\t\t\t\r\n\t\t\t\tlet name = entry.getAttribute(\"data-facename\");\r\n\t\t\t\tif(name.toLowerCase().indexOf(_this._searchBuffer.toLowerCase()) == 0){\r\n\t\t\t\t\ttargetEntry = entry;\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\tctr++;\r\n\t\t\t}\t\t\t\t\r\n\t\t\tif(targetEntry){\r\n\t\t\t\t//targetEntry.scrollIntoView();\r\n\t\t\t\tfaceName = targetEntry.getAttribute(\"data-facename\");\r\n\t\t\t\tupdateAll();\r\n\t\t\t}\r\n\t\t\tif(_this._searchInterval){\r\n\t\t\t\tclearInterval(_this._searchInterval);\r\n\t\t\t}\r\n\t\t\t_this._searchInterval = setInterval(function(){\r\n\t\t\t\t_this._searchBuffer = \"\";\r\n\t\t\t\tclearInterval(_this._searchInterval);\r\n\t\t\t}, 1500);\r\n\t\t}\r\n\t\r\n\t\tdocument.addEventListener(\"keydown\", handleKeySearch);\r\n\t\t\r\n\t\t\r\n\t\tfunction resolveResult(result){\t\t\r\n\t\t\tdocument.removeEventListener(\"keydown\", handleKeySearch);\t\t\t\r\n\t\t\tresolve(result);\r\n\t\t}\r\n\t});\r\n}\n\n//# sourceURL=webpack://src/./js/Editor/FaceManager.js?");

/***/ }),

/***/ "./js/Editor/MapAttackUI.js":
/*!**********************************!*\
  !*** ./js/Editor/MapAttackUI.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MapAttackUI)\n/* harmony export */ });\n/* harmony import */ var _EditorUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditorUI.js */ \"./js/Editor/EditorUI.js\");\n/* harmony import */ var _FaceManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FaceManager.js */ \"./js/Editor/FaceManager.js\");\n\r\n\r\n\r\nfunction MapAttackUI(editorContainer, managedMapAttack, mainUIHandler, callbacks){\r\n\t_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, mainUIHandler);\r\n\tthis._dataFile = \"data/MapAttacks.json\";\r\n\tthis._callbacks = callbacks;\r\n\tthis._editorContainer = editorContainer;\r\n\tthis._managedMapAttack = managedMapAttack;\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.id=\"map_attack_ui\";\r\n\tdiv.classList.add(\"overlay_container\");\r\n\teditorContainer.appendChild(div);\t\r\n\t\r\n\tthis._currentEntry;\r\n\tthis._currentShapeLookup = {};\r\n\tthis._currentRetargetShapeLookup = {};\r\n\tthis._currentPreviewDirection = \"right\";\r\n\tthis._container = div;\r\n\tthis._editSecondary = false;\r\n\tthis._chooseCenter = false;\r\n}\r\n\r\nMapAttackUI.prototype = Object.create(_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nMapAttackUI.prototype.constructor = MapAttackUI;\r\n\r\nMapAttackUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\tvar containerNode = _this._container;\r\n}\r\n\r\nMapAttackUI.prototype.parseData = function(){\r\n\tlet _this = this;\r\n\t\r\n}\r\n\r\nMapAttackUI.prototype.packData = function(){\r\n\tlet _this = this;\r\n\tvar outData = JSON.parse(JSON.stringify(_this._data));\r\n\treturn JSON.stringify(outData);\r\n}\r\n\r\nMapAttackUI.prototype.show = async function(){\r\n\tlet _this = this;\r\n\t_this.loadData();\r\n\t\r\n\tvar currentScroll;\r\n\tvar scrollContainer = _this._container.querySelector(\".scroll\");\r\n\tif(scrollContainer){\r\n\t\tcurrentScroll = scrollContainer.scrollTop;\r\n\t}\r\n\t\r\n\tlet content = \"\";\r\n\t\r\n\tif(!_this._currentEntry){\r\n\t\r\n\t\tif(!_this._data[_this._managedMapAttack]){\r\n\t\t\t_this._managedMapAttack = null\r\n\t\t}\r\n\t\tif(_this._managedMapAttack == null){\r\n\t\t\t_this._currentEntry = {\r\n\t\t\t\tname: \"New Map Attack\",\r\n\t\t\t\tshape: [],\r\n\t\t\t\t\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\t_this._currentEntry = _this._data[_this._managedMapAttack];\r\n\t\t}\r\n\t\tif(!_this._currentEntry.animInfo){\r\n\t\t\t_this._currentEntry.animInfo = {\r\n\t\t\t\tanimId: 0,\r\n\t\t\t\toffset: {\r\n\t\t\t\t\tup: {x: 0, y: 0},\r\n\t\t\t\t\tdown: {x: 0, y: 0},\r\n\t\t\t\t\tleft: {x: 0, y: 0},\r\n\t\t\t\t\tright: {x: 0, y: 0},\r\n\t\t\t\t},\r\n\t\t\t\tscale: 1\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif(!_this._currentEntry.animInfo.offset.up){\r\n\t\t\t_this._currentEntry.animInfo.offset.up = {x: 0, y: 0};\r\n\t\t}\r\n\t\tif(!_this._currentEntry.animInfo.offset.down){\r\n\t\t\t_this._currentEntry.animInfo.offset.down = {x: 0, y: 0};\r\n\t\t}\r\n\t\tif(!_this._currentEntry.animInfo.offset.left){\r\n\t\t\t_this._currentEntry.animInfo.offset.left = {x: 0, y: 0};\r\n\t\t}\r\n\t\tif(!_this._currentEntry.animInfo.offset.right){\r\n\t\t\t_this._currentEntry.animInfo.offset.right = {x: 0, y: 0};\r\n\t\t}\r\n\t\t\r\n\t\tif(!_this._currentEntry.textInfo){\r\n\t\t\t_this._currentEntry.textInfo = {\r\n\t\t\t\tfaceName: null,\r\n\t\t\t\tfaceIdx: null,\r\n\t\t\t\ttext: \"\"\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif(!_this._currentEntry.retargetInfo){\r\n\t\t\t_this._currentEntry.retargetInfo = {\r\n\t\t\t\tshape: [],\r\n\t\t\t\tcenter: {x: 0, y: 0},\r\n\t\t\t\tinitialPosition: {x: 0, y: 0},\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t}\r\n\t_this.unpackShape();\r\n\t_this.unpackRetargetShape();\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='content_container map'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tif(_this._managedMapAttack == null){\r\n\t\tcontent+=_this._currentEntry.name;\r\n\t} else {\r\n\t\tcontent+=EDITORSTRINGS.WEAPON.label_map_attack+\" #\"+String(_this._managedMapAttack).padStart(3,0)+\" \"+_this._currentEntry.name;\r\n\t}\r\n\t\r\n\tcontent+=\"<img id='close_map_changes' class='remove_button' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\tcontent+=\"</div>\";\r\n\t//content+=\"<div class='scroll'>\";\r\n\t\r\n\tcontent+=\"<div class='panes'>\";\r\n\t\r\n\tcontent+=\"<div class='pane left'>\";\r\n\t\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.GENERAL.label_name;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<input value='\"+_this._currentEntry.name+\"' id='map_att_name'></input>\"\t\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section animation'>\";\r\n\tcontent+=\"<div class='target_control title'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_animation;\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_id;\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<select id='map_att_anim'>\";\r\n\tcontent+=\"<option title='None' value=''>None</option>\";\r\n\tfor(var i = 1; i < $dataAnimations.length; i++){\r\n\t\tcontent+=\"<option \"+(i == _this._currentEntry.animInfo.animId ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+(String(i).padStart(3, 0))+\" \"+$dataAnimations[i].name+\"</option>\";\t\t\t\t\t\t\t\r\n\t}\t\r\n\tcontent+=\"</select>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_scale;\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<input value='\"+_this._currentEntry.animInfo.scale+\"' id='map_att_anim_scale'></input>\"\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_offsets;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tfunction createOffsetRow(direction, name){\r\n\t\tvar content = \"\";\r\n\t\tcontent+=\"<div class='target_control'>\";\r\n\t\tcontent+=\"<div class='label'>\";\r\n\t\tcontent+=name;\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class=''>\";\r\n\t\tcontent+=\"x:\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<input value='\"+_this._currentEntry.animInfo.offset[direction].x+\"' class='map_att_offset' data-direction='\"+direction+\"' data-prop='x'></input>\"\t\r\n\t\tcontent+=\"<div class=''>\";\r\n\t\tcontent+=\"px\";\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class='' style='margin-left: 5px;'>\";\r\n\t\tcontent+=\"y:\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<input value='\"+_this._currentEntry.animInfo.offset[direction].y+\"' class='map_att_offset' data-direction='\"+direction+\"' data-prop='y'></input>\"\r\n\t\tcontent+=\"<div class=''>\";\r\n\t\tcontent+=\"px\";\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tcontent+=createOffsetRow(\"up\", EDITORSTRINGS.WEAPON.label_up);\r\n\tcontent+=createOffsetRow(\"down\", EDITORSTRINGS.WEAPON.label_down);\r\n\tcontent+=createOffsetRow(\"left\", EDITORSTRINGS.WEAPON.label_left);\r\n\tcontent+=createOffsetRow(\"right\", EDITORSTRINGS.WEAPON.label_right);\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section animation'>\";\r\n\tcontent+=\"<div class='target_control title'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_text_box;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='portrait_preview unit_img_preview'></div>\";\r\n\tcontent+=\"<textarea id='map_att_text'>\"+_this._currentEntry.textInfo.text+\"</textarea>\"\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='pane right'>\";\r\n\t\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='label secondary'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_edit_secondary_pattern;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<input type=checkbox \"+(_this._editSecondary ? \"checked\" : \"\")+\" id='edit_secondary'></input>\"\t\r\n\t\r\n\tcontent+=\"<button id='map_choose_retarget_center'>\"+EDITORSTRINGS.WEAPON.label_choose_center+\"</button>\";\r\n\tif(_this._chooseCenter){\t\t\r\n\t\tcontent+=EDITORSTRINGS.WEAPON.hint_choose_center;\t\r\n\t}\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='target_control'>\";\r\n\tcontent+=\"<div class='label'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_lock_rotation;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<input type=checkbox \"+(_this._currentEntry.lockRotation ? \"checked\" : \"\")+\" id='lock_att_rotation'></input>\"\t\r\n\tcontent+=\"<div class='direction_control_container \"+(_this._currentEntry.lockRotation ? \"locked\" : \"\")+\"'>\";\t\r\n\tcontent+=\"<img class='eyecon' src='\"+_this._svgPath+\"/eye-line.svg'>\";\r\n\t\r\n\tcontent+=\"<img data-direction='up' class='dir_select up \"+(_this._currentPreviewDirection == \"up\" ? \"selected\" : \"\")+\"' src='\"+_this._svgPath+\"/chevron_right.svg'>\";\r\n\tcontent+=\"<img data-direction='down' class='dir_select down \"+(_this._currentPreviewDirection == \"down\" ? \"selected\" : \"\")+\"' src='\"+_this._svgPath+\"/chevron_right.svg'>\";\r\n\tcontent+=\"<img data-direction='left' class='dir_select left \"+(_this._currentPreviewDirection == \"left\" ? \"selected\" : \"\")+\"' src='\"+_this._svgPath+\"/chevron_right.svg'>\";\t\r\n\tcontent+=\"<img data-direction='right' class='dir_select right \"+(_this._currentPreviewDirection == \"right\" ? \"selected\" : \"\")+\"' src='\"+_this._svgPath+\"/chevron_right.svg'>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t//content+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tvar previewRows = 31;\r\n\tvar previewColumns = 31;\r\n\t\r\n\tvar centerX = 15;\r\n\tvar centerY = 15;\r\n\t\r\n\tcontent+=\"<div class='map_edit_pane_container'>\";\r\n\tcontent+=\"<div id='main_shape' class='map_edit_pane'>\";\r\n\tfor(var row = 0; row < previewRows; row++){\r\n\t\tcontent+=\"<div class='row'>\";\r\n\t\tfor(var column = 0; column < previewColumns; column++){\r\n\t\t\tvar x = row - centerX;\r\n\t\t\tvar y = column - centerY;\r\n\t\t\t\r\n\t\t\tif(!_this._currentEntry.lockRotation){\r\n\t\t\t\tif(_this._currentPreviewDirection == \"left\"){\r\n\t\t\t\t\ty*=-1;\r\n\t\t\t\t} else if(_this._currentPreviewDirection == \"up\"){\r\n\t\t\t\t\tvar tmp = x;\r\n\t\t\t\t\tx = y;\r\n\t\t\t\t\ty = tmp;\r\n\t\t\t\t\ty*=-1;\t\r\n\t\t\t\t} else if(_this._currentPreviewDirection == \"down\"){\r\n\t\t\t\t\tvar tmp = x;\r\n\t\t\t\t\tx = y;\r\n\t\t\t\t\ty = tmp;\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t\t\r\n\t\t\tvar classString = \"block \";\r\n\t\t\tif(_this._currentShapeLookup[y] && _this._currentShapeLookup[y][x]){\r\n\t\t\t\tclassString+=\"selected \";\r\n\t\t\t}\r\n\t\t\tif(x == 0 && y == 0){\r\n\t\t\t\tclassString+=\"center \";\r\n\t\t\t}\r\n\t\t\tcontent+=\"<div data-row='\"+(x)+\"' data-column='\"+(y)+\"' class='\"+classString+\"'>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\r\n\t\tcontent+=\"</div>\";\r\n\t}\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div id='sub_shape' class='map_edit_pane map_retarget_edit_pane \"+(_this._editSecondary ? \"active\" : \"\")+\"'>\";\r\n\tfor(var row = 0; row < previewRows; row++){\r\n\t\tcontent+=\"<div class='row'>\";\r\n\t\tfor(var column = 0; column < previewColumns; column++){\r\n\t\t\tvar x = row - centerX;\r\n\t\t\tvar y = column - centerY;\r\n\t\t\t\r\n\t\t\tif(!_this._currentEntry.lockRotation){\r\n\t\t\t\tif(_this._currentPreviewDirection == \"left\"){\r\n\t\t\t\t\ty*=-1;\r\n\t\t\t\t} else if(_this._currentPreviewDirection == \"up\"){\r\n\t\t\t\t\tvar tmp = x;\r\n\t\t\t\t\tx = y;\r\n\t\t\t\t\ty = tmp;\r\n\t\t\t\t\ty*=-1;\t\r\n\t\t\t\t} else if(_this._currentPreviewDirection == \"down\"){\r\n\t\t\t\t\tvar tmp = x;\r\n\t\t\t\t\tx = y;\r\n\t\t\t\t\ty = tmp;\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t\t\r\n\t\t\tvar classString = \"block \";\r\n\t\t\tif(_this._currentRetargetShapeLookup[y] && _this._currentRetargetShapeLookup[y][x]){\r\n\t\t\t\tclassString+=\"selected \";\r\n\t\t\t}\r\n\t\t\tif(y == _this._currentEntry.retargetInfo.center.x && x == _this._currentEntry.retargetInfo.center.y){\r\n\t\t\t\tclassString+=\"center \";\r\n\t\t\t}\r\n\t\t\tcontent+=\"<div data-row='\"+(x)+\"' data-column='\"+(y)+\"' class='\"+classString+\"'>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\r\n\t\tcontent+=\"</div>\";\r\n\t}\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button id='apply_map_changes'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\r\n\tif(_this._managedMapAttack != null){\r\n\t\tcontent+=\"<button id='delete_map_att'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\r\n\t}\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\tthis._container.innerHTML = content;\r\n\tvar scrollContainer = _this._container.querySelector(\".scroll\");\r\n\tif(scrollContainer){\r\n\t\tscrollContainer.scrollTop = currentScroll;\r\n\t}\r\n\t\r\n\t\r\n\tthis.hook();\r\n\t\r\n}\r\n\r\nMapAttackUI.prototype.unpackShape = function(){\r\n\tvar _this = this;\r\n\tvar shape = this._currentEntry.shape || [];\r\n\tthis._currentShapeLookup = {};\r\n\tshape.forEach(function(entry){\r\n\t\tif(!_this._currentShapeLookup[entry[0]]){\r\n\t\t\t_this._currentShapeLookup[entry[0]] = {};\r\n\t\t}\r\n\t\t_this._currentShapeLookup[entry[0]][entry[1]] = true;\r\n\t});\r\n}\r\n\r\nMapAttackUI.prototype.packShape = function(){\r\n\tvar _this = this;\r\n\tvar tmp = [];\r\n\tObject.keys(_this._currentShapeLookup).forEach(function(x){\r\n\t\tObject.keys(_this._currentShapeLookup[x]).forEach(function(y){\r\n\t\t\ttmp.push([x * 1, y * 1]);\r\n\t\t});\r\n\t});\r\n\t\r\n\tthis._currentEntry.shape = tmp;\r\n}\r\n\r\nMapAttackUI.prototype.unpackRetargetShape = function(){\r\n\tvar _this = this;\r\n\tvar shape = this._currentEntry.retargetInfo.shape || [];\r\n\tthis._currentRetargetShapeLookup = {};\r\n\tshape.forEach(function(entry){\r\n\t\tif(!_this._currentRetargetShapeLookup[entry[0]]){\r\n\t\t\t_this._currentRetargetShapeLookup[entry[0]] = {};\r\n\t\t}\r\n\t\t_this._currentRetargetShapeLookup[entry[0]][entry[1]] = true;\r\n\t});\r\n}\r\n\r\nMapAttackUI.prototype.packRetargetShape = function(){\r\n\tvar _this = this;\r\n\tvar tmp = [];\r\n\tObject.keys(_this._currentRetargetShapeLookup).forEach(function(x){\r\n\t\tObject.keys(_this._currentRetargetShapeLookup[x]).forEach(function(y){\r\n\t\t\ttmp.push([x * 1, y * 1]);\r\n\t\t});\r\n\t});\r\n\t\r\n\tthis._currentEntry.retargetInfo.shape = tmp;\r\n}\r\n\r\nMapAttackUI.prototype.hook = function(){\r\n\tlet _this = this;\r\n\tthis._container.querySelector(\"#close_map_changes\").addEventListener(\"click\", function(){\r\n\t\t_this._editorContainer.removeChild(_this._container);\r\n\t});\t\r\n\t\r\n\tthis._container.querySelector(\"#apply_map_changes\").addEventListener(\"click\", async function(){\r\n\t\tvar id;\r\n\t\tif(_this._managedMapAttack == null){\t\t\t\r\n\t\t\tvar defs = _this._data;\r\n\t\t\tvar ctr = 0;\r\n\t\t\twhile(id == null && ctr < _this._data.length){\r\n\t\t\t\tif(!_this._data[ctr]){\r\n\t\t\t\t\tid = ctr;\r\n\t\t\t\t}\r\n\t\t\t\tctr++;\r\n\t\t\t}\t\r\n\t\t\tif(id == null){\r\n\t\t\t\tid = _this._data.length;\r\n\t\t\t}\r\n\t\t\t_this._data[id] = _this._currentEntry;\r\n\t\t}\r\n\t\t_this.save();\r\n\t\t$mapAttackManager.load();\r\n\t\tawait $mapAttackManager.isLoaded();\r\n\t\tif(id != null && _this._callbacks.new){\r\n\t\t\t_this._callbacks.new(id);\r\n\t\t} else if(_this._callbacks.updated){\r\n\t\t\t_this._callbacks.updated();\r\n\t\t} else {\r\n\t\t\t_this._editorContainer.removeChild(_this._container);\r\n\t\t}\t\t\r\n\t});\t\r\n\t\r\n\tif(_this._managedMapAttack != null){\r\n\t\tthis._container.querySelector(\"#delete_map_att\").addEventListener(\"click\", async function(){\r\n\t\t\tvar c = confirm(EDITORSTRINGS.WEAPON.confirm_remove_MAP);\r\n\t\t\tif(c){\r\n\t\t\t\t_this._data.splice(_this._managedMapAttack, 1);\r\n\t\t\t\t_this.save();\r\n\t\t\t\t$mapAttackManager.load();\r\n\t\t\t\tawait $mapAttackManager.isLoaded();\r\n\t\t\t\tif(_this._callbacks.deleted){\r\n\t\t\t\t\t_this._callbacks.deleted();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tthis._container.querySelector(\"#map_att_name\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEntry.name = this.value;\r\n\t});\t\r\n\t\r\n\tthis._container.querySelector(\"#lock_att_rotation\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEntry.lockRotation = this.checked;\r\n\t\t_this.show();\r\n\t});\t\r\n\t\r\n\tthis._container.querySelector(\"#edit_secondary\").addEventListener(\"change\", function(){\r\n\t\t_this._editSecondary = this.checked;\r\n\t\tif(!_this._editSecondary){\r\n\t\t\t_this._chooseCenter = false;\r\n\t\t}\r\n\t\t_this.show();\r\n\t});\t\t\r\n\t\r\n\tthis._container.querySelector(\"#map_choose_retarget_center\").addEventListener(\"click\", function(){\r\n\t\t_this._editSecondary = true;\r\n\t\t_this._chooseCenter = !_this._chooseCenter;\r\n\t\t_this.show();\r\n\t});\t\r\n\t\r\n\t\r\n\t\r\n\tthis._container.querySelector(\"#map_att_anim\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEntry.animInfo.animId = this.value * 1;\r\n\t});\t\r\n\t\r\n\tthis._container.querySelector(\"#map_att_anim_scale\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEntry.animInfo.scale = this.value;\r\n\t});\t\r\n\tvar controls = this._container.querySelectorAll(\".dir_select\");\r\n\tcontrols.forEach(function(control){\r\n\t\tcontrol.addEventListener(\"click\", function(){\r\n\t\t\t_this._currentPreviewDirection = this.getAttribute(\"data-direction\");\r\n\t\t\t_this.show();\r\n\t\t});\r\n\t});\t\r\n\t\r\n\tvar controls = this._container.querySelectorAll(\".map_att_offset\");\r\n\tcontrols.forEach(function(control){\r\n\t\tcontrol.addEventListener(\"change\", function(){\r\n\t\t\tif(isNaN(this.value)){\r\n\t\t\t\tthis.value = 0;\r\n\t\t\t} else {\r\n\t\t\t\tvar direction = this.getAttribute(\"data-direction\");\r\n\t\t\t\tvar prop = this.getAttribute(\"data-prop\");\r\n\t\t\t\t_this._currentEntry.animInfo.offset[direction][prop] = this.value * 1;\r\n\t\t\t}\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar controls = this._container.querySelectorAll(\"#main_shape .block\");\r\n\tcontrols.forEach(function(control){\r\n\t\tcontrol.addEventListener(\"click\", function(){\r\n\t\t\tvar column = this.getAttribute(\"data-column\") * 1;\r\n\t\t\tvar row = this.getAttribute(\"data-row\") * 1;\r\n\t\t\tif(row != 0 || column != 0){\r\n\t\t\t\tif(_this._currentShapeLookup[column] && _this._currentShapeLookup[column][row]){\r\n\t\t\t\t\tdelete _this._currentShapeLookup[column][row];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(!_this._currentShapeLookup[column]){\r\n\t\t\t\t\t\t_this._currentShapeLookup[column] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this._currentShapeLookup[column][row] = true;\r\n\t\t\t\t}\r\n\t\t\t\t_this.packShape();\r\n\t\t\t\t_this.show();\r\n\t\t\t}\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar controls = this._container.querySelectorAll(\"#sub_shape .block\");\r\n\tcontrols.forEach(function(control){\r\n\t\tcontrol.addEventListener(\"click\", function(){\r\n\t\t\tvar column = this.getAttribute(\"data-column\") * 1;\r\n\t\t\tvar row = this.getAttribute(\"data-row\") * 1;\r\n\t\t\t\r\n\t\t\tif(_this._chooseCenter){\r\n\t\t\t\t_this._currentEntry.retargetInfo.center = {x: column, y: row};\r\n\t\t\t\t_this._currentEntry.retargetInfo.initialPosition = {x: column, y: row};\r\n\t\t\t\t_this._chooseCenter = false;\r\n\t\t\t} else {\r\n\t\t\t\tif(_this._currentRetargetShapeLookup[column] && _this._currentRetargetShapeLookup[column][row]){\r\n\t\t\t\t\tdelete _this._currentRetargetShapeLookup[column][row];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(!_this._currentRetargetShapeLookup[column]){\r\n\t\t\t\t\t\t_this._currentRetargetShapeLookup[column] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this._currentRetargetShapeLookup[column][row] = true;\r\n\t\t\t\t}\r\n\t\t\t\t_this.packRetargetShape();\t\t\t\t\t\r\n\t\t\t}\t\t\r\n\t\t\t_this.show();\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\tvar divs = this._container.querySelectorAll(\".portrait_preview\");\r\n\tdivs.forEach(function(div){\r\n\t\t_FaceManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loadFaceByParams(_this._currentEntry.textInfo.faceName, _this._currentEntry.textInfo.faceIdx, div);\t\t\r\n\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\tvar elem = this;\r\n\t\t\tlet result = await _FaceManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].showFaceSelector(e, _this._currentEntry.textInfo.faceName, _this._currentEntry.textInfo.faceIdx, this);\r\n\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t_this._currentEntry.textInfo.faceName = result.faceName;\r\n\t\t\t\t_this._currentEntry.textInfo.faceIdx = result.faceIndex;\r\n\t\t\t\t_this.show();\r\n\t\t\t}\r\n\t\t});\t\r\n\t});\r\n\tthis._container.querySelector(\"#map_att_text\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEntry.textInfo.text = this.value;\r\n\t});\t\t\r\n}\r\n\n\n//# sourceURL=webpack://src/./js/Editor/MapAttackUI.js?");

/***/ }),

/***/ "./js/Editor/MechUI.js":
/*!*****************************!*\
  !*** ./js/Editor/MechUI.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MechUI)\n/* harmony export */ });\n/* harmony import */ var _EditorUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditorUI.js */ \"./js/Editor/EditorUI.js\");\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n/* harmony import */ var _MenuSpriteManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MenuSpriteManager */ \"./js/Editor/MenuSpriteManager.js\");\n/* harmony import */ var _BasicBattleSpriteManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BasicBattleSpriteManager */ \"./js/Editor/BasicBattleSpriteManager.js\");\n/* harmony import */ var _OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OverworldSpriteManager */ \"./js/Editor/OverworldSpriteManager.js\");\n/* harmony import */ var _DeployActionUI__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DeployActionUI */ \"./js/Editor/DeployActionUI.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction MechUI(container, mainUIHandler){\r\n\t_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, container, mainUIHandler);\r\n\tthis._dataFile = \"data/Mechs.json\";\r\n\tthis._vanillaFile = \"data/Classes.json\";\r\n\tthis._gameVar = \"$dataClasses\";\r\n\t\r\n\tthis._currentAbiPage = 0;\r\n\tthis._abiPageSize = 10;\r\n\t\r\n\tthis._currentRelPage = 0;\r\n\tthis._relPageSize = 10;\r\n}\r\n\r\nMechUI.prototype = Object.create(_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nMechUI.prototype.constructor = MechUI;\r\n\r\nMechUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\tvar containerNode = _this._container;\r\n\t_this._propertyHandlers = {\r\n\t\tmenu_sprite: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div>\";\r\n\t\t\t\tcontent+=\"<div class='menu_preview unit_img_preview'></div>\";\r\n\t\t\t\tif(!_this.getMetaValue(\"mechMenuSprite\")){\r\n\t\t\t\t\tcontent+=\"<div class='menu_preview_warning' title='\"+EDITORSTRINGS.MECH.hint_fallback+\"'>\"+EDITORSTRINGS.MECH.label_warn_fallback+\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tfunction updatePortraitPreviews(){\r\n\t\t\t\tvar divs = containerNode.querySelectorAll(\".menu_preview\");\r\n\t\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\t\tvar menuPath;\r\n\t\t\t\t\t\tvar menuSprite = _this.getMetaValue(\"mechMenuSprite\");\r\n\t\t\t\t\t\tif(menuSprite){\r\n\t\t\t\t\t\t\tmenuPath = \"img/menu/\"+menuSprite+\".png\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmenuPath = \"img/SRWBattleScene/\"+_this.getMetaValue(\"mechBattleSceneSprite\")+\"/main.png\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdiv.innerHTML = \"<img src='\"+menuPath+\"'/>\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tupdatePortraitPreviews();\r\n\t\t\t\t\r\n\t\t\t\tvar divs = containerNode.querySelectorAll(\".menu_preview\");\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\t\tlet result = await _MenuSpriteManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].showSelector(e, _this.getMetaValue(\"mechMenuSprite\"), this);\r\n\t\t\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\t\t\t_this.setMetaValue(\"mechMenuSprite\", result.path)\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.isModified();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.GENERAL.label_name;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='prop_name' value='\"+entry.name+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.GENERAL.label_editor_tag;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='editor_tag' value='\"+_this.getMetaValue(\"editorTag\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_stats_label;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='stats_name' value='\"+_this.getMetaValue(\"mechStatsLabel\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_name\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tentry.name = this.value;\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#editor_tag\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"editorTag\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t\tcontainerNode.querySelector(\"#stats_name\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechStatsLabel\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_ship: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_is_ship;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='is_ship' type=checkbox \"+(_this.getMetaValue(\"mechIsShip\")*1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#is_ship\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechIsShip\", this.checked ? 1 : 0);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tinherits: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_sync_parts;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"sync_parts_with\", \"\", _this.getMetaValue(\"mechInheritsPartsFrom\"));\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_sync_equips;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"sync_equipables_with\", \"\", _this.getMetaValue(\"mechInheritsEquipablesFrom\"));\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_sync_upgrades;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"sync_upgrades_with\", \"\", _this.getMetaValue(\"mechInheritsUpgradesFrom\"));\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_fub_transform;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"fub_transform\", \"\", _this.getMetaValue(\"mechFUBTransform\"));\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#sync_parts_with\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechInheritsPartsFrom\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#sync_equipables_with\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechInheritsEquipablesFrom\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#sync_upgrades_with\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechInheritsUpgradesFrom\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#fub_transform\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechFUBTransform\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//species: handleDefaultProp(\"pilotSpecies\", \"Species\"),\r\n\t\tterrain: {\r\n\t\t\tcreateControls(){\r\n\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_enabled;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<div class='terrain_container'>\";\r\n\t\t\t\tfor(var i = 0; i < terrains.length; i++){\r\n\t\t\t\t\tcontent+=\"<div class='column'>\";\r\n\t\t\t\t\tcontent+=\"<div class='entry terrain_header'>\";\r\n\t\t\t\t\tcontent+=terrains[i].type;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(terrains[i].prop);\r\n\t\t\t\t\tif($terrainTypeManager.getTerrainDefinition(i+1).moveCostMod > 1){\r\n\t\t\t\t\t\tcontent+=\"<div >\";\r\n\t\t\t\t\t\t//content+=\"<input data-terrainidx='\"+i+\"' class='terrain_enabled_select' type=checkbox \"+(value >= 1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\t\t\tcontent+=\"<select data-terrainidx='\"+i+\"' class='terrain_enabled_select'>\";\r\n\t\t\t\t\t\tvar options = [\r\n\t\t\t\t\t\t\tEDITORSTRINGS.GENERAL.label_no,\r\n\t\t\t\t\t\t\tEDITORSTRINGS.MECH.label_move_penalty,\r\n\t\t\t\t\t\t\tEDITORSTRINGS.GENERAL.label_yes\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tfor(var j = 0; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(j == value ? \"selected\" : \"\")+\" value='\"+j+\"'>\"+options[j]+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontent+=\"<div >\";\r\n\t\t\t\t\t\tcontent+=\"<input data-terrainidx='\"+i+\"' class='terrain_enabled' type=checkbox \"+(value >= 1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createTerrainControls(\"mechTerrain\", EDITORSTRINGS.MECH.label_terrain_rank);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t/*content+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_can_hover;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='can_hover' type=checkbox \"+(_this.getMetaValue(\"mechHoverEnabled\")*1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";*/\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tlet entries = containerNode.querySelectorAll(\".terrain_container .entry\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar parts = _this.getMetaValue(\"mechTerrain\").split(\"\");\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-scoreidx\");\r\n\t\t\t\t\t\tvar score = this.getAttribute(\"data-score\");\r\n\t\t\t\t\t\tparts[idx] = score;\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechTerrain\", parts.join(\"\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".terrain_enabled\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\t_this.setMetaValue(terrains[this.getAttribute(\"data-terrainidx\")].prop, this.checked ? 1 : 0);\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\".terrain_enabled_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(terrains[this.getAttribute(\"data-terrainidx\")].prop, this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t/*containerNode.querySelector(\"#can_hover\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechHoverEnabled\", this.checked ? 1 : 0);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});*/\r\n\t\t\t}\r\n\t\t},\r\n\t\texp_yield: handleDefaultProp(\"mechExpYield\",  EDITORSTRINGS.MECH.label_exp_yield),\r\n\t\tpp_yield: handleDefaultProp(\"mechPPYield\",  EDITORSTRINGS.MECH.label_pp_yield),\r\n\t\tfund_yield: handleDefaultProp(\"mechFundYield\",  EDITORSTRINGS.MECH.label_fund_yield),\r\n\t\ttags: handleDefaultProp(\"mechTags\",  EDITORSTRINGS.MECH.label_tags),\r\n\t\tattribute1: handleDefaultProp(\"mechAttribute1\",  EDITORSTRINGS.MECH.label_attribute1),\r\n\t\tattribute2: handleDefaultProp(\"mechAttribute2\",  EDITORSTRINGS.MECH.label_attribute2),\r\n\t\tcarryingCapacity: handleDefaultProp(\"mechCarryingCapacity\",  EDITORSTRINGS.MECH.label_carrying_capacity),\r\n\t\tfub: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $mechAbilityManager.getDefinitions()\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tvar id = _this.getMetaValue(\"mechFullUpgradeAbility\");\r\n\t\t\t\tif(id == \"\"){\r\n\t\t\t\t\tid = -1;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.title_FUB+\"' class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_FUB;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='fub_select'>\";\r\n\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#fub_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechFullUpgradeAbility\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\titem_slots: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tvar count = _this.getMetaValue(\"mechItemSlots\");\r\n\t\t\t\tif(count == \"\"){\r\n\t\t\t\t\tcount = 0;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_item_slots;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='item_slot_select'>\";\r\n\t\t\t\tfor(var i = 0; i < 5; i++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(i == count ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+i+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#item_slot_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechItemSlots\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tstats: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tfunction createGrowthControls(growthTypeProp, growthAmountProp){\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_cost_type;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(growthTypeProp);\r\n\t\t\t\t\tvar growthTypes;\r\n\t\t\t\t\tif(growthTypeProp == \"mechUpgradeWeaponCost\"){\r\n\t\t\t\t\t\tgrowthTypes = ENGINE_SETTINGS.COST_TYPES.WEAPON;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgrowthTypes = ENGINE_SETTINGS.COST_TYPES.NORMAL;\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tcontent+=\"<select id='prop_\"+growthTypeProp+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option  value=''></option>\";\r\n\t\t\t\t\tObject.keys(growthTypes).forEach(function(type){\r\n\t\t\t\t\t\tcontent+=\"<option \"+(type == value ? \"selected\" : \"\")+\" value='\"+type+\"'>\"+type+\"</option>\";\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tvar typeSummary = [];\r\n\t\t\t\t\tvar typeData = growthTypes[value];\r\n\t\t\t\t\tif(typeData){\r\n\t\t\t\t\t\tfor(var i = 0; i < typeData.length; i++){\r\n\t\t\t\t\t\t\ttypeSummary.push(\"Level \"+(i+1)+\": \"+typeData[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontent+=\"<img title='\"+(typeSummary.join(\"\\n\"))+\"' class='view_type_costs_icon' img src='\"+_this._svgPath+\"eye-line.svg'>\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(growthAmountProp){\r\n\t\t\t\t\t\tvar defaults = {\r\n\t\t\t\t\t\t\tmechUpgradeHPAmount: 350,\r\n\t\t\t\t\t\t\tmechUpgradeENAmount: 10,\r\n\t\t\t\t\t\t\tmechUpgradeArmorAmount: 60,\r\n\t\t\t\t\t\t\tmechUpgradeMobilityAmount: 5,\r\n\t\t\t\t\t\t\tmechUpgradAccuracyAmount: 6\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_upgrade_amount;\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\tcontent+=\"<input id='prop_\"+growthAmountProp+\"' value='\"+(_this.getMetaValue(growthAmountProp) || defaults[growthAmountProp])+\"'></input>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='cell'>\";\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechHP\", EDITORSTRINGS.MECH.label_HP);\r\n\t\t\t\tcontent+=createGrowthControls(\"mechUpgradeHPCost\", \"mechUpgradeHPAmount\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechEN\", EDITORSTRINGS.MECH.label_EN);\r\n\t\t\t\tcontent+=createGrowthControls(\"mechUpgradeENCost\", \"mechUpgradeENAmount\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechArmor\", EDITORSTRINGS.MECH.label_armor);\r\n\t\t\t\tcontent+=createGrowthControls(\"mechUpgradeArmorCost\", \"mechUpgradeArmorAmount\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechMobility\", EDITORSTRINGS.MECH.label_mobility);\r\n\t\t\t\tcontent+=createGrowthControls(\"mechUpgradeMobilityCost\", \"mechUpgradeMobilityAmount\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechAccuracy\", EDITORSTRINGS.MECH.label_accuracy);\r\n\t\t\t\tcontent+=createGrowthControls(\"mechUpgradAccuracyCost\", \"mechUpgradAccuracyAmount\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_weapons;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=createGrowthControls(\"mechUpgradeWeaponCost\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechMove\", \"Move\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t//content+=_this.createValueInput(\"mechSize\", \"Size\");\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"Size\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tvar value = _this.getMetaValue(\"mechSize\");\r\n\t\t\t\t\r\n\t\t\t\tvar options = ENGINE_SETTINGS.MECH_SIZES || [\"S\", \"M\", \"1L\", \"2L\"];\r\n\t\t\t\tcontent+=\"<select id='prop_mechSize'>\";\r\n\t\t\t\tcontent+=\"<option value=''></option>\"\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[i] == value ? \"selected\" : \"\")+\" value='\"+options[i]+\"'>\"+options[i]+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tlet hookedProperties = [\r\n\t\t\t\t\t\"mechHP\",\r\n\t\t\t\t\t\"mechEN\",\r\n\t\t\t\t\t\"mechArmor\",\r\n\t\t\t\t\t\"mechMobility\",\r\n\t\t\t\t\t\"mechAccuracy\",\t\t\t\t\r\n\t\t\t\t\t\"mechUpgradeHPAmount\",\t\t\t\t\t\r\n\t\t\t\t\t\"mechUpgradeENAmount\",\t\t\t\t\t\t\r\n\t\t\t\t\t\"mechUpgradeArmorAmount\",\t\t\t\t\t\r\n\t\t\t\t\t\"mechUpgradeMobilityAmount\",\t\t\t\t\t\r\n\t\t\t\t\t\"mechUpgradAccuracyAmount\",\t\t\t\t\r\n\t\t\t\t\t\"mechMove\",\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t];\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\thookedProperties = [\t\t\t\t\t\t\r\n\t\t\t\t\t\"mechUpgradeHPCost\",\r\n\t\t\t\t\t\"mechUpgradeENCost\",\r\n\t\t\t\t\t\"mechUpgradeArmorCost\",\r\n\t\t\t\t\t\"mechUpgradeMobilityCost\",\r\n\t\t\t\t\t\"mechUpgradAccuracyCost\",\r\n\t\t\t\t\t\"mechUpgradeWeaponCost\",\r\n\t\t\t\t\t\"mechSize\",\t\t\r\n\t\t\t\t];\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tabilities: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $mechAbilityManager.getDefinitions()\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tfunction createAbilityControl(idx){\t\t\t\t\t\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"mechAbility\"+idx);\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\t\tvar abilityLevel = parts[1] || 0;\r\n\t\t\t\t\tvar requiredLevel = parts[2] || 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"#\"+String(idx).padStart(3,0);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='ability_select_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"<div class=''>\";\t\r\n\t\t\t\tfor(var i = 1; i <= 6; i++){\r\n\t\t\t\t\tcontent+=createAbilityControl(i);\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tfor(var i =  i = 1; i <= 6; i++){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#ability_select_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAbility\"+idx, this.value);\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tweapons: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $dataWeapons;\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tfunction createWeaponControl(idx){\t\t\t\t\t\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"mechAttack\"+idx);\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\t\tvar isLocked = (parts[1] || 0) * 1;\r\n\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"#\"+String(idx).padStart(3,0);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='weapon_select_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var i = 1; i < abilityDefs.length; i++){\r\n\t\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].description)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_locked;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<input data-idx='\"+idx+\"' id='weapon_locked_\"+idx+\"' type=checkbox \"+(isLocked ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"<div class='weapons_scroll'>\";\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\t\r\n\t\t\t\tfor(var i = 0; i <= 20; i++){\r\n\t\t\t\t\tcontent+=createWeaponControl(i);\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tfor(var i =  i = 0; i <= 20; i++){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#weapon_select_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"mechAttack\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAttack\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#weapon_locked_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = _this.getMetaValue(\"mechAttack\"+idx);\r\n\t\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\t\tparts[1] = this.checked ? 1 : 0;\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAttack\"+idx, parts.join(\",\"));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, \t\r\n\t\tno_equips: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_can_equip;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='can_equip' type=checkbox \"+(!(_this.getMetaValue(\"mechNoEquips\") * 1) ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#can_equip\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechNoEquips\", this.checked ? 0 : 1);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\ttransformation: {\r\n\t\t\tcreateControls(){\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_command_name;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='transform_cmd_name' value='\"+_this.getMetaValue(\"mechTransformCmd\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_available;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transformation_scroll'>\";\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\t\r\n\t\t\t\tfunction compatParse(value){\r\n\t\t\t\t\t//this method avoids immediately using a try to see if the input is valid json because the debugger needs to run with pause on caught execeptions on\r\n\t\t\t\t\tvar result;\r\n\t\t\t\t\tresult = value * 1 || -1;\t\r\n\t\t\t\t\tif(result == -1 && value != null){\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresult = JSON.parse(value);\r\n\t\t\t\t\t\t} catch(e){\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(result && result != -1){\r\n\t\t\t\t\t\tif(!Array.isArray(result)){\r\n\t\t\t\t\t\t\tresult = [result];\r\n\t\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar value = compatParse(_this.getMetaValue(\"mechTransformsInto\") || \"[]\");\r\n\t\t\t\tvar willReqs = compatParse(_this.getMetaValue(\"mechTransformWill\") || \"[]\");\r\n\t\t\t\tfor(var i = 0; i < value.length; i++){\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=_this.createMechSelect(\"transform_select_\"+i, \"transform_select\", value[i], \"data-idx=\"+i);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_required_will;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<input id='transform_will_\"+i+\"' class='transform_will' data-idx=\"+i+\" value='\"+willReqs[i]+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<img class='remove_transformation remove_button' data-idx='\"+i+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transform_list_controls'>\";\r\n\t\t\t\tcontent+=\"<button id='add_transformation'>Add</button>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row transform_restore_controls_header'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_restores;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tvar values = _this.getMetaValue(\"mechTransformRestores\");\r\n\t\t\t\tvar parts = values.split(\",\");\r\n\t\t\t\tvar restoresHP = parts[0] * 1;\r\n\t\t\t\tvar restoresEN;\r\n\t\t\t\tif(parts.length > 1){\r\n\t\t\t\t\trestoresEN = parts[1] * 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trestoresEN = restoresHP;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row transform_restore_controls'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_HP;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='transform_restores_hp' type=checkbox \"+(restoresHP ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_EN;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='transform_restores_en' type=checkbox \"+(restoresEN ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\t\t\t\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#destroy_transform_mech_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechDestroyTransformInto\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#destroy_transform_pilot_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechDestroyTransformedActor\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#transform_restores_hp\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tvar values = _this.getMetaValue(\"mechTransformRestores\");\r\n\t\t\t\t\tvar parts = values.split(\",\");\r\n\t\t\t\t\tparts[0] = this.checked ? 1 : 0;\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformRestores\", parts.join(\",\"));\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#transform_restores_en\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tvar values = _this.getMetaValue(\"mechTransformRestores\");\r\n\t\t\t\t\tvar parts = values.split(\",\");\r\n\t\t\t\t\tparts[1] = this.checked ? 1 : 0;\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformRestores\", parts.join(\",\"));\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tfunction compatParse(value){\r\n\t\t\t\t\t//this method avoids immediately using a try to see if the input is valid json because the debugger needs to run with pause on caught execeptions on\r\n\t\t\t\t\tvar result;\r\n\t\t\t\t\tresult = value * 1 || -1;\t\r\n\t\t\t\t\tif(result == -1 && value != null){\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresult = JSON.parse(value);\r\n\t\t\t\t\t\t} catch(e){\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(result && result != -1){\r\n\t\t\t\t\t\tif(!Array.isArray(result)){\r\n\t\t\t\t\t\t\tresult = [result];\r\n\t\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#add_transformation\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tvar value = compatParse(_this.getMetaValue(\"mechTransformsInto\") || \"[]\");\r\n\t\t\t\t\tvar willReqs = compatParse(_this.getMetaValue(\"mechTransformWill\") || \"[]\");\r\n\t\t\t\t\tvalue.push(\"\");\r\n\t\t\t\t\twillReqs.push(0);\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformsInto\", JSON.stringify(value));\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformWill\", JSON.stringify(willReqs));\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tlet entries = containerNode.querySelectorAll(\".remove_transformation\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = compatParse(_this.getMetaValue(\"mechTransformsInto\") || \"[]\");\r\n\t\t\t\t\t\tvar willReqs = compatParse(_this.getMetaValue(\"mechTransformWill\") || \"[]\");\r\n\t\t\t\t\t\tvalue.splice(idx, 1);\r\n\t\t\t\t\t\twillReqs.splice(idx, 1);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechTransformsInto\", JSON.stringify(value));\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechTransformWill\", JSON.stringify(willReqs));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".transform_select\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = compatParse(_this.getMetaValue(\"mechTransformsInto\") || \"[]\");\r\n\t\t\t\t\t\tvalue[idx] = this.value;\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechTransformsInto\", JSON.stringify(value));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".transform_will\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar willReqs = compatParse(_this.getMetaValue(\"mechTransformWill\") || \"[]\");\r\n\t\t\t\t\t\twillReqs[idx] = this.value;\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechTransformWill\", JSON.stringify(willReqs));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#transform_cmd_name\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformCmd\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tauto_transformation: {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_on_destruction;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_mech;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"destroy_transform_mech_select\", \"\", _this.getMetaValue(\"mechDestroyTransformInto\"));\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_pilot;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createPilotSelect(\"destroy_transform_pilot_select\", \"\", _this.getMetaValue(\"mechDestroyTransformedActor\"));\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tvar value = _this.getMetaValue(\"mechTransformsWhenTargetPresent\");\r\n\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\tvar otherUnit = parts[0];\r\n\t\t\t\tvar targetUnit = parts[1];\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_if_other_unit_present;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_other_unit;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"other_unit_present_select\", \"\", otherUnit);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_transform_into;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"other_unit_present_target_select\", \"\", targetUnit);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tvar value = _this.getMetaValue(\"mechTransformsWhenTargetMissing\");\r\n\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\tvar otherUnit = parts[0];\r\n\t\t\t\tvar targetUnit = parts[1];\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_if_other_unit_missing;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_other_unit;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"other_unit_missing_select\", \"\", otherUnit);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_transform_into;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"other_unit_missing_target_select\", \"\", targetUnit);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#other_unit_present_select\").addEventListener(\"change\", function(){\t\t\t\t\t\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"mechTransformsWhenTargetPresent\");\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformsWhenTargetPresent\", parts.join(\",\"));\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#other_unit_present_target_select\").addEventListener(\"change\", function(){\t\t\t\t\t\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"mechTransformsWhenTargetPresent\");\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tparts[1] = this.value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformsWhenTargetPresent\", parts.join(\",\"));\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#other_unit_missing_select\").addEventListener(\"change\", function(){\t\t\t\t\t\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"mechTransformsWhenTargetMissing\");\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tparts[0] = this.value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformsWhenTargetMissing\", parts.join(\",\"));\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#other_unit_missing_target_select\").addEventListener(\"change\", function(){\t\t\t\t\t\r\n\t\t\t\t\tvar value = _this.getMetaValue(\"mechTransformsWhenTargetMissing\");\r\n\t\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\t\tparts[1] = this.value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechTransformsWhenTargetMissing\", parts.join(\",\"));\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcombination: {\r\n\t\t\tcreateControls(){\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_from;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='combine_scroll'>\";\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\t\r\n\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechCombinesFrom\") || \"[]\");\r\n\t\t\t\tfor(var i = 0; i < value.length; i++){\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=_this.createMechSelect(\"combine_select_\"+i, \"combine_select\", value[i], \"data-idx=\"+i);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"Required Will\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<input id='transform_will_\"+i+\"' class='transform_will' data-idx=\"+i+\" value='\"+willReqs[i]+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"</div>\";*/\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<img class='remove_combine_from remove_button' data-idx='\"+i+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transform_list_controls'>\";\r\n\t\t\t\tcontent+=\"<button id='add_combine_from'>Add</button>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_into;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechCombinesTo\") || \"[]\");\t\t\t\t\r\n\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=_this.createMechSelect(\"combine_into_select\", \"combine_into_select\", value, \"data-idx=\"+i);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\r\n\t\t\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_required_will;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\t\t\t\t\t\r\n\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='combine_will' value='\"+_this.getMetaValue(\"mechCombineWill\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\r\n\t\t\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#add_combine_from\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechCombinesFrom\") || \"[]\");\r\n\t\t\t\t\tvalue.push(\"\");\t\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechCombinesFrom\", JSON.stringify(value));\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#combine_into_select\").addEventListener(\"change\", function(){\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechCombinesTo\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tlet entries = containerNode.querySelectorAll(\".remove_combine_from\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechCombinesFrom\") || \"[]\");\t\t\t\t\t\t\r\n\t\t\t\t\t\tvalue.splice(idx, 1);\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechCombinesFrom\", JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".combine_select\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechCombinesFrom\") || \"[]\");\r\n\t\t\t\t\t\tvalue[idx] = this.value;\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechCombinesFrom\", JSON.stringify(value));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#combine_will\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechCombineWill\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeployment: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_can_deploy+\"' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_can_deploy\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\r\n\t\t\t\tcontent+=\"<input id='can_deploy' type=checkbox \"+(_this.getMetaValue(\"mechNotDeployable\") * 1 ? \"\" : \"checked\")+\"></input>\";\r\n\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_deploy_actions;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<button id='edit_deploy_actions'>\"+EDITORSTRINGS.MECH.label_edit+\"</button>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_force_pilots+\"' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_force_pilots;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\r\n\t\t\t\tcontent+=\"<input id='force_pilots' type=checkbox \"+(_this.getMetaValue(\"mechForcePilots\") * 1 ? \"checked\" : \"\")+\"></input>\";\r\n\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_quick_swap+\"' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_quick_swap;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\r\n\t\t\t\tcontent+=\"<input id='quick_swap' type=checkbox \"+(_this.getMetaValue(\"mechCanQuickSwap\") * 1 ? \"checked\" : \"\")+\"></input>\";\r\n\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_allowed_pilots;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transformation_scroll'>\";\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\t\r\n\t\t\t\tvar value;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvalue = JSON.parse(_this.getMetaValue(\"mechAllowedPilots\") || \"[]\");\t\r\n\t\t\t\t} catch(e){\r\n\t\t\t\t\t//workaround for handling definitions in the deprecated format\r\n\t\t\t\t\tvalue = [];\r\n\t\t\t\t\t_this.setMetaValue(\"mechAllowedPilots\", \"[]\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t/*if(value.length < 2){\r\n\t\t\t\t\tcontent+=\"Add at least two Pilots to make this Mech available in the Pilot Assignment Intermission menu.\";\r\n\t\t\t\t}*/\r\n\t\t\t\tfor(var i = 0; i < value.length; i++){\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=_this.createPilotSelect(\"allowed_pilot_select_\"+i, \"allowed_pilot_select\", value[i], \"data-idx=\"+i);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<img class='remove_allowed_pilot remove_button' data-idx='\"+i+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transform_list_controls'>\";\r\n\t\t\t\tcontent+=\"<button id='add_allowed_pilot'>Add</button>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_sub_pilots;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='sub_pilot_scroll'>\";\r\n\t\t\t\tcontent+=\"<div class='table sub_pilot_slot'>\";\r\n\t\t\t\t\r\n\t\t\t\tvalue = JSON.parse(_this.getMetaValue(\"mechSubPilots\") || \"[]\");\t\r\n\t\t\t\t\r\n\t\t\t\t/*if(value.length < 2){\r\n\t\t\t\t\tcontent+=\"Add at least two Pilots to make this Mech available in the Pilot Assignment Intermission menu.\";\r\n\t\t\t\t}*/\r\n\t\t\t\tfor(var i = 0; i < value.length; i++){\t\r\n\t\t\t\t\tvar allowedSubPilots;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tallowedSubPilots = JSON.parse(_this.getMetaValue(\"mechAllowedSubPilots\"+(i+1)) || \"[]\");\t\r\n\t\t\t\t\t} catch(e){\r\n\t\t\t\t\t\t//workaround for handling definitions in the deprecated format\r\n\t\t\t\t\t\tallowedSubPilots = [];\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAllowedSubPilots\"+(i+1), \"[]\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_slot+\" \"+(i+1);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_default_pilot;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=_this.createPilotSelect(\"default_pilot_select\"+i, \"default_pilot_select\", value[i], \"data-idx=\"+i);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<img class='remove_sub_pilot_slot remove_button' data-idx='\"+i+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell top'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_allowed;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='allowed_sub_pilots_scroll'>\";\r\n\t\t\t\t\tfor(var j = 0; j < allowedSubPilots.length; j++){\r\n\t\t\t\t\t\tcontent+=\"<div class='entry'>\";\r\n\t\t\t\t\t\tcontent+=_this.createPilotSelect(\"sub_slot_pilot_select\"+i, \"sub_slot_pilot_select\", allowedSubPilots[j], \"data-idx=\"+i+\" data-entry=\"+j);\r\n\t\t\t\t\t\tcontent+=\"<img class='remove_sub_pilot_from_slot remove_button' data-idx='\"+i+\"' data-entry='\"+j+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='sub_pilot_controls'>\";\r\n\t\t\t\t\tcontent+=\"<button data-idx='\"+i+\"' data-entry='\"+j+\"' class='add_sub_pilot'>Add</button>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transform_list_controls'>\";\r\n\t\t\t\tcontent+=\"<button id='add_sub_pilot_slot'>Add</button>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tlet entries;\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#edit_deploy_actions\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tnew _DeployActionUI__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_this._container, _this.getCurrentEntry().id, _this, {\r\n\t\t\t\t\t\t\"changed\": function(){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).show();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#can_deploy\").addEventListener(\"click\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechNotDeployable\", this.checked ? 0 : 1);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#force_pilots\").addEventListener(\"click\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechForcePilots\", this.checked ? 1 : 0);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#quick_swap\").addEventListener(\"click\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechCanQuickSwap\", this.checked ? 1 : 0);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#add_allowed_pilot\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechAllowedPilots\") || \"[]\");\r\n\t\t\t\t\tvalue.push(\"\");\t\t\r\n\t\t\t\t\t_this.setMetaValue(\"mechAllowedPilots\", JSON.stringify(value));\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".remove_allowed_pilot\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechAllowedPilots\") || \"[]\");\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tvalue.splice(idx, 1);\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAllowedPilots\", JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".allowed_pilot_select\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechAllowedPilots\") || \"[]\");\r\n\t\t\t\t\t\tvalue[idx] = this.value;\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAllowedPilots\", JSON.stringify(value));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#add_sub_pilot_slot\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechSubPilots\") || \"[]\");\r\n\t\t\t\t\tif(value.length < 10){\r\n\t\t\t\t\t\tvalue.push(\"\");\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechSubPilots\", JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".remove_sub_pilot_slot\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechSubPilots\") || \"[]\");\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tvalue.splice(idx, 1);\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechSubPilots\", JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".default_pilot_select\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechSubPilots\") || \"[]\");\r\n\t\t\t\t\t\tvalue[idx] = this.value || 0;\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechSubPilots\", JSON.stringify(value));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".add_sub_pilot\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\") * 1;\r\n\t\t\t\t\t\tvar entry = this.getAttribute(\"data-entry\") * 1;\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechAllowedSubPilots\"+(idx+1)) || \"[]\");\t\r\n\t\t\t\t\t\tvalue.push(\"\");\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAllowedSubPilots\"+(idx+1), JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".remove_sub_pilot_from_slot\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\") * 1;\r\n\t\t\t\t\t\tvar entry = this.getAttribute(\"data-entry\") * 1;\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechAllowedSubPilots\"+(idx+1)) || \"[]\");\t\r\n\t\t\t\t\t\tvalue.splice(entry, 1);\t\t\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAllowedSubPilots\"+(idx+1), JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".sub_slot_pilot_select\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\") * 1;\r\n\t\t\t\t\t\tvar entry = this.getAttribute(\"data-entry\") * 1;\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"mechAllowedSubPilots\"+(idx+1)) || \"[]\");\t\r\n\t\t\t\t\t\tvalue[entry] = this.value || 0;\t\t\r\n\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechAllowedSubPilots\"+(idx+1), JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t},\r\n\t\tsprites: {\r\n\t\t\tcreateControls: function(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div title='' class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_basic_battle;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_overworld;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<div id='basic_battle_selector_icon'>\";\r\n\t\t\t\tcontent+=\"<img  src='img/basic_battle/\"+_this.getMetaValue(\"mechBasicBattleSprite\")+\".png'></img>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+= \"<div class='overworld_preview unit_img_preview'></div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='table sub_section'>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_battle_scene;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_folder;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<div class='hint_text'>img/SRWBattleScene/</div>\";\r\n\t\t\t\tcontent+=\"<input  id='prop_mechBattleSceneSprite' value='\"+_this.getMetaValue(\"mechBattleSceneSprite\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"<div class='hint_text'>/main.png</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tvar spriteType;\r\n\t\t\t\tif(_this.getMetaValue(\"mechBattleSceneUseSpriter\") * 1){\r\n\t\t\t\t\tspriteType = \"Spriter\";\r\n\t\t\t\t} else if(_this.getMetaValue(\"mechBattleSceneUseDragonBones\") * 1){\r\n\t\t\t\t\tspriteType = \"DragonBones\";\r\n\t\t\t\t} else if(_this.getMetaValue(\"mechBattleSceneUseSpine\") * 1){\r\n\t\t\t\t\tspriteType = \"Spine\";\r\n\t\t\t\t} else if(_this.getMetaValue(\"mechBattleSceneUse3D\") * 1){\r\n\t\t\t\t\tspriteType = \"3D\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tspriteType = \"Default\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_sprite_type;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='sprite_type_select'>\";\r\n\t\t\t\tvar options = [\r\n\t\t\t\t\t\"Default\",\r\n\t\t\t\t\t\"Spine\",\r\n\t\t\t\t\t\"3D\"\r\n\t\t\t\t\t//\"Spriter\",\r\n\t\t\t\t\t//\"DragonBones\"\r\n\t\t\t\t];\r\n\t\t\t\tfor(var j = 0; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[j] == spriteType ? \"selected\" : \"\")+\" value='\"+options[j]+\"'>\"+options[j]+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\r\n\t\t\t\tif(spriteType == \"DragonBones\"){\r\n\t\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneArmatureName\", EDITORSTRINGS.MECH.label_armature_name);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneDragonBonesSize\", EDITORSTRINGS.MECH.label_dragonbones_world_size);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\tif(spriteType == \"Spine\" || spriteType == \"DragonBones\"){\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_dragonbones_width+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneCanvasWidth\", EDITORSTRINGS.MECH.label_canvas_width);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_dragonbones_height+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneCanvasHeight\", EDITORSTRINGS.MECH.label_canvas_height);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(spriteType == \"Default\"){\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_default_size+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneSpriteSize\", EDITORSTRINGS.MECH.label_source_size, \"\", \"px\");\r\n\t\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t}\t\r\n\r\n\t\t\t\tif(spriteType == \"3D\"){\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_blockbench_hack+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneBBHack\", EDITORSTRINGS.MECH.label_blockbench_hack, \"\", \"\");\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_shadow_parent+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechShadowParent\", EDITORSTRINGS.MECH.label_shadow_parent, \"\", \"\");\r\n\t\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_3D_scale+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneSpriteScale\", EDITORSTRINGS.MECH.label_scale, \"\", \"\");\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_3D_rotation+\"' class='row'>\";\r\n\t\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneSpriteRotation\", EDITORSTRINGS.MECH.label_rotation, \"\", \"°\");\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\t\t\r\n\t\t\t\t}\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleYOffset\", EDITORSTRINGS.MECH.label_y_offset, \"\", EDITORSTRINGS.MECH.label_world_units);\r\n\t\t\t\tcontent+=\"</div>\";\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleXOffset\", EDITORSTRINGS.MECH.label_x_offset, \"\", EDITORSTRINGS.MECH.label_world_units);\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleCenterYOffset\", EDITORSTRINGS.MECH.label_root_y_offset, \"\", EDITORSTRINGS.MECH.label_world_units);\r\n\t\t\t\tcontent+=\"</div>\";\t\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_shadow+\"' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneShadowSize\", EDITORSTRINGS.MECH.label_shadow_scale);\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneShadowOffsetZ\", EDITORSTRINGS.MECH.label_shadow_z_offset, \"\", EDITORSTRINGS.MECH.label_world_units);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneShadowOffsetX\", EDITORSTRINGS.MECH.label_shadow_x_offset, \"\", EDITORSTRINGS.MECH.label_world_units);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div title='\"+EDITORSTRINGS.MECH.hint_world_size+\"' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleReferenceSize\", EDITORSTRINGS.MECH.label_world_size, \"\", EDITORSTRINGS.MECH.label_world_units);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneDefaultAttachments\", EDITORSTRINGS.MECH.label_default_attachments, \"\", \"\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_death_anim;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='death_anim_select'>\";\r\n\t\t\t\tvar animData = _this._mainUIHandler.getAnimationDefs();\r\n\t\t\t\tvar value = _this.getMetaValue(\"mechBattleSceneDeathAnim\");\r\n\t\t\t\tcontent+=\"<option title='' value=''>\"+EDITORSTRINGS.MECH.label_system_default+\"</option>\";\r\n\t\t\t\tvar options = Object.keys(animData);\r\n\t\t\t\tfor(var j = 0; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[j] == value ? \"selected\" : \"\")+\" value='\"+options[j]+\"'>\"+animData[options[j]].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechBattleSceneBarrierScale\", EDITORSTRINGS.MECH.label_barrier_scale, \"\", \"\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook: function(){\r\n\t\t\t\tvar spriteType;\r\n\t\t\t\tif(_this.getMetaValue(\"mechBattleSceneUseSpriter\") * 1){\r\n\t\t\t\t\tspriteType = \"Spriter\";\r\n\t\t\t\t} else if(_this.getMetaValue(\"mechBattleSceneUseDragonBones\") * 1){\r\n\t\t\t\t\tspriteType = \"DragonBones\";\r\n\t\t\t\t} else if(_this.getMetaValue(\"mechBattleSceneUseSpine\") * 1){\r\n\t\t\t\t\tspriteType = \"Spine\";\r\n\t\t\t\t} else if(_this.getMetaValue(\"mechBattleSceneUse3D\") * 1){\r\n\t\t\t\t\tspriteType = \"3D\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tspriteType = \"Default\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar overworldInfo = _this.getMetaValue(\"srpgOverworld\").split(\",\");\r\n\t\t\t\tvar divs = containerNode.querySelectorAll(\".overworld_preview\");\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\t_OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loadOverworldByParams(overworldInfo[0], overworldInfo[1], div);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tdivs.forEach(function(div){\r\n\t\t\t\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\t\tlet result = await _OverworldSpriteManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].showOverworldSelector(e, overworldInfo[0], overworldInfo[1], this);\r\n\t\t\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\t\t\t_this.setMetaValue(\"srpgOverworld\", result.faceName+\",\"+result.faceIndex);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.isModified();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#basic_battle_selector_icon\").addEventListener(\"click\", async function(e){\r\n\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\tlet result = await _BasicBattleSpriteManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].showSelector(e, _this.getMetaValue(\"mechBasicBattleSprite\"), this);\r\n\t\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBasicBattleSprite\", result.path)\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.isModified();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#sprite_type_select\").addEventListener(\"change\", function(e){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.value == \"Default\"){\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseDragonBones\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpriter\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpine\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUse3D\", 0);\r\n\t\t\t\t\t} else if(this.value == \"Spriter\"){\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseDragonBones\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpriter\", 1);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpine\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUse3D\", 0);\r\n\t\t\t\t\t} else if(this.value == \"Spine\"){\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseDragonBones\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpriter\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpine\", 1);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUse3D\", 0);\r\n\t\t\t\t\t} else if(this.value == \"3D\"){\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseDragonBones\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpriter\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpine\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUse3D\", 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseDragonBones\", 1);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpriter\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUseSpine\", 0);\r\n\t\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneUse3D\", 0);\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tlet hookedProperties = [\t\t\t\t\t\r\n\t\t\t\t\t\"mechBattleYOffset\",\r\n\t\t\t\t\t\"mechBattleXOffset\",\r\n\t\t\t\t\t\"mechBattleCenterYOffset\",\r\n\t\t\t\t\t\"mechBattleSceneShadowSize\",\r\n\t\t\t\t\t\"mechBattleSceneShadowOffsetZ\",\t\t\t\t\r\n\t\t\t\t\t\"mechBattleSceneShadowOffsetX\",\t\t\t\t\t\r\n\t\t\t\t\t\"mechBattleReferenceSize\",\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t];\r\n\t\t\t\t\r\n\t\t\t\tif(spriteType == \"Default\"){\r\n\t\t\t\t\thookedProperties.unshift(\"mechBattleSceneSpriteSize\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(spriteType == \"3D\"){\r\n\t\t\t\t\thookedProperties.unshift(\"mechBattleSceneSpriteRotation\");\r\n\t\t\t\t\thookedProperties.unshift(\"mechBattleSceneSpriteScale\");\t\r\n\t\t\t\t\thookedProperties.unshift(\"mechBattleSceneBBHack\");\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(spriteType == \"DragonBones\"){\r\n\t\t\t\t\t\r\n\t\t\t\t\thookedProperties.push(\"mechBattleSceneCanvasWidth\");\r\n\t\t\t\t\thookedProperties.push(\"mechBattleSceneCanvasHeight\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(spriteType == \"Spine\"){\r\n\t\t\t\t\thookedProperties.push(\"mechBattleSceneCanvasWidth\");\r\n\t\t\t\t\thookedProperties.push(\"mechBattleSceneCanvasHeight\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\thookedProperties = [\t\t\t\r\n\t\t\t\t\t\"mechBattleSceneSprite\",\t\t\t\r\n\t\t\t\t\t\"mechBattleSceneDefaultAttachments\",\r\n\t\t\t\t\t\"mechBattleSceneBarrierScale\"\t\t\t\r\n\t\t\t\t];\r\n\t\t\t\tif(spriteType == \"DragonBones\"){\r\n\t\t\t\t\thookedProperties.push(\"mechBattleSceneArmatureName\");\r\n\t\t\t\t}\r\n\t\t\t\tif(spriteType == \"3D\"){\r\n\t\t\t\t\thookedProperties.unshift(\"mechShadowParent\");\t\r\n\t\t\t\t}\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#death_anim_select\").addEventListener(\"change\", function(e){\r\n\t\t\t\t\t_this.setMetaValue(\"mechBattleSceneDeathAnim\", this.value);\t\t\t\t\t\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\t\r\n\t\t},\r\n\t\tanimations: {\r\n\t\t\tcreateControls: function(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div title='' class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_spawn;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_animation;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<div class='hint_text'>img/animations/</div>\";\r\n\t\t\t\tcontent+=\"<input id='prop_mechSpawnAnimName' value='\"+_this.getMetaValue(\"mechSpawnAnimName\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"<div class='hint_text'>.png</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechSpawnAnimFrameSize\", EDITORSTRINGS.MECH.label_frame_size, \"\", \"px\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechSpawnAnimFrames\", EDITORSTRINGS.MECH.label_frames);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechSpawnAnimSheetWidth\", EDITORSTRINGS.MECH.label_sheet_width, \"\", \"px\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechSpawnAnimSpeed\", EDITORSTRINGS.MECH.label_anim_speed, \"\", \"frames\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechSpawnAnimAppearFrame\", EDITORSTRINGS.MECH.label_change_on_frame);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechSpawnAnimSoundEffect\", EDITORSTRINGS.MECH.label_SE, \"audio/se/\", \".ogg\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='table sub_section'>\";\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_destroy;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_animation;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<div class='hint_text'>img/animations/</div>\";\r\n\t\t\t\tcontent+=\"<input id='prop_mechDestroyAnimName' value='\"+_this.getMetaValue(\"mechDestroyAnimName\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"<div class='hint_text'>.png</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechDestroyAnimFrameSize\", EDITORSTRINGS.MECH.label_frame_size, \"\", \"px\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechDestroyAnimFrames\", EDITORSTRINGS.MECH.label_frames);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechDestroyAnimSheetWidth\", EDITORSTRINGS.MECH.label_sheet_width, \"\", \"px\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechDestroyAnimSpeed\", EDITORSTRINGS.MECH.label_anim_speed, \"\", \"frames\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechDestroyAnimAppearFrame\", EDITORSTRINGS.MECH.label_change_on_frame);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='row'>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"mechDestroyAnimSoundEffect\", EDITORSTRINGS.MECH.label_SE, \"audio/se/\", \".ogg\");\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook: function(){\r\n\t\t\t\tlet hookedProperties = [\t\t\t\t\t\r\n\t\t\t\t\t\"mechSpawnAnimFrameSize\",\r\n\t\t\t\t\t\"mechSpawnAnimFrames\",\r\n\t\t\t\t\t\"mechSpawnAnimSheetWidth\",\r\n\t\t\t\t\t\"mechSpawnAnimSpeed\",\r\n\t\t\t\t\t\"mechSpawnAnimAppearFrame\",\t\t\t\r\n\r\n\t\t\t\t\t\"mechDestroyAnimFrameSize\",\r\n\t\t\t\t\t\"mechDestroyAnimFrames\",\r\n\t\t\t\t\t\"mechDestroyAnimSheetWidth\",\r\n\t\t\t\t\t\"mechDestroyAnimSpeed\",\r\n\t\t\t\t\t\"mechDestroyAnimAppearFrame\",\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t];\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\r\n\t\t\t\t\t\tif(!isNaN(value)){\r\n\t\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.value = \"\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\thookedProperties = [\t\t\t\r\n\t\t\t\t\t\"mechSpawnAnimName\",\t\r\n\t\t\t\t\t\"mechSpawnAnimSoundEffect\",\r\n\t\t\t\t\t\"mechDestroyAnimName\",\t\r\n\t\t\t\t\t\"mechDestroyAnimSoundEffect\"\r\n\t\t\t\t];\r\n\t\t\t\r\n\t\t\t\thookedProperties.forEach(function(prop){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tlet value = this.value;\t\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\t\r\n\t\t},\r\n\t\tno_upgrade: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.label_can_upgrade;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='no_upgrade' type=checkbox \"+(_this.getMetaValue(\"mechNoUpgrade\")*1 ? \"\" : \"checked\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#no_upgrade\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"mechNoUpgrade\", this.checked ? 0 : 1);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t};\t\r\n\t\r\n\tvar terrains = [\r\n\t\t{type: \"AIR\", prop: \"mechAirEnabled\"},\r\n\t\t{type: \"LND\",  prop: \"mechLandEnabled\"},\r\n\t\t{type: \"SEA\",  prop: \"mechWaterEnabled\"},\r\n\t\t{type: \"SPC\", prop: \"mechSpaceEnabled\"}\r\n\t];\r\n\t\r\n\tfunction handleDefaultProp(prop, name){\r\n\t\treturn {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=_this.createValueInput(prop, name);\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n\r\n\r\nMechUI.prototype.show = async function(){\r\n\tlet _this = this;\r\n\t_this.loadData();\r\n\tvar listScroll = 0;\r\n\tif(this._dbList){\r\n\t\tlistScroll = this._dbList.getScroll();\r\n\t}\r\n\tvar currentScroll;\r\n\tvar scrollContainer = document.querySelector(\".edit_pane .main_info\");\r\n\tif(scrollContainer){\r\n\t\tcurrentScroll = scrollContainer.scrollTop;\r\n\t}\r\n\t\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tvar content = \"\";\r\n\tcontent+=\"<div class='editor_ui'>\";\r\n\tcontent+=\"<div class='list_pane'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='edit_pane'>\";\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button class='cancel'>\"+EDITORSTRINGS.GENERAL.label_cancel+\"</button>\";\r\n\tcontent+=\"<button class='save'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='main_info'>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_general_info;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content'>\";\r\n\tcontent+=_this._propertyHandlers.menu_sprite.createControls();\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.name.createControls();\r\n\tcontent+=_this._propertyHandlers.is_ship.createControls();\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.inherits.createControls();\r\n\t\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.fund_yield.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.exp_yield.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.pp_yield.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.item_slots.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.carryingCapacity.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.fub.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.tags.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\r\n\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_stats;\t\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.no_upgrade.createControls();\t\r\n\tcontent+=_this._propertyHandlers.stats.createControls();\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.attribute1.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.attribute2.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_terrain;\t\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=_this._propertyHandlers.terrain.createControls();\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_abilities;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.abilities.createControls();\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_weapons;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div>\";\r\n\tcontent+=_this._propertyHandlers.no_equips.createControls();\r\n\tcontent+=_this._propertyHandlers.weapons.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_transformation;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content transformation stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.transformation.createControls();\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_auto_transformation;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content transformation stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.auto_transformation.createControls();\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_auto_combination;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content transformation stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.combination.createControls();\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_deployment;\t\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content transformation stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.deployment.createControls();\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_sprites;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content transformation stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.sprites.createControls();\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.MECH.label_animations;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content transformation stats'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.animations.createControls();\r\n\tcontent+=\"<div class='table'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tthis._container.innerHTML = content;\r\n\tvar search = \"\";\r\n\tif(this._dbList){\r\n\t\tsearch = this._dbList.getSearch();\r\n\t}\r\n\tthis._dbList = new _DBList_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\r\n\t\tthis._container.querySelector(\".list_pane\"), \r\n\t\tthis._data, \r\n\t\tthis,\r\n\t\t{\r\n\t\t\tselected: function(id){\r\n\t\t\t\t_this._currentId = id;\r\n\t\t\t\t_this.show();\r\n\t\t\t},\r\n\t\t\tcountChanged: function(amount){\r\n\t\t\t\t\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\tfor(var i = 0; i < amount + 1; i++){\r\n\t\t\t\t\tlet blankEntry = _this.getEmpty(i);\r\n\t\t\t\t\ttmp.push(_this._data[i] || blankEntry);\r\n\t\t\t\t}\r\n\t\t\t\t_this._data = tmp;\r\n\t\t\t\t_this.show();\r\n\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tthis._dbList.setSearch(search);\r\n\tthis._dbList.show(_this._currentId);\r\n\tif(listScroll){\r\n\t\tthis._dbList.setScroll(listScroll);\r\n\t}\r\n\t\r\n\tdocument.querySelector(\".edit_pane .main_info\").scrollTop = currentScroll;\r\n\tthis.hook();\r\n\t\r\n}\r\n\r\n\r\nMechUI.prototype.hook = function(){\r\n\tlet _this = this;\r\n\t_this._container.querySelector(\".edit_pane .controls .save\").addEventListener(\"click\", function(){\r\n\t\t_this.save();\r\n\t\t_this._mainUIHandler.clearModified();\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\".edit_pane .controls .cancel\").addEventListener(\"click\", function(){\r\n\t\tvar c = true;\r\n\t\tif(_this._mainUIHandler.isModified()){\r\n\t\t\tc = confirm(\"Discard all unsaved changes?\");\r\n\t\t}\r\n\t\tif(c){\r\n\t\t\t_this._data = null;\r\n\t\t\t_this.show();\t\r\n\t\t\t_this._mainUIHandler.clearModified();\r\n\t\t}\t\t\r\n\t});\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tObject.keys(_this._propertyHandlers).forEach(function(prop){\r\n\t\t_this._propertyHandlers[prop].hook(currentEntry);\r\n\t});\t\r\n\t_this.hookPageControls();\r\n}\r\n\r\n\r\n\r\nMechUI.prototype.hookPageControls = function(){\r\n\tlet _this = this;\r\n\t/*_this._container.querySelector(\"#abi_page_left\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage > 0){\r\n\t\t\t_this._currentAbiPage--;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\"#abi_page_right\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage < 19){\r\n\t\t\t_this._currentAbiPage++;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});*/\r\n\t\r\n}\r\n\t\t\t\r\nMechUI.prototype.getEmpty = function(id){\r\n\treturn {\r\n\t  \"id\": id,\r\n\t  \"learnings\": [],\r\n\t  \"name\": \"\",\r\n\t  \"note\": \"\",\r\n\t  \"meta\": {}\r\n\t};\r\n}\t\t\t\r\n\t\t\n\n//# sourceURL=webpack://src/./js/Editor/MechUI.js?");

/***/ }),

/***/ "./js/Editor/MenuSpriteManager.js":
/*!****************************************!*\
  !*** ./js/Editor/MenuSpriteManager.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MenuSpriteManager)\n/* harmony export */ });\n/* harmony import */ var _style_menuSpriteSelector_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/menuSpriteSelector.css */ \"./js/Editor/style/menuSpriteSelector.css\");\n/* harmony import */ var _style_menuSpriteSelector_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_menuSpriteSelector_css__WEBPACK_IMPORTED_MODULE_0__);\n\r\nfunction MenuSpriteManager(){\r\n\t\r\n}\r\n\r\nMenuSpriteManager.showSelector = function(e, current, elem){\r\n\tvar currentSearch = \"\";\r\n\te.stopPropagation();\r\n\tif(!current){\r\n\t\tcurrent = \"none\";\r\n\t}\r\n\treturn new Promise(function(resolve, reject){\t\r\n\t\tvar path = __webpack_require__(/*! path */ \"path\");\r\n\t\tvar base = getBase();\r\n\t\tconst dir = base+\"img/menu\";\r\n\t\tvar availableFiles = [];\r\n\t\tconst FILESYSTEM = __webpack_require__(/*! fs */ \"fs\"); \r\n\t\tFILESYSTEM.readdirSync(dir).forEach(function(file) {\t\r\n\t\t\tfile = file.replace(/\\.png$/, \"\");\r\n\t\t\tavailableFiles.push(file);\t\t\r\n\t\t});\t\r\n\t\t\r\n\t\tvar editorContainer = document.querySelector(\"#srw_editor\");\r\n\t\t\r\n\t\tvar container;\r\n\t\tvar containerId = \"menu_selector_container\";\r\n\t\tvar container = editorContainer.querySelector(\"#menu_selector_container\");\r\n\t\tif(!container){\t\t\r\n\t\t\tcontainer = document.createElement(\"div\");\r\n\t\t\tcontainer.id = \"menu_selector_container\";\r\n\t\t\teditorContainer.appendChild(container);\t\r\n\t\t\t\r\n\t\t\tcontainer.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar rect = elem.getBoundingClientRect();\r\n\t\tcontainer.style.top = rect.top + \"px\";\r\n\t\tcontainer.style.left = rect.right + 5 + \"px\";\r\n\t\t\r\n\t\tvar content = \"\";\r\n\t\tcontent+=\"<div class='preview_selector'>\";\r\n\t\tcontent+=\"<div class='controls'>\";\r\n\t\tcontent+=\"<div class='label'>Search </div>\";\r\n\t\tcontent+=\"<input class='search'></input>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class='selection_pane'>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontainer.innerHTML = content;\r\n\t\tcontainer.style.display = \"\";\r\n\t\t\r\n\t\tvar containerRect = container.getBoundingClientRect();\r\n\t\tif(containerRect.bottom > window.innerHeight){\r\n\t\t\tcontainer.style.top = rect.top - (containerRect.bottom - window.innerHeight + 5) + \"px\";\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\tfunction updateSelector(){\r\n\t\t\tvar ctr = 0;\r\n\t\t\tvar content = \"\";\r\n\t\t\tvar ctr = 0;\r\n\t\t\tcontent+=\"<div class='selector_container'>\";\r\n\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\tcontent+=\"<div data-file='none' class='entry_container \"+(current == \"none\" ? \"selected\" : \"\")+\" '>\";\r\n\t\t\tcontent+=\"<div class='entry'>\";\r\n\t\t\tcontent+=\"None\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tavailableFiles.forEach(function(file){\r\n\t\t\t\tif(file.toLowerCase().indexOf(currentSearch.toLowerCase()) != -1){\r\n\t\t\t\t\tif(!((ctr + 1) % 3)){\r\n\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontent+=\"<div data-file='\"+file+\"' class='entry_container \"+(current == \"file\" ? \"selected\" : \"\")+\"'>\";\r\n\t\t\t\t\tcontent+=\"<div class='entry'>\";\r\n\t\t\t\t\tcontent+=\"<img src='img/menu/\"+file+\".png'/>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div title='\"+file+\"' class='file_name'>\";\r\n\t\t\t\t\tcontent+=file;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tctr++;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t/*content+=\"<div class='controls'>\";\r\n\t\t\tcontent+=\"<div class='label '>Face name:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceName+\"</div>\";\r\n\t\t\tcontent+=\"<div class='label '>Face index:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceIndex+\"</div>\";\r\n\t\t\tcontent+=\"</div>\";*/\r\n\t\t\t\r\n\t\t\tcontainer.querySelector(\".selection_pane\").innerHTML = content;\t\t\t\r\n\t\t\t\r\n\t\t\tvar selectors = container.querySelectorAll(\".selection_pane .entry_container\");\r\n\t\t\tselectors.forEach(function(selector){\r\n\t\t\t\tselector.addEventListener(\"click\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tvar path = this.getAttribute(\"data-file\");\r\n\t\t\t\t\tif(path == \"none\"){\r\n\t\t\t\t\t\tpath = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve({status: \"updated\", path: path});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateAll(){\r\n\t\t\tupdateSelector();\r\n\t\t}\r\n\t\t\r\n\t\tupdateAll();\r\n\t\t\r\n\t\tif(!MenuSpriteManager.hideHandler){\r\n\t\t\tMenuSpriteManager.hideHandler = editorContainer.addEventListener(\"click\", function(){\r\n\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\tresolve({status: \"cancelled\"});\r\n\t\t\t});\r\n\t\t\t//hacky, solution to hide element if the container holding the parent element is scrolled\r\n\t\t\tif(document.querySelector(\".text_scroll_default\")){\r\n\t\t\t\tdocument.querySelector(\".text_scroll_default\").addEventListener(\"scroll\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tresolve({status: \"cancelled\"});\r\n\t\t\t\t});\t\r\n\t\t\t}\t\t\t\r\n\t\t}\t\r\n\t\t\r\n\t\tcontainer.querySelector(\".search\").addEventListener(\"keyup\", function(){\r\n\t\t\tcurrentSearch = this.value;\r\n\t\t\tupdateAll();\r\n\t\t});\r\n\t});\r\n}\n\n//# sourceURL=webpack://src/./js/Editor/MenuSpriteManager.js?");

/***/ }),

/***/ "./js/Editor/OverworldSpriteManager.js":
/*!*********************************************!*\
  !*** ./js/Editor/OverworldSpriteManager.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ OverworldSpriteManager)\n/* harmony export */ });\n/* harmony import */ var _style_faceSelector_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/faceSelector.css */ \"./js/Editor/style/faceSelector.css\");\n/* harmony import */ var _style_faceSelector_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_faceSelector_css__WEBPACK_IMPORTED_MODULE_0__);\n\r\nfunction OverworldSpriteManager(){\r\n\t\r\n}\r\n\r\nOverworldSpriteManager.faceWidth = 144;\r\nOverworldSpriteManager.faceHeight = 192;\r\nOverworldSpriteManager.faceScale = 0.5;\r\n\r\nOverworldSpriteManager.faceFileColumns = 4;\r\nOverworldSpriteManager.faceFileRows = 2;\r\n\r\nOverworldSpriteManager.loadOverworldByParams = function(name, index, elem) {\r\n\tvar width = OverworldSpriteManager.faceWidth;\r\n    var height = OverworldSpriteManager.faceHeight;\r\n\t\r\n\telem.innerHTML = \"\";\r\n\t\r\n\tvar targetBitmap = new Bitmap(width, height);\r\n\t\r\n\tvar bitmap = ImageManager.loadCharacter(name);\t\r\n\tbitmap.addLoadListener(function(){\r\n\t\tvar pw = width;\r\n\t\tvar ph = height;\r\n\t\tvar sw = Math.min(width, pw);\r\n\t\tvar sh = Math.min(height, ph);\r\n\t\tvar dx = Math.floor(0 + Math.max(width - pw, 0) / 2);\r\n\t\tvar dy = Math.floor(0 + Math.max(height - ph, 0) / 2);\r\n\t\tvar sx = index % 4 * pw + (pw - sw) / 2;\r\n\t\tvar sy = Math.floor(index / 4) * ph + (ph - sh) / 2;   \r\n\t\t\r\n\t\ttargetBitmap.blt(bitmap, sx, sy, sw, sh, dx, dy);\r\n\t\tvar facePicContainer = document.createElement(\"div\");\r\n\t\tfacePicContainer.classList.add(\"face_pic_container\");\r\n\t\tvar facePic = document.createElement(\"img\");\r\n\t\tfacePic.style.width = \"100%\";\r\n\t\tfacePic.setAttribute(\"src\", targetBitmap.canvas.toDataURL());\r\n\t\tfacePicContainer.appendChild(facePic);\t\r\n\t\telem.appendChild(facePicContainer);\t\r\n\t});\r\n}\r\n\r\nOverworldSpriteManager.showOverworldSelector = function(e, faceName, faceIndex, elem){\r\n\te.stopPropagation();\r\n\t\r\n\treturn new Promise(function(resolve, reject){\t\r\n\t\tvar path = __webpack_require__(/*! path */ \"path\");\r\n\t\tvar base = getBase();\r\n\t\tconst dir = base+\"img/characters\";\r\n\t\tvar availableFaceFiles = [];\r\n\t\tconst FILESYSTEM = __webpack_require__(/*! fs */ \"fs\"); \r\n\t\tFILESYSTEM.readdirSync(dir).forEach(function(file) {\t\r\n\t\t\tfile = file.replace(/\\.png$/, \"\");\r\n\t\t\tavailableFaceFiles.push(file);\t\t\r\n\t\t});\t\r\n\t\t\r\n\t\tvar editorContainer = document.querySelector(\"#srw_editor\");\r\n\t\t\r\n\t\tvar container;\r\n\t\tvar containerId = \"face_selector_container\";\r\n\t\tvar container = editorContainer.querySelector(\"#face_selector_container\");\r\n\t\tif(!container){\t\t\r\n\t\t\tcontainer = document.createElement(\"div\");\r\n\t\t\tcontainer.id = \"face_selector_container\";\r\n\t\t\teditorContainer.appendChild(container);\t\r\n\t\t\t\r\n\t\t\tcontainer.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar rect = elem.getBoundingClientRect();\r\n\t\tcontainer.style.top = rect.top + \"px\";\r\n\t\tcontainer.style.left = rect.right + 5 + \"px\";\r\n\t\t\r\n\t\tvar content = \"\";\r\n\t\tcontent+=\"<div class='face_selector'>\";\r\n\t\tcontent+=\"<div class='face_file_list'>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class='selection_pane'>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontainer.innerHTML = content;\r\n\t\tcontainer.style.display = \"\";\r\n\t\t\r\n\t\tvar containerRect = container.getBoundingClientRect();\r\n\t\tif(containerRect.bottom > window.innerHeight){\r\n\t\t\tcontainer.style.top = rect.top - (containerRect.bottom - window.innerHeight + 5) + \"px\";\r\n\t\t}\r\n\t\t\r\n\t\tWindow.innerHeight\r\n\t\t\r\n\t\tfunction updateFaceList(){\r\n\t\t\tvar ctr = 0;\r\n\t\t\tvar content = \"\";\r\n\t\t\tavailableFaceFiles.forEach(function(faceFile){\r\n\t\t\t\tcontent+=\"<div class='entry \"+(faceFile == faceName ? \"selected\" : \"\")+\"' data-facename=\"+faceFile+\">\";\r\n\t\t\t\tcontent+=faceFile;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tctr++;\r\n\t\t\t});\t\r\n\t\t\tcontainer.querySelector(\".face_file_list\").innerHTML = content;\r\n\t\t\tvar selected = container.querySelector(\".face_file_list .entry[data-facename='\"+faceName+\"']\");\r\n\t\t\tif(selected){\r\n\t\t\t\tselected.scrollIntoView();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar entries = container.querySelectorAll(\".face_file_list .entry\");\r\n\t\t\tentries.forEach(function(entry){\r\n\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\tfaceName = this.getAttribute(\"data-facename\");\r\n\t\t\t\t\tupdateAll();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateFaceSelector(){\r\n\t\t\tvar ctr = 0;\r\n\t\t\tvar content = \"\";\r\n\t\t\tcontent+=\"<div class='selector_container'>\";\r\n\t\t\t\r\n\t\t\tvar width = OverworldSpriteManager.faceWidth * OverworldSpriteManager.faceScale + \"px\";\r\n\t\t\tvar height = OverworldSpriteManager.faceHeight * OverworldSpriteManager.faceScale + \"px\"\r\n\t\t\tfor(var i = 0; i < OverworldSpriteManager.faceFileRows; i++){\r\n\t\t\t\tfor(var j = 0; j < OverworldSpriteManager.faceFileColumns; j++){\r\n\t\t\t\t\tvar top = i * OverworldSpriteManager.faceHeight * OverworldSpriteManager.faceScale - 1 + \"px\";\r\n\t\t\t\t\tvar left = j * OverworldSpriteManager.faceWidth * OverworldSpriteManager.faceScale - 1 + \"px\";\r\n\t\t\t\t\tvar idx = i * OverworldSpriteManager.faceFileColumns + j;\r\n\t\t\t\t\tcontent+=\"<div style='width: \"+width+\"; height: \"+height+\"; top: \"+top+\"; left: \"+left+\"' class='selector_square \"+(idx == faceIndex ? \"current\" : \"\")+\"' data-idx='\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t/*content+=\"<div class='controls'>\";\r\n\t\t\tcontent+=\"<div class='label '>Face name:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceName+\"</div>\";\r\n\t\t\tcontent+=\"<div class='label '>Face index:</div>\";\r\n\t\t\tcontent+=\"<div class='label'>\"+faceIndex+\"</div>\";\r\n\t\t\tcontent+=\"</div>\";*/\r\n\t\t\t\r\n\t\t\tcontainer.querySelector(\".selection_pane\").innerHTML = content;\r\n\t\t\tvar selectorContainer = container.querySelector(\".selection_pane .selector_container\");\r\n\t\t\tselectorContainer.style.width = OverworldSpriteManager.faceFileColumns * OverworldSpriteManager.faceWidth * OverworldSpriteManager.faceScale + \"px\";\r\n\t\t\tselectorContainer.style.height = OverworldSpriteManager.faceFileRows * OverworldSpriteManager.faceHeight * OverworldSpriteManager.faceScale + \"px\";\r\n\t\t\tselectorContainer.style.backgroundImage = \"url('img/characters/\"+faceName+\".png')\";\t\t\r\n\t\t\tselectorContainer.style.backgroundSize = OverworldSpriteManager.faceFileColumns * OverworldSpriteManager.faceWidth * OverworldSpriteManager.faceScale + \"px\";\r\n\t\t\t\r\n\t\t\tvar faceSelectors = container.querySelectorAll(\".selection_pane .selector_square\");\r\n\t\t\tfaceSelectors.forEach(function(faceSelector){\r\n\t\t\t\tfaceSelector.addEventListener(\"click\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tresolve({status: \"updated\", faceName: faceName, faceIndex: this.getAttribute(\"data-idx\")});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfunction updateAll(){\r\n\t\t\tupdateFaceList();\r\n\t\t\tupdateFaceSelector();\r\n\t\t}\r\n\t\t\r\n\t\tupdateAll();\r\n\t\t\r\n\t\tif(!OverworldSpriteManager.hideHandler){\r\n\t\t\tOverworldSpriteManager.hideHandler = editorContainer.addEventListener(\"click\", function(){\r\n\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\tresolve({status: \"cancelled\"});\r\n\t\t\t});\r\n\t\t\t//hacky, solution to hide element if the container holding the parent element is scrolled\r\n\t\t\tif(document.querySelector(\".text_scroll_default\")){\r\n\t\t\t\tdocument.querySelector(\".text_scroll_default\").addEventListener(\"scroll\", function(){\r\n\t\t\t\t\tcontainer.style.display = \"none\";\r\n\t\t\t\t\tresolve({status: \"cancelled\"});\r\n\t\t\t\t});\t\r\n\t\t\t}\t\t\t\r\n\t\t}\t\r\n\t});\r\n}\n\n//# sourceURL=webpack://src/./js/Editor/OverworldSpriteManager.js?");

/***/ }),

/***/ "./js/Editor/PatternUI.js":
/*!********************************!*\
  !*** ./js/Editor/PatternUI.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PatternUI)\n/* harmony export */ });\n/* harmony import */ var _EditorUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditorUI.js */ \"./js/Editor/EditorUI.js\");\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n\r\n\r\n\r\n\r\nfunction PatternUI(container, mainUIHandler){\r\n\t_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, container, mainUIHandler);\r\n\tthis._dataFile = \"data/Patterns.json\";\r\n}\r\n\r\nPatternUI.prototype = Object.create(_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nPatternUI.prototype.constructor = PatternUI;\r\n\r\nPatternUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\tvar containerNode = _this._container;\r\n}\r\n\r\nPatternUI.prototype.unpackTiles = async function(){\r\n\tthis._currentShapeLookup = {};\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tif(currentEntry){\r\n\t\tfor(let tile of currentEntry.tiles){\r\n\t\t\tlet x = tile.x;\r\n\t\t\tlet y = tile.y;\r\n\t\t\tif(!this._currentShapeLookup[x]){\r\n\t\t\t\tthis._currentShapeLookup[x] = {};\r\n\t\t\t}\r\n\t\t\tif(!this._currentShapeLookup[x][y]){\r\n\t\t\t\tthis._currentShapeLookup[x][y] = true;\r\n\t\t\t}\r\n\t\t}\t\r\n\t}\t\r\n}\r\n\r\nPatternUI.prototype.packTiles = function(){\r\n\tvar _this = this;\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tvar tmp = [];\r\n\tObject.keys(_this._currentShapeLookup).forEach(function(x){\r\n\t\tObject.keys(_this._currentShapeLookup[x]).forEach(function(y){\r\n\t\t\ttmp.push({x: x, y: y});\r\n\t\t});\r\n\t});\r\n\t\r\n\tcurrentEntry.tiles = tmp;\r\n}\r\n\r\nPatternUI.prototype.show = async function(){\r\n\tlet _this = this;\r\n\t_this.loadData();\r\n\tvar listScroll = 0;\r\n\tif(this._dbList){\r\n\t\tlistScroll = this._dbList.getScroll();\r\n\t}\r\n\tvar currentScroll;\r\n\tvar scrollContainer = document.querySelector(\".edit_pane .main_info\");\r\n\tif(scrollContainer){\r\n\t\tcurrentScroll = scrollContainer.scrollTop;\r\n\t}\r\n\t\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tthis.unpackTiles();\r\n\tvar content = \"\";\r\n\tcontent+=\"<div class='editor_ui'>\";\r\n\tcontent+=\"<div class='list_pane'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='edit_pane'>\";\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button class='cancel'>\"+EDITORSTRINGS.GENERAL.label_cancel+\"</button>\";\r\n\tcontent+=\"<button class='save'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='main_info'>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.GENERAL.label_general;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content'>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=\"<div class='cell'>\";\r\n\tcontent+=EDITORSTRINGS.GENERAL.label_name;\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='cell'>\";\r\n\tcontent+=\"<input id='prop_name' value='\"+(currentEntry ? currentEntry.name : \"\")+\"'></input>\";\r\n\t\r\n\tvar previewRows = 31;\r\n\tvar previewColumns = 31;\r\n\t\r\n\tvar centerX = 15;\r\n\tvar centerY = 15;\r\n\t\r\n\tcontent+=\"<div class='map_edit_pane_container'>\";\r\n\tcontent+=\"<div id='main_shape' class='map_edit_pane'>\";\r\n\tfor(var row = 0; row < previewRows; row++){\r\n\t\tcontent+=\"<div class='row'>\";\r\n\t\tfor(var column = 0; column < previewColumns; column++){\r\n\t\t\tvar x = row - centerX;\r\n\t\t\tvar y = column - centerY;\t\r\n\t\t\t\r\n\t\t\tvar classString = \"block \";\r\n\t\t\tif(_this._currentShapeLookup[y] && _this._currentShapeLookup[y][x]){\r\n\t\t\t\tclassString+=\"selected \";\r\n\t\t\t}\r\n\t\t\tif(x == 0 && y == 0){\r\n\t\t\t\tclassString+=\"center \";\r\n\t\t\t}\r\n\t\t\tcontent+=\"<div data-row='\"+(x)+\"' data-column='\"+(y)+\"' class='\"+classString+\"'>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\r\n\t\tcontent+=\"</div>\";\r\n\t}\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tthis._container.innerHTML = content;\r\n\tvar search = \"\";\r\n\tif(this._dbList){\r\n\t\tsearch = this._dbList.getSearch();\r\n\t}\r\n\tthis._dbList = new _DBList_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\r\n\t\tthis._container.querySelector(\".list_pane\"), \r\n\t\tthis._data, \r\n\t\tthis,\r\n\t\t{\r\n\t\t\tselected: function(id){\r\n\t\t\t\t_this._currentId = id;\r\n\t\t\t\t_this.show();\r\n\t\t\t},\r\n\t\t\tcountChanged: function(amount){\r\n\t\t\t\t\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\tfor(var i = 0; i < amount + 1; i++){\r\n\t\t\t\t\tlet blankEntry = _this.getEmpty(i);\r\n\t\t\t\t\ttmp.push(_this._data[i] || blankEntry);\r\n\t\t\t\t}\r\n\t\t\t\t_this._data = tmp;\r\n\t\t\t\t_this.show();\r\n\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tthis._dbList.setSearch(search);\r\n\tthis._dbList.show(_this._currentId);\r\n\tif(listScroll){\r\n\t\tthis._dbList.setScroll(listScroll);\r\n\t}\r\n\t\r\n\tdocument.querySelector(\".edit_pane .main_info\").scrollTop = currentScroll;\r\n\tthis.hook();\r\n\t\r\n}\r\n\r\n\r\nPatternUI.prototype.hook = function(){\r\n\tlet _this = this;\r\n\t_this._container.querySelector(\".edit_pane .controls .save\").addEventListener(\"click\", function(){\r\n\t\t_this.save();\r\n\t\t_this._mainUIHandler.clearModified();\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\".edit_pane .controls .cancel\").addEventListener(\"click\", function(){\r\n\t\tvar c = true;\r\n\t\tif(_this._mainUIHandler.isModified()){\r\n\t\t\tc = confirm(\"Discard all unsaved changes?\");\r\n\t\t}\r\n\t\tif(c){\r\n\t\t\t_this._data = null;\r\n\t\t\t_this.show();\t\r\n\t\t\t_this._mainUIHandler.clearModified();\r\n\t\t}\t\t\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\"#prop_name\").addEventListener(\"change\", function(){\r\n\t\tlet currentEntry = _this.getCurrentEntry();\r\n\t\tcurrentEntry.name = this.value;\r\n\t\t_this.show();\r\n\t\t_this._mainUIHandler.setModified();\r\n\t});\r\n\t\r\n\tvar controls = this._container.querySelectorAll(\"#main_shape .block\");\r\n\tcontrols.forEach(function(control){\r\n\t\tcontrol.addEventListener(\"click\", function(){\r\n\t\t\tvar column = this.getAttribute(\"data-column\") * 1;\r\n\t\t\tvar row = this.getAttribute(\"data-row\") * 1;\r\n\t\t\t\r\n\t\t\tif(_this._currentShapeLookup[column] && _this._currentShapeLookup[column][row]){\r\n\t\t\t\tdelete _this._currentShapeLookup[column][row];\r\n\t\t\t} else {\r\n\t\t\t\tif(!_this._currentShapeLookup[column]){\r\n\t\t\t\t\t_this._currentShapeLookup[column] = {};\r\n\t\t\t\t}\r\n\t\t\t\t_this._currentShapeLookup[column][row] = true;\r\n\t\t\t}\r\n\t\t\t_this.packTiles();\r\n\t\t\t_this.show();\r\n\t\t\t\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n\t_this.hookPageControls();\r\n}\r\n\r\nPatternUI.prototype.hookPageControls = function(){\r\n\tlet _this = this;\r\n\r\n\t\r\n}\r\n\t\t\t\r\nPatternUI.prototype.getEmpty = function(id){\r\n\treturn {\r\n\t  \"id\": id,\r\n\t  \"name\": \"\",\r\n\t  \"tiles\": [],\r\n\t  \"meta\": {}\r\n\t};\r\n}\t\t\t\r\n\t\t\n\n//# sourceURL=webpack://src/./js/Editor/PatternUI.js?");

/***/ }),

/***/ "./js/Editor/SRW_editor.js":
/*!*********************************!*\
  !*** ./js/Editor/SRW_editor.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SRWEditor)\n/* harmony export */ });\n/* harmony import */ var _style_editor_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style/editor.css */ \"./js/Editor/style/editor.css\");\n/* harmony import */ var _style_editor_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_editor_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _FaceManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FaceManager.js */ \"./js/Editor/FaceManager.js\");\n/* harmony import */ var _AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AllyPilotUI.js */ \"./js/Editor/AllyPilotUI.js\");\n/* harmony import */ var _EnemyPilotUI_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EnemyPilotUI.js */ \"./js/Editor/EnemyPilotUI.js\");\n/* harmony import */ var _MechUI_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MechUI.js */ \"./js/Editor/MechUI.js\");\n/* harmony import */ var _WeaponUI_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WeaponUI.js */ \"./js/Editor/WeaponUI.js\");\n/* harmony import */ var _PatternUI_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PatternUI.js */ \"./js/Editor/PatternUI.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction SRWEditor(){\r\n\tthis._currentEditor = \"attack_editor\";\r\n\tthis._initialized = false;\r\n\t\r\n\tthis._referenceAnimationBuilder = new BattleAnimationBuilder();\r\n\t\r\n\t\r\n\twindow.addEventListener(\"resize\", function(){\r\n\t\tGraphics.updatePreviewWindowWidth();\t\r\n\t});\r\n}\r\n\r\nSRWEditor.prototype.initTitles = function(){\r\n\tif(!this._initialized){\r\n\t\tthis._initialized = true;\r\n\t\tthis._title = EDITORSTRINGS.GENERAL.title;\r\n\t\tthis._editorData = {\t\t\r\n\t\t\tweapon_editor: {title: EDITORSTRINGS.GENERAL.weapon_editor_label, func: this.showWeaponEditor},\r\n\t\t\tmech_editor: {title: EDITORSTRINGS.GENERAL.mech_editor_label, func: this.showMechEditor},\r\n\t\t\tenemy_pilot_editor: {title: EDITORSTRINGS.GENERAL.enemy_pilot_editor_label, func: this.showEnemyPilotEditor},\r\n\t\t\tally_pilot_editor: {title: EDITORSTRINGS.GENERAL.ally_pilot_editor_label, func: this.showAllyPilotEditor},\r\n\t\t\tpattern_editor: {title: EDITORSTRINGS.GENERAL.pattern_editor_label, func: this.showPatternEditor},\r\n\t\t\tattack_editor: {title: EDITORSTRINGS.GENERAL.attack_editor_label, func: this.showAttackEditor},\r\n\t\t\tenvironment_editor: {title: EDITORSTRINGS.GENERAL.environment_editor_label, func: this.showEnvironmentEditor},\r\n\t\t\tbattle_text_editor: {title: EDITORSTRINGS.GENERAL.battle_text_editor_label, func: this.showBattleTextEditor},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.getAnimationDefs = function(){\r\n\treturn this._referenceAnimationBuilder.getDefinitions();\r\n}\r\n\r\nSRWEditor.prototype.init = function(){\r\n\tvar _this = this;\r\n\t/*var head  = document.getElementsByTagName('head')[0];\r\n\tvar link  = document.createElement('link');\r\n\tlink.rel  = 'stylesheet';\r\n\tlink.type = 'text/css';\r\n\tlink.href = 'js/plugins/editor/editor.css';\r\n\tlink.media = 'all';\r\n\thead.appendChild(link);*/\r\n\t\r\n\t_this.initTitles();\r\n\r\n\t$gameSystem.initFactionInfo(); //init faction info, needed to correctly display enemy battle text in animation preview\r\n\t\r\n\t_this._svgPath = \"svg/editor/\";\r\n\t\r\n\t_this._contentDiv = document.createElement(\"div\");\r\n\t_this._contentDiv.id = \"srw_editor\";\r\n\tdocument.body.appendChild(_this._contentDiv);\r\n\t\r\n\t$battleSceneManager.init(true);\t\r\n\t\r\n\tthis._battleTextBuilder = $battleSceneManager.getBattleTextBuilder();\r\n\tthis._animationBuilder = $battleSceneManager.getAnimationBuilder();\r\n\tthis._environmentBuilder = $battleSceneManager.getEnvironmentBuilder();\r\n\t\r\n\t_this._battleTextBuilder.isLoaded().then(function(){\r\n\t\t_this._battleTextBuilder.saveBackup();\t\r\n\t});\r\n\t_this._animationBuilder.isLoaded().then(function(){\r\n\t\t_this._animationBuilder.saveBackup();\t\r\n\t});\r\n\t_this._environmentBuilder.isLoaded().then(function(){\r\n\t\t_this._environmentBuilder.saveBackup();\t\r\n\t});\r\n\r\n\t\t\r\n\t$gameSystem.skyBattleOffset = 0;\r\n\t\r\n\t$gameSystem.battleBg = \"mountains2\";\r\n\t//$gameSystem.battleParallax1 = \"Empty\";\r\n\t\r\n\t$gameSystem.battleParallax1 = \"trees1\";\r\n\t$gameSystem.battleParallax2 = \"trees2\";\r\n\t$gameSystem.battleParallax3 = \"mountains1\";\r\n\t\r\n\t$gameSystem.floorParallax1 = \"dirt1\";\r\n\t$gameSystem.floorParallax2 = \"dirt2\";\r\n\t\r\n\t//$gameSystem.battleFloor = \"floor1\";\r\n\t$gameSystem.battleSkyBox = \"dusk\";\r\n\t\r\n\t$gameSystem.skyBattleBg = \"Sky\";\r\n\t$gameSystem.skyBattleParallax1 = \"Empty\";\r\n\t\r\n\t$gameSystem.setSubBattlePhase('after_battle');\r\n\t\r\n\t_this._previewAttackHits = true;\r\n\t_this._previewAttackDestroys = false;\r\n\t_this._enemySideAttack = false;\r\n\t_this._playBGM = true;\r\n\t_this._playUntil = -1;\r\n\t_this._fastForward = false;\r\n\t_this._currentDefinition = 0;\r\n\t_this._currentEnvironmentDefinition = 0;\r\n\t_this._sequenceTypes = [\r\n\t\t{name: \"Main\", id: \"mainAnimation\"},\r\n\t\t{name: \"Hit\", id: \"onHit\"},\t\t\r\n\t\t{name: \"Hit Overwrite\", id: \"onHitOverwrite\"},\t\t\r\n\t\t{name: \"Hit Twin\", id: \"onHitTwin\"},\t\t\r\n\t\t{name: \"Miss\", id: \"onMiss\"},\r\n\t\t{name: \"Miss Overwrite\", id: \"onMissOverwrite\"},\r\n\t\t{name: \"Miss Twin\", id: \"onMissTwin\"},\r\n\t\t{name: \"Destroy\", id: \"onDestroy\"},\r\n\t\t{name: \"Destroy Overwrite\", id: \"onDestroyOverwrite\"},\r\n\t\t{name: \"Destroy Twin\", id: \"onDestroyTwin\"},\r\n\t\t\r\n\t\t{name: \"No Destroy(after hit)\", id: \"onNoDestroy\"},\r\n\t\t{name: \"No Destroy(after hit) Overwrite\", id: \"onNoDestroyOverwrite\"},\r\n\t\t{name: \"No Destroy Twin(after hit)\", id: \"onNoDestroyTwin\"},\r\n\t];\r\n\t\r\n\t_this._specialTargets = [\r\n\t\t{name: \"active_main\", id: \"active_main\"},\r\n\t\t{name: \"active_target\", id: \"active_target\"},\r\n\t\t{name: \"active_target_twin\", id: \"active_target_twin\"},\r\n\t\t{name: \"Camera\", id: \"Camera\"},\r\n\t];\r\n\t\r\n\t_this._specialLights = [\r\n\t\t{name: \"scene_light\", id: \"scene_light\"},\r\n\t];\r\n\t\r\n\t_this._easingFunctions = {\r\n\t\t\"sine\": \"SineEase\",\t\t\r\n\t\t\"circle\": \"CircleEase\",\r\n\t\t\"back\": \"BackEase\",\r\n\t\t\"bounce\": \"BounceEase\",\r\n\t\t\"cubic\": \"CubicEase\",\r\n\t\t\"elastic\": \"ElasticEase\",\r\n\t\t\"exponential\": \"ExponentialEase\",\r\n\t\t\"power\": \"PowerEase\",\r\n\t\t\"quadratic\": \"QuadraticEase\",\r\n\t\t\"quartic\": \"QuarticEase\",\r\n\t\t\"quintic\": \"QuinticEase\"\r\n\t};\r\n\t\r\n\t_this._easingModes = {\r\n\t\t0: \"In\", \r\n\t\t1: \"Out\",\r\n\t\t2: \"InOut\"\r\n\t};\r\n\t\r\n\t_this._commandDisplayInfo = {\r\n\t\tset_blend_color: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"r\", \"g\", \"b\"],\r\n\t\t\tdesc: \"Set the blend color for the target.\"\r\n\t\t},\r\n\t\tfade_in_textbox: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"immediate\"],\r\n\t\t\tdesc: \"Fade in the textbox. No effect if the textbox is currently shown.\"\r\n\t\t},\r\n\t\tfade_out_textbox: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"immediate\"],\r\n\t\t\tdesc: \"Fade out the textbox.\"\r\n\t\t},\r\n\t\teffect_shockwave: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"x_fraction\", \"y_fraction\", \"shockwave_intensity\"],\r\n\t\t\tdesc: \"Play the shockwave effect at the specified screen position.\"\r\n\t\t},\r\n\t\teffect_screen_shader: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"shaderName\", \"shaderDuration\",\"shaderParam0\",\"shaderParam1\", \"shaderParam2\", \"shaderParam4\", \"shaderParam5\", \"shaderParam6\", \"shaderParam7\", \"shaderParam8\", \"shaderParam9\"],\r\n\t\t\tdesc: \"Play custom screen shader effect.\"\r\n\t\t},\r\n\t\tkill_active_animations: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Immediately stop all running animations.\"\r\n\t\t},\r\n\t\tteleport: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"forceAutoFlipX\", \"position\"],\r\n\t\t\tdesc: \"Immediately move an object.\"\r\n\t\t},\r\n\t\trotate_to: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"aroundPivot\", \"fixMirrored\", \"rotation\"],\r\n\t\t\tdesc: \"Immediately set to rotation of an object.\"\r\n\t\t},\r\n\t\ttranslate: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"relative\", \"startPosition\", \"position\", \"duration\", \"easingFunction\", \"easingMode\", \"hide\", \"catmullRom\"],\r\n\t\t\tdesc: \"Move an object from the start position to the end position.\"\r\n\t\t},\r\n\t\trotate: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"aroundPivot\", \"fixMirrored\", \"startRotation\", \"rotation\", \"duration\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Rotate an object from the start rotation to the end rotation.\"\r\n\t\t},\r\n\t\tresize: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"startSize\", \"endSize\", \"duration\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Change the size of an object between the start size and end size.\"\r\n\t\t},\r\n\t\tflip: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"x\", \"y\"],\r\n\t\t\tdesc: \"Flip the texture of an object.\"\r\n\t\t},\r\n\t\tshake: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"magnitude_x\", \"speed_x\", \"magnitude_y\", \"speed_y\", \"magnitude_z\", \"speed_z\", \"duration\", \"fadeInTicks\", \"fadeOutTicks\", \"magnitude_variance\", \"speed_variance\"],\r\n\t\t\tdesc: \"Shake the screen on the x and y axis with the specified magnitude.\"\r\n\t\t},\r\n\t\tset_opacity_texture: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\"],\r\n\t\t\tdesc: \"Set an opacity texture for the target.\"\r\n\t\t},\r\n\t\tregister_alias: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"id\"],\r\n\t\t\tdesc: \"Register an alias for the target.\"\r\n\t\t},\r\n\t\tclear_opacity_texture: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Clear any opacity texture the target currently has.\"\r\n\t\t},\r\n\t\tcreate_clone: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"position\", \"name\"],\r\n\t\t\tdesc: \"Create a clone of the target with reference id name.\"\r\n\t\t},\r\n\t\t/*set_camera_target: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Lock the camera on an object in the scene. The camera will always look straight at the object while locked.\"\r\n\t\t},*/\t\r\n\t\r\n\t\tset_damage_text: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show damage text for the current target. This command is automatically called during the reset_position command.\"\r\n\t\t},\r\n\t\t\r\n\t\tset_evade_text: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show evade text for the current target. This command is automatically called during the reset_position command.\"\r\n\t\t},\r\n\t\t\r\n\t\tset_destroyed_text: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show destroyed text for the current target. This command is automatically called during the destroy command.\"\r\n\t\t},\r\n\t\t\r\n\t\tset_attack_text: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"id\"],\r\n\t\t\tparamAlias: {id: \"id_text\"},\r\n\t\t\tdesc: \"Show attack text for the current target.\"\r\n\t\t},\r\n\t\tclear_attack_text: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Clear the text box.\"\r\n\t\t},\r\n\t\tshow_support_defender_text: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show text for the incoming support defender. This command is automatically called during the next_phase command if applicable.\"\r\n\t\t},\r\n\t\tenable_support_defender: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Switch out the defender for the support defender. This command is automatically called during the next_phase command if applicable.\"\r\n\t\t},\r\n\t\t\r\n\t\tdisable_support_defender: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Switch out the support defender for the defender. This command is automatically called after an attack if applicable.\"\r\n\t\t},\t\t\r\n\t\tfade_in_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"startFade\", \"endFade\", \"duration\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Fade in the target background.\"\r\n\t\t},\t\r\n\t\tfade_in_shadows: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"startFade\", \"endFade\", \"duration\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Fade in the unit shadows.\"\r\n\t\t},\t\t\t\t\r\n\t\tset_hard_shadows: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"hard\"],\r\n\t\t\tdesc: \"If set to 1 shadows will render without alpha blending.\"\r\n\t\t},\t\r\n\t\tfade_swipe: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"time\"],\r\n\t\t\tdesc: \"Swipe the screen to black. This command is automatically called during the next_phase command.\"\r\n\t\t},\r\n\t\tfade_white: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"time\", \"speed\", \"speedOut\"],\r\n\t\t\tdesc: \"Fade the screen to white and from white.\"\r\n\t\t},\t\t\r\n\t\tupdateBgMode: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Update the current default backgrounds to match the target. This command is automatically called during the next_phase command.\"\r\n\t\t},\t\r\n\t\tnext_phase: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"cleanUpCommands\", \"commands\"],\r\n\t\t\tdesc: \"Fade the screen to black and set the scene up for the second phase of the attack. This command automatically brings the support defender if available and sets up the default background to match the target.\"\r\n\t\t},\r\n\t\tdodge_pattern: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"commands\"],\r\n\t\t\tdesc: \"Show the target's doging action. The commands provided as parameters define the evade movement of the target. If the target has a special dodge action, like Double Image, the matching animation will be played instead.\"\r\n\t\t},\r\n\t\tspawn_sprite: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"position\", \"size\", \"frameSize\", \"animationFrames\", \"animationLoop\", \"animationDelay\"],\r\n\t\t\tdesc: \"Create a new sprite.\"\r\n\t\t},\r\n\t\tremove_sprite: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove a sprite.\"\r\n\t\t},\r\n\t\tset_light_color: {\r\n\t\t\tisLightCommand: true,\r\n\t\t\thasTarget: true,\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"r\", \"g\", \"b\", \"duration\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Set the groundColor and diffuse color of specified light. scene_light is the global hemispheric light\"\r\n\t\t},\r\n\t\tcreate_point_light: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"parent\", \"position\", \"lightIntensity\", \"r\", \"g\", \"b\", \"includeOnly\"],\r\n\t\t\tdesc: \"Create a point light\"\r\n\t\t},\r\n\t\tcreate_hemi_light: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"parent\", \"position\", \"r\", \"g\", \"b\", \"includeOnly\"],\r\n\t\t\tdesc: \"Create a hemispheric light\"\r\n\t\t},\r\n\t\texclude_from_light: {\r\n\t\t\tisLightCommand: true,\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"excludedObj\"],\r\n\t\t\tdesc: \"Excluded a specific object form receiving light from the target light\"\r\n\t\t},\r\n\t\ttoggle_frustum_culling: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"state\"],\r\n\t\t\tdesc: \"Toggle frustum culling on and off\"\r\n\t\t},\r\n\t\tcreate_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"isPilotCutin\", \"renderTargetId\", \"path\", \"parent\", \"position\", \"size\", \"alpha\", \"billboardMode\", \"rotation\", \"lineCount\", \"columnCount\", \"animationLoop\", \"animationFrames\", \"animationDelay\", \"holdFrame\", \"scrollSpeed\", \"clamp\", \"uScale\", \"vScale\", \"uOffset\", \"vOffset\"],//, \"unlit\", \"frameSize\", \r\n\t\t\taliases: {\"animationLoop\": \"loopFromFrame\", \"animationFrames\": \"loopToFrame\"},\r\n\t\t\tdesc: \"Create a new background.\"\r\n\t\t},\r\n\t\tcreate_render_target: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"position\", \"rotation\"],//, \"unlit\", \"frameSize\", \r\n\t\t\tdesc: \"Create a new render target + camera.\"\r\n\t\t},\t\t\r\n\t\tset_bg_scroll_speed: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"scrollSpeed\", \"duration\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Set the scrolling speed of a spawned background.\"\r\n\t\t},\r\n\t\tcreate_movie_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"parent\", \"position\", \"size\", \"alpha\", \"billboardMode\", \"rotation\"],\r\n\t\t\taliases: {\"animationLoop\": \"loopFromFrame\", \"animationFrames\": \"loopToFrame\"},\r\n\t\t\tdesc: \"Create a new background that plays the movie file with the specified path on it.\"\r\n\t\t},\r\n\t\tremove_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove a background.\"\r\n\t\t},\r\n\t\tcreate_dragonbones_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"armatureName\", \"animName\", \"parent\", \"position\", \"size\", \"canvasWidth\", \"canvasHeight\"],\r\n\t\t\tdesc: \"Create a new background with a Dragonbones animation running on it.\"\r\n\t\t},\t\t\r\n\t\tremove_dragonbones_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove dragonbones background.\"\r\n\t\t},\t\r\n\t\tset_dragonbones_bg_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"animName\"],\r\n\t\t\tdesc: \"Set dragonbones background animation.\"\r\n\t\t},\r\n\t\tcreate_spriter_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\",  \"animName\", \"parent\", \"position\", \"canvasWidth\", \"canvasHeight\", \"size\"],\r\n\t\t\tdesc: \"Create a new background with a Spriter animation running on it.\"\r\n\t\t},\t\r\n\t\tcreate_spine_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\",  \"animName\", \"parent\", \"position\", \"canvasWidth\", \"canvasHeight\", \"size\"],\r\n\t\t\tdesc: \"Create a new background with a Spine animation running on it.\"\r\n\t\t},\r\n\t\tcreate_model: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"parent\", \"moveOriginToParent\", \"position\", \"rotation\", \"size\"],//\"animGroup\",  \"animName\", , \"unlit\"\r\n\t\t\taliases: {\"moveOriginToParent\": \"syncOrigin\"},\r\n\t\t\tdesc: \"Create a new model.\"\r\n\t\t},\t\r\n\t\tcreate_unit_model: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"mechId\", \"position\"],//\"animGroup\",  \"animName\", , \"unlit\"\r\n\t\t\tdesc: \"Spawn a new model for the specified mech id.\"\r\n\t\t},\r\n\t\tcreate_model_instance: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"parent\"],\r\n\t\t\tdesc: \"Create an instance of a loaded model.\"\r\n\t\t},\r\n\t\tremove_spriter_bg: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove Spriter background.\"\r\n\t\t},\t\r\n\t\tset_spriter_bg_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"animName\"],\r\n\t\t\tdesc: \"Set Spriter background animation.\"\r\n\t\t},\t\t\r\n\t\tcreate_layer: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"isBackground\", \"frameSize\", \"lineCount\", \"columnCount\", \"animationFrames\", \"animationLoop\", \"animationDelay\"],\r\n\t\t\tdesc: \"Create a new layer.\"\r\n\t\t},\r\n\t\tcreate_command_environment: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"id\"],\r\n\t\t\tdesc: \"Display the specified environment.\"\r\n\t\t},\r\n\t\tset_rendering_group: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"id\"],\r\n\t\t\tdesc: \"Set the target's rendering group(default 2, front layer 3, back layer 1).\"\r\n\t\t},\r\n\t\tcreate_target_environment: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Display the current environment for the specified target(should be active_main or active_target).\"\r\n\t\t},\r\n\t\tremove_layer: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove a layer.\"\r\n\t\t},\t\r\n\t\tcreate_sky_box: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"color\"],\r\n\t\t\tdesc: \"Create a new sky box.\"\r\n\t\t},\r\n\t\tremove_sky_box: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove a sky box.\"\r\n\t\t},\t\r\n\t\tplay_effekseer: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"path\", \"position\", \"scale\", \"speed\", \"rotation\", \"parent\", \"attachForShake\", \"isForeground\", \"autoRotate\", \"flipZ\", \"ignoreParentRotation\"],\r\n\t\t\tdesc: \"Play a predefined effekseer effect.\"\r\n\t\t},\r\n\t\tset_effekseer_color: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"r\", \"g\", \"b\", \"a\"],\r\n\t\t\tdesc: \"Set the global color of an effekseer effect.\"\r\n\t\t},\t\t\r\n\t\tremove_effekseer_parent: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove the parent of an effekseer effect if it has one.\"\r\n\t\t},\r\n\t\tstop_matrix_animations: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove all matrix animation(rotate, translate) applied to the target.\"\r\n\t\t},\r\n\t\tshow_barrier: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Flashes or breaks the barrier for the target.\"\r\n\t\t},\t\t\r\n\t\thide_effekseer: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Hide a running effekseer effect.\"\r\n\t\t},\r\n\t\tstop_effekseer_root: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Stop the root of the effekseer effect, letting the particle system fade out.\"\r\n\t\t},\r\n\t\tset_effekseer_paused:{\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"paused\"],\r\n\t\t\tdesc: \"Pause or unpause the effekseer effect.\"\r\n\t\t}, \r\n\t\tsend_effekseer_trigger: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"id\"],\r\n\t\t\tdesc: \"Send the trigger with the specified id to the target effekseer effect.\"\r\n\t\t},\r\n\t\tset_effekseer_frame: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"frame\"],\r\n\t\t\tdesc: \"Set the target effekseer effect to the specified frame.\"\r\n\t\t},\r\n\t\tset_effekseer_attract_point: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"position\"],\r\n\t\t\tdesc: \"Set the location of the attraction point for the effekseer context of the target handle.\"\r\n\t\t},\t\t\r\n\t\tplay_rmmv_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"animId\", \"position\", \"scaleX\", \"scaleY\", \"loop\", \"noFlash\", \"noSfx\", \"delay\"],\r\n\t\t\tdesc: \"Play RMMV animation.\"\r\n\t\t},\t\t\r\n\t\tremove_rmmv_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove a running RMMV animation.\"\r\n\t\t},\r\n\t\tstop_rmmv_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Stop a running RMMV animation after the next loop.\"\r\n\t\t},\r\n\t\tplay_rmmv_screen_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"animId\", \"position\", \"scaleX\", \"scaleY\", \"loop\", \"noFlash\", \"noSfx\", \"delay\"],\r\n\t\t\tdesc: \"Play RMMV screen animation.\"\r\n\t\t},\t\t\r\n\t\tremove_rmmv_screen_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove a running RMMV screen animation.\"\r\n\t\t},\r\n\t\tstop_rmmv_screen_anim: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Stop a running RMMV screen animation after the next loop.\"\r\n\t\t},\r\n\t\tplay_movie: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"path\", \"muted\", \"fade_in\"],\r\n\t\t\tdesc: \"Play a movie file.\"\r\n\t\t},\t\r\n\t\tstop_movie: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Stop an active movie.\"\r\n\t\t},\r\n\t\tfade_out_bgm: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"duration\"],\r\n\t\t\tdesc: \"Fade out the battle music.\"\r\n\t\t},\r\n\t\tfade_out_se: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"seId\", \"duration\"],\r\n\t\t\tdesc: \"Fade out the sound effect with the specified id.\"\r\n\t\t},\r\n\t\tfade_in_bgm: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"duration\"],\r\n\t\t\tdesc: \"Fade in the battle music.\"\r\n\t\t},\r\n\t\tset_sprite_index: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"index\"],\r\n\t\t\tdesc: \"Set the frame of a sprite.\"\r\n\t\t},\r\n\t\tset_sprite_animation: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"name\", \"animationFrames\", \"holdFrame\", \"frameSize\", \"lineCount\", \"columnCount\", \"animationLoop\", \"animationDelay\"],\r\n\t\t\tdesc: \"Set the source of a sprite and specify animation details.\"\r\n\t\t},\r\n\t\tset_sprite_frame: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"name\", \"snap\", \"loop\", \"playAll\", \"speed\", \"from\", \"to\", \"isPassive\"],\r\n\t\t\tdesc: \"Set the source frame of a sprite(in, out, dodge, hurt, main).\"\r\n\t\t},\r\n\t\tset_model_animation: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"name\", \"snap\", \"loop\", \"playAll\", \"speed\", \"from\", \"to\", \"isPassive\"],\r\n\t\t\tdesc: \"Set the animation by name of a model specified by target.\"\r\n\t\t},\r\n\t\thide_attachment: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"attachId\"],\r\n\t\t\tdesc: \"Show the attachment with the specified name for the target model.\"\r\n\t\t},\r\n\t\tshow_attachment: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"attachId\"],\r\n\t\t\tdesc: \"Hide the attachment with the specified name for the target model.\"\r\n\t\t},\r\n\t\thide_sprite: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Hide a sprite.\"\r\n\t\t},\r\n\t\tshow_sprite: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show a sprite.\"\r\n\t\t},\r\n\t\thide_bgs: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Hide the default background elements.\"\r\n\t\t},\r\n\t\tshow_bgs: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show the default background elements.\"\r\n\t\t},\r\n\t\treset_position: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"duration\", \"noDamage\", \"noDamageText\", \"noReposition\"],\r\n\t\t\tdesc: \"Reset the position of the target to the default position.\"\r\n\t\t},\r\n\t\tdestroy: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"noWait\"],\r\n\t\t\tdesc: \"Play the destruction animation of the target.\"\r\n\t\t},\r\n\t\tshow_damage: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Show the damage the target has taken for the current attack.\"\r\n\t\t},\r\n\t\tdrain_hp_bar: {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [\"percent\",\"duration\"],\r\n\t\t\tdesc: \"Show damage on the HP bar.\"\r\n\t\t},\r\n\t\tdrain_en_bar: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"percent\",\"duration\"],\r\n\t\t\tdesc: \"Show EN spent.\"\r\n\t\t},\r\n\t\tplay_se: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"seId\",\"pitch\",\"volume\"],\r\n\t\t\tdesc: \"Play a sound effect.\"\r\n\t\t},\r\n\t\tkill_se:  {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Mute the target sound effect or all playing sound effects if none specified.\"\r\n\t\t},\r\n\t\tshow_portrait_noise: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Fade in static on character portrait.\"\r\n\t\t},\r\n\t\thide_portrait_noise: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Remove static on character portrait.\"\r\n\t\t},\r\n\t\tset_bg_scroll_ratio: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"ratio\", \"smooth\", \"duration\"],\r\n\t\t\tdesc: \"Set the speed at which the backgrounds scroll.\"\r\n\t\t},\r\n\t\tset_animation_ratio: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"ratio\", \"smooth\", \"duration(ms)\", \"easingFunction\", \"easingMode\"],\r\n\t\t\tdesc: \"Set the speed at the scene is animated.\"\r\n\t\t},\r\n\t\thold_tick: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"duration(ms)\"],\r\n\t\t\tdesc: \"This animation tick will be held for the specified duration.\"\r\n\t\t},\r\n\t\ttoggle_bg_scroll: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"Invert the current background scroll direction.\"\r\n\t\t},\r\n\t\tinclude_animation: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"battleAnimId\", \"sequenceId\"],\r\n\t\t\tdesc: \"Include the main track of the animation with id battleAnimId starting at the current tick +1.\"\r\n\t\t},\r\n\t\tmerge_complete_animation: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"battleAnimId\"],\r\n\t\t},\r\n\t\tset_shadow_floor: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"floor\"],\r\n\t\t},\t\t\r\n\t\tset_text_provider: {\r\n\t\t\thasTarget: false,\r\n\t\t\tparams: [\"id\"],\r\n\t\t\tdesc: \"Set the actor id used for fetching text to specified id for the remainder of the animation.\"\r\n\t\t},\r\n\t};\r\n\t\r\n\r\n\t\t_this._commandDisplayInfo[\"play_rmmv_anim\"].params.push(\"isFront\");\r\n\t\t_this._commandDisplayInfo[\"create_bg\"].params.push(\"isFront\");\r\n\t\t_this._commandDisplayInfo[\"create_movie_bg\"].params.push(\"isFront\");\r\n\t\r\n\t\t\r\n\t\r\n\t\r\n\t_this._paramTooltips = {\r\n\t\tr: \"The red component of a color 0-255\",\r\n\t\tg: \"The green component of a color 0-255\",\r\n\t\tb: \"The blue component of a color 0-255\",\r\n\t\ta: \"The alpha component of a color 0-255\",\r\n\t\tx_fraction: \"A screen space position defined by a percentage of the width of the screen.\",\r\n\t\ty_fraction: \"A screen space position defined by a percentage of the height of the screen.\",\r\n\t\tshaderName: \"The name of the shader effect to apply\",\r\n\t\tshaderDuration: \"How the effect is applied for in seconds\",\r\n\t\tshaderParam0: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam1: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam2: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam3: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam4: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam5: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam6: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam7: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam8: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshaderParam9: \"A parameter for the custom shader. Defined as <param type>:<param name>=<param value>\",\r\n\t\tshockwave_intensity: \"The intensity of the shockwave effect.\",\r\n\t\tlightIntensity: \"The intensity of the light\",\r\n\t\texcludedObj: \"The object that will be excluded from the target light source\",\r\n\t\tstate: \"The new state for the setting\",\r\n\t\tincludeOnly: \"Specifiy one target object that will be the sole recipient of this light source\",\r\n\t\timmediate: \"If 1 the change will be instant.\",\r\n\t\tposition: \"A position defined by an x, y and z coordinate.\",\r\n\t\tarmatureName: \"The name of Armature that will be shown\", \r\n\t\tanimGroup: \"The name of the group of the model's animations\",\r\n\t\tanimName: \"The name of the animation that will be shown\",\r\n\t\tmoveOriginToParent: \"If 1 set the origin of the object to the parent's absolute position\",\r\n\t\tmechId: \"The numeric id of the target mech.\",\r\n\t\tunlit: \"If 1 the target will not receive influence from lights\",\r\n\t\tcanvasWidth: \"The width of the rendering surface for the external renderer\", \r\n\t\tcanvasHeight: \"The height of the rendering surface for the external renderer\",\r\n\t\tparent: \"The id of the object that will be the parent of this object.\",\r\n\t\trotation: \"A rotation defined by an x, y and z component. The rotations are described with radian values.\",\r\n\t\trelative: \"If 1 the animation positions will be relative to the target's current position. The specified start position will be ignored!\",\r\n\t\tstartPosition: \"A position defined by an x, y and z coordinate.\",\r\n\t\tduration: \"The duration of the command in animation ticks.\",\r\n\t\t\"duration(ms)\": \"The duration of the command in milliseconds.\",\t\t\r\n\t\teasingFunction: \"Describes how an object moves from point a to point b. If not specified the object will move linearly.\",\r\n\t\teasingMode: \"In, out or inout. Parameterizes the easingFunction.\",\r\n\t\thide: \"Hide the target object after the command has finished.\",\r\n\t\tcatmullRom: \"Describes two addtional points for a Catmull-Rom spline.\",\r\n\t\tstartRotation: \"A rotation defined by an x, y and z component. The rotations are described with radian values.\",\r\n\t\taroundPivot: \"If 1 the rotation will be done around the pivot helper instead of the element origin. Only avaialable for unit sprites. If set Z index will always be mirrored for enemy side animations.\",\r\n\t\tfixMirrored: \"If 1 the y rotation will not be inverted if the target is a mirrored effekseer effect\",\r\n\t\tforceAutoFlipX: \"If 1 the target will have the direction flip x direction applied even if it is a mirrored effekseer effect\",\r\n\t\tstartSize: \"The initial size of the target object.\",\r\n\t\tendSize: \"The final size of the target object.\",\r\n\t\tx: \"If 1 the object will be flipped along its x-axis.\",\r\n\t\ty: \"If 1 the object will be flipped along its y-axis.\",\r\n\t\tmagnitude_x: \"The severity of the shaking effect along the x-axis.\",\r\n\t\tmagnitude_y: \"The severity of the shaking effect along the y-axis.\",\r\n\t\tmagnitude_z: \"The severity of the shaking effect along the z-axis.\",\r\n\t\tspeed_x: \"The speed of the shaking effect along the x-axis\",\r\n\t\tspeed_y: \"The speed of the shaking effect along the y-axis\",\r\n\t\tspeed_z: \"The speed of the shaking effect along the z-axis\",\r\n\t\tfadeInTicks: \"The number of ticks the shake effect will ramp up for\",\r\n\t\tfadeOutTicks: \"The number of ticks the shake effect will ramp down for\",\r\n\t\tmagnitude_variance: \"How much the magnitude varies over time\",\r\n\t\tspeed_variance: \"With what speed the magnitude variance is applied\",\r\n\t\tstartFade: \"The initial opacity of the object, between 0-1.\",\r\n\t\thard: \"If 1 alphablending will be turned off, otherwise alphablending will be enabled\",\r\n\t\tendFade: \"The final opacity of the object, between 0-1.\",\r\n\t\ttime: \"The duration of the command in ticks.\",\r\n\t\tspeed: \"The speed of the effect.\",\r\n\t\tspeedIn: \"The speed of the fadein: 'fast' or 'slow'.\",\r\n\t\tspeedOut: \"The speed of the fadeout: 'fast' or 'slow'.\",\r\n\t\tcleanUpCommands: \"A list of commands to be run to clean up objects before the next phase.\",\r\n\t\tcommands: \"A list of commands to be run to during the phase transition to set up the next phase.\",\r\n\t\tanimationFrames: \"The number of animation frames in the spritesheet.\",\r\n\t\tsnap: \"If set to 1 no blending will be done into the new sprite frame(if applicable)\",\r\n\t\tplayAll: \"If set to 1 every animation available in the model will be played at once\",\r\n\t\tisPassive: \"If set to 1 the animation will play alongside other model animations\",\r\n\t\tfrom: \"The frame to start playing from\",\r\n\t\tto: \"The frame to play until\",\r\n\t\tattachId: \"The name/id of the attachment\",\r\n\t\tholdFrame: \"If 1 the sprite will hold the final frame of the animation, ignored if animation looping is enabled.\",\r\n\t\tscrollSpeed: \"Sets the horizontal scroll speed of the background, use negative values to change the scroll direction\",\r\n\t\tuScale: \"Sets the horizontal scale of the UV(default 1)\",\r\n\t\tvScale: \"Sets the vertical scale of the UV(default 1)\",\r\n\t\tuOffset: \"Sets the horizontal offset of the UV(default 1)\",\r\n\t\tvOffset: \"Sets the vertical offset of the UV(default 1)\",\r\n\t\tclamp: \"If 1 U Wrap will be set to clamp.\",\r\n\t\tnoWait: \"If 1 the engine will not wait for the destruction animation to complete.\",\r\n\t\tnoDamage: \"If 1 the damage number will not be shown\",\r\n\t\tnoDamageText: \"If 1 the quote for taking damage will not be shown\",\r\n\t\tnoReposition: \"If 1 the unit will not be moved back to its origin point(in screen space) and its sprite_frame will not be changed.\",\r\n\t\tanimationLoop: \"The animation frame from where to loop. 0 or empty to not loop.\",\r\n\t\tanimationDelay: \"The time between animation frames in ticks.\",\r\n\t\tpath: \"The file path of the asset.\",\r\n\t\tsize: \"The size of the asset. Use comma separated x,y dimensions for non-square sizes.\",\r\n\t\talpha: \"The alpha of the object.\",\r\n\t\tbillboardMode: \"Set the billboarding mode for the object: 'none' or 'full'\",\r\n\t\tisPilotCutin: \"If 1, path is ignored and the active main pilot's defined cutin is used\",\r\n\t\trenderTargetId: \"The id of the render target + camera that will render to this texture\",\r\n\t\tframeSize: \"The size of the frames in the spritesheet.\",\r\n\t\tlineCount: \"The number of lines in the spritesheet.\",\r\n\t\tcolumnCount: \"The number of columns in the spritesheet.\",\r\n\t\tisBackground: \"If 1 the layer will be a background layer.\",\r\n\t\tisForeground: \"If 1 the layer will render as render group 4, otherwise render group 2. Higher number render groups are drawn last.\",\r\n\t\tattachForShake: \"If 1 effect will be attached to the node that gets shaken during shake animations instead of the parent node.\",\r\n\t\tautoRotate: \"If 1 the effect will be automatically rotated for enemies.\",\r\n\t\tflipZ: \"If 1 the effect will have its z scale inverted.\",\r\n\t\tignoreParentRotation: \"If 1 the parent node's rotation will not be applied.\",\r\n\t\tcolor: \"The blend color for the skybox.\",\r\n\t\tscale: \"A scaling factor for the effect.\",\r\n\t\tscaleX: \"A scaling factor for the width of the effect.\",\r\n\t\tscaleY: \"A scaling factor for the height of the effect.\",\r\n\t\tindex: \"The new sprite index\",\r\n\t\tpercent: \"How much of the change to the value that should be shown. If the total change is 5000, specifying 50 will show 2500.\",\r\n\t\tseId: \"The name of the sound effect to play.\",\r\n\t\tpitch: \"The pitch to play the sound effect at.\",\r\n\t\tvolume: \"The volume to play the sound effect at.\",\r\n\t\tratio: \"The factor by which the scroll speed is multiplied.\",\r\n\t\tsmooth: \"If set to 1 the ratio change will be smoothed out over the specified duration.\",\r\n\t\tbattleAnimId: \"The id of the battle animation\",\r\n\t\tsequenceId: \"The attack animation sequence.\",\r\n\t\tanimId: \"The id of the RMMV animation.\",\r\n\t\tloop: \"If set to 1 the animation will continue looping.\",\r\n\t\tnoFlash: \"If set to 1 the flashing effects of the RMMV animation are not shown.\",\r\n\t\tframe: \"Specify a frame for an animation\",\r\n\t\tnoSfx: \"If set to 1 the built in sound effects of the animation will not play.\",\r\n\t\tdelay: \"The delay between frames of the animation, default 4.\",\r\n\t\tfps: \"The frames per second of the movie file\",\r\n\t\tmuted: \"If set to 1 the audio of the video is not played\",\r\n\t\tfade_in: \"Number of frames the movie will fade in for\",\r\n\t\tisFront: \"If set to 1 the element will be shown in front of the units, otherwise behind.\",\r\n\t\tpaused: \"The new pause state, 1 to pause 0 to resume.\",\r\n\t\tfloor: \"The y coordinate where the shadows will be drawn\"\r\n\t}\r\n\t\r\n\t_this._paramDisplayHandlers = {\r\n\t\tr: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tg: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tb: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\ta: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tx_fraction: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\ty_fraction: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderDuration: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderName: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam0: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam1: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam2: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam3: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam4: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam5: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam6: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam7: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam8: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshaderParam9: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tshockwave_intensity: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tlightIntensity: function(value){\r\n\t\t\t\r\n\t\t},\t\r\n\t\texcludedObj: function(value){\r\n\t\t\t\r\n\t\t},\t\r\n\t\tstate: function(value){\r\n\t\t\t\r\n\t\t},\t\r\n\t\tincludeOnly: function(value){\r\n\t\t\t\r\n\t\t},\t\t\r\n\t\t\r\n\t\timmediate: function(value){\r\n\t\t\t\r\n\t\t}, \r\n\t\tarmatureName: function(value){\r\n\t\t\t\r\n\t\t}, \r\n\t\tanimName: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tmoveOriginToParent: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tmechId: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tanimGroup: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tcanvasWidth: function(value){\r\n\t\t\t\r\n\t\t}, \r\n\t\tunlit: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tcanvasHeight: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tposition: function(value){\r\n\t\t\tif(!value){\r\n\t\t\t\tvalue = {};\r\n\t\t\t}\r\n\t\t\tvar result = \"\";\r\n\t\t\tresult+=\"<div class='param_values'>\";\r\n\t\t\tresult+=\"x: <input data-dataid='x' class='param_value param_coord' value='\"+(value.x || 0)+\"'></input>\";\r\n\t\t\tresult+=\"y: <input data-dataid='y' class='param_value param_coord' value='\"+(value.y || 0)+\"'></input>\";\r\n\t\t\tresult+=\"z: <input data-dataid='z' class='param_value param_coord' value='\"+(value.z || 0)+\"'></input>\";\r\n\r\n\t\t\tresult+=\"<select class='position_select'>\";\r\n\t\t\tresult+=\"<option  value=''></option>\";\r\n\t\t\tvar defaultPositions = $battleSceneManager.getDefaultPositions();\r\n\t\t\tObject.keys(defaultPositions).sort().forEach(function(type){\r\n\t\t\t\tresult+=\"<option \"+(value == type ? \"selected\" : \"\")+\" value='\"+type+\"'>\"+type+\"</option>\";\r\n\t\t\t});\r\n\t\t\tresult+=\"</select>\";\t\r\n\t\t\tresult+=\"<button class='copy_from_cam' data-prop='position'>\"+EDITORSTRINGS.ATTACKS.label_copy_helper+\"</button>\";\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\trotation: function(value){\r\n\t\t\tif(!value){\r\n\t\t\t\tvalue = {};\r\n\t\t\t}\r\n\t\t\tvar result = \"\";\r\n\t\t\tresult+=\"<div class='param_values'>\";\r\n\t\t\tresult+=\"x: <input data-dataid='x' class='param_value param_coord' value='\"+(value.x || 0)+\"'></input>\";\r\n\t\t\tresult+=\"y: <input data-dataid='y' class='param_value param_coord' value='\"+(value.y || 0)+\"'></input>\";\r\n\t\t\tresult+=\"z: <input data-dataid='z' class='param_value param_coord' value='\"+(value.z || 0)+\"'></input>\";\t\r\n\r\n\t\t\tresult+=\"<select class='rotation_select'>\";\r\n\t\t\tresult+=\"<option  value=''></option>\";\r\n\t\t\tvar defaultRotations = $battleSceneManager.getDefaultRotations();\r\n\t\t\tObject.keys(defaultRotations).sort().forEach(function(type){\r\n\t\t\t\tresult+=\"<option \"+(value == type ? \"selected\" : \"\")+\" value='\"+type+\"'>\"+type+\"</option>\";\r\n\t\t\t});\r\n\t\t\tresult+=\"</select>\";\t\r\n\t\t\t\r\n\t\t\tresult+=\"<button class='copy_from_cam' data-prop='rotation'>\"+EDITORSTRINGS.ATTACKS.label_copy_helper+\"</button>\";\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tparent: function(value){\r\n\t\t\t\r\n\t\t}, \r\n\t\tstartPosition: function(value){\r\n\t\t\treturn _this._paramDisplayHandlers.position(value);\r\n\t\t},\r\n\t\tduration: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\t\"duration(ms)\": function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\trelative: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\teasingFunction: function(value){\r\n\t\t\tvar result = \"\";\t\t\t\r\n\t\t\tresult+=\"<select class='easing_select param_select'>\";\r\n\t\t\tresult+=\"<option  value=''></option>\";\r\n\t\t\tObject.keys(_this._easingFunctions).sort().forEach(function(type){\r\n\t\t\t\tresult+=\"<option \"+(value == type ? \"selected\" : \"\")+\" value='\"+type+\"'>\"+type+\"</option>\";\r\n\t\t\t});\r\n\t\t\tresult+=\"</select>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\teasingMode: function(value){\r\n\t\t\tvar result = \"\";\t\t\t\r\n\t\t\tresult+=\"<select class='easing_mode_select param_select'>\";\r\n\t\t\tresult+=\"<option value=''></option>\";\r\n\t\t\tObject.keys(_this._easingModes).sort().forEach(function(type){\r\n\t\t\t\tresult+=\"<option \"+(value == type ? \"selected\" : \"\")+\" value='\"+type+\"'>\"+_this._easingModes[type]+\"</option>\";\r\n\t\t\t});\r\n\t\t\tresult+=\"</select>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\thide: function(value){\r\n\t\t\tvar result = \"\";\t\t\t\r\n\t\t\tresult+=\"<select class='hide_select param_select'>\";\r\n\t\t\tresult+=\"<option value='0' \"+(!value ? \"selected\" : \"\")+\">0</option>\";\r\n\t\t\tresult+=\"<option value='1' \"+(value ? \"selected\" : \"\")+\">1</option>\";\t\t\t\r\n\t\t\tresult+=\"</select>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tsequenceId: function(value){\r\n\t\t\tvar result = \"\";\t\t\t\r\n\t\t\tresult+=\"<select class='sequence_mode_select param_select'>\";\r\n\t\t\tObject.keys(_this._sequenceTypes).sort().forEach(function(type){\r\n\t\t\t\tresult+=\"<option \"+(value == _this._sequenceTypes[type].id ? \"selected\" : \"\")+\" value='\"+_this._sequenceTypes[type].id+\"'>\"+_this._sequenceTypes[type].name+\"</option>\";\r\n\t\t\t});\r\n\t\t\tresult+=\"</select>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tcatmullRom: function(value){\t\t\r\n\t\t\tif(!value){\r\n\t\t\t\tvalue = {\r\n\t\t\t\t\tpos1: {},\r\n\t\t\t\t\tpos4: {}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getDisplayValue(val){\r\n\t\t\t\tif(val == null){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar result = \"\";\r\n\t\t\tresult+=\"<div class='catmullrom_block' style=''>\";\r\n\t\t\tresult+=\"<div data-catmullpos='pos1' class='param_values pos1'>\";\r\n\t\t\tresult+=\"x1: <input data-dataid='x' class='param_value param_coord' value='\"+getDisplayValue(value.pos1.x)+\"'></input>\";\r\n\t\t\tresult+=\"y1: <input data-dataid='y' class='param_value param_coord' value='\"+getDisplayValue(value.pos1.y)+\"'></input>\";\r\n\t\t\tresult+=\"z1: <input data-dataid='z' class='param_value param_coord' value='\"+getDisplayValue(value.pos1.z)+\"'></input>\";\t\r\n\r\n\t\t\t\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\t\r\n\t\t\tresult+=\"<div data-catmullpos='pos4' class='param_values pos4'>\";\r\n\t\t\tresult+=\"x2: <input data-dataid='x' class='param_value param_coord' value='\"+getDisplayValue(value.pos4.x)+\"'></input>\";\r\n\t\t\tresult+=\"y2: <input data-dataid='y' class='param_value param_coord' value='\"+getDisplayValue(value.pos4.y)+\"'></input>\";\r\n\t\t\tresult+=\"z2: <input data-dataid='z' class='param_value param_coord' value='\"+getDisplayValue(value.pos4.z)+\"'></input>\";\t\r\n\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tstartRotation: function(value){\r\n\t\t\treturn _this._paramDisplayHandlers.rotation(value);\r\n\t\t},\r\n\t\taroundPivot: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tfixMirrored: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tforceAutoFlipX: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tstartSize: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tendSize: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tx: function(value){\r\n\t\t\r\n\t\t},\r\n\t\ty: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tid: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tid_text: function(value){\r\n\t\t\tlet result = \"\";\r\n\t\t\t\r\n\t\t\tresult+=\"<input value='\"+(value || \"\")+\"'></input>\";\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tresult+=\"<div class='quote_selector_container'>\";\r\n\t\t\tresult+=\"<img class='quote_selector_control' src='\"+_this._svgPath+\"pencil-fill.svg'>\";\r\n\t\t\tresult+=\"<div class='quote_selector'>\";\r\n\t\t\t\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\tresult+=\"</div>\";\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tmagnitude_x: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tmagnitude_y: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tmagnitude_z: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tspeed_x: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tspeed_y: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tspeed_z: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tfadeInTicks: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tfadeOutTicks: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tmagnitude_variance: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tspeed_variance: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tstartFade: function(value){\r\n\t\t\r\n\t\t},\r\n\t\thard: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tendFade: function(value){\r\n\t\t\r\n\t\t},\r\n\t\ttime: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tspeed: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tspeedOut: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tcleanUpCommands: function(value){\r\n\t\t\treturn _this._paramDisplayHandlers.commands(value);\r\n\t\t},\r\n\t\tcommands: function(value){\r\n\t\t\tvar content = \"<div class='inner_commands'>\";\r\n\t\t\tcontent+=\"<button class='tick_add_command'>New</button>\";\r\n\t\t\tif(_this._clipboardCommand){\r\n\t\t\t\tcontent+=\"<button class='tick_paste_command'>Paste</button>\";\r\n\t\t\t}\t\t\t\r\n\t\t\tif(value){\t\t\t\r\n\t\t\t\tvar ctr = 0;\r\n\t\t\t\tvalue.forEach(function(command){\r\n\t\t\t\t\tcontent+=\"<div data-cmdid='\"+command.type+\"' data-cmdidx='\"+(ctr++)+\"' class='cmd_block_inner'>\";\r\n\t\t\t\t\tcontent+=_this.getCommandContent(command, true);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\treturn content;\r\n\t\t},\r\n\t\tanimationFrames: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tattachId: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tsnap: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tplayAll: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tisPassive: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tfrom: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tto: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tuScale: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tvScale: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tuOffset: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tvOffset: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tanimationLoop: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tholdFrame: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tscrollSpeed: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tclamp: function(value){\r\n\t\t\r\n\t\t},\t\t\r\n\t\tnoWait:  function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tnoDamage: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tisFront: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tnoDamageText: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tnoReposition: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tanimationDelay: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tpath: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tname: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tsize: function(value){\r\n\t\t\r\n\t\t},\r\n\t\talpha: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tbillboardMode: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tisPilotCutin: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\trenderTargetId: function(value){\r\n\t\t\r\n\t\t}, \r\n\t\tframeSize: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tlineCount: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tcolumnCount: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tisBackground: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tisForeground: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tattachForShake: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tautoRotate: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tflipZ: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tignoreParentRotation: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tcolor: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tscale: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tindex: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tpercent: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tseId: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tpitch: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tvolume: function(value){\r\n\t\t\r\n\t\t},\r\n\t\tratio: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tsmooth: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tbattleAnimId: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tfloor: function(value){\r\n\t\t\t\r\n\t\t},\t\t\r\n\t\tanimId: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tfps: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tmuted: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tfade_in: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tloop: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tnoFlash: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tframe: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tdelay: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tscaleX: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tscaleY: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tnoSfx: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t\tpaused: function(value){\r\n\t\t\t\r\n\t\t},\r\n\t}\r\n\t\r\n\t_this._currentSequenceType = \"mainAnimation\";\r\n\t_this._paramHandlers = {};\r\n\t_this._editorScrollTop = 0;\r\n\t\r\n\t_this._currentActor = 1;\r\n\t_this._currentActorTwin = -1;\r\n\t_this._currentActorMech = 1;\r\n\t_this._currentActorTwinMech = -1;\r\n\t_this._currentEnemy = 1;\r\n\t_this._currentEnemyTwin = -1;\r\n\t_this._currentEnemyMech = 1;\r\n\t_this._currentEnemyTwinMech = -1;\r\n\t\r\n\t//battle text\r\n\t_this._currentBattleTextType = \"default\";\r\n\t_this._currentBattleTextActorType = \"actor\";\r\n\t_this._currentBattleTextStage = -1;\r\n\t_this._currentBattleTextEvent = -1;\r\n\t_this._currentTextUnit = 0;\r\n\t_this._currentTextHook = \"battle_intro\";\r\n\t\r\n\t_this.show();\r\n}\r\n\r\n\r\nSRWEditor.prototype.savePreferences = function(id){\r\n\tif(!this._preferences){\r\n\t\tthis._preferences = {};\r\n\t}\r\n\tvar fs = __webpack_require__(/*! fs */ \"fs\");\r\n\tvar dirPath = 'js/plugins/config/active';\r\n\tif (!fs.existsSync(dirPath)) {\r\n        fs.mkdirSync(dirPath);\r\n    }\r\n\tfs.writeFileSync('js/plugins/config/active/EditorPreferences.json', JSON.stringify(this._preferences));\r\n}\r\n\r\nSRWEditor.prototype.show = function(){\r\n\tvar _this = this;\r\n\tvar content = \"\";\r\n\t\r\n\tAudioManager.stopBgm();\r\n\t\r\n\tvar xhr = new XMLHttpRequest();\r\n    var url = 'js/plugins/config/active/EditorPreferences.json';\r\n    xhr.open('GET', url);\r\n    xhr.overrideMimeType('application/json');\r\n    xhr.onload = function() {\r\n        if (xhr.status < 400) {\r\n            _this._preferences = (JSON.parse(xhr.responseText));  \r\n\t\t\tfinalize();\t\r\n        }\r\n    };\r\n    xhr.onerror = finalize;\r\n    window[name] = null;\r\n    xhr.send();\r\n\t\r\n\t\r\n\tfunction finalize(){\t\r\n\t\r\n\t\t\r\n\t\r\n\t\t$battleSceneManager.toggleTextBox(true);\r\n\t\r\n\t\tif(!_this._preferences){\r\n\t\t\t_this._preferences = {};\r\n\t\t}\r\n\t\tif(_this._preferences.font_scale != null){\r\n\t\t\tnw.Window.get(window).zoomLevel = Math.log(_this._preferences.font_scale/100.0) / Math.log(1.2);\r\n\t\t}\r\n\t\t\r\n\t\tvar currentEditorInfo = _this._editorData[_this._currentEditor];\r\n\t\tcontent+=\"<div class='header'>\";\r\n\t\tcontent+=_this._title + \" - \" + currentEditorInfo.title;\r\n\t\t\r\n\t\tcontent+=\"<div id='scale_controls'>\";\t\r\n\t\tcontent+=\"<div class='label'>Editor Zoom</div>\";\t\r\n\t\tcontent+=\"<div class='value' id='scale_label'>\"+(_this._preferences.font_scale || 100)+\"%</div>\";\t\r\n\t\tcontent+=\"<input type='range' min='50' max='200' value='\"+(_this._preferences.font_scale || 100)+\"' step=5 id='font_scaler_slider'>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<select id='editor_selector'>\";\t\r\n\t\t\r\n\t\tcontent+=\"<option value='ally_pilot_editor' \"+(_this._currentEditor == \"ally_pilot_editor\" ? \"selected\" : \"\")+\">Ally Pilots</option>\";\r\n\t\tcontent+=\"<option value='enemy_pilot_editor' \"+(_this._currentEditor == \"enemy_pilot_editor\" ? \"selected\" : \"\")+\">Enemy Pilots</option>\";\r\n\t\tcontent+=\"<option value='mech_editor' \"+(_this._currentEditor == \"mech_editor\" ? \"selected\" : \"\")+\">Mechs</option>\";\t\r\n\t\t\r\n\t\tcontent+=\"<option value='weapon_editor' \"+(_this._currentEditor == \"weapon_editor\" ? \"selected\" : \"\")+\">Weapons</option>\";\t\r\n\t\t\r\n\t\tcontent+=\"<option value='pattern_editor' \"+(_this._currentEditor == \"pattern_editor\" ? \"selected\" : \"\")+\">Patterns</option>\";\r\n\t\t\r\n\t\tcontent+=\"<option value='attack_editor' \"+(_this._currentEditor == \"attack_editor\" ? \"selected\" : \"\")+\">Attack Animations</option>\";\r\n\t\tcontent+=\"<option value='environment_editor' \"+(_this._currentEditor == \"environment_editor\" ? \"selected\" : \"\")+\">Environments</option>\";\r\n\t\tcontent+=\"<option value='battle_text_editor' \"+(_this._currentEditor == \"battle_text_editor\" ? \"selected\" : \"\")+\">Battle Text</option>\";\r\n\t\t\r\n\t\tcontent+=\"</select>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='content'>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\t_this._contentDiv.innerHTML = content;\r\n\t\t\r\n\t\t//Graphics.updatePreviewWindowWidth();\r\n\t\t\r\n\t\t_this._contentDiv.querySelector(\"#editor_selector\").addEventListener(\"change\", function(){\r\n\t\t\tvar c = true;\r\n\t\t\tif(_this._modified){\r\n\t\t\t\tc = confirm(\"Discard unsaved changes in the current editor?\");\r\n\t\t\t}\r\n\t\t\tif(c){\r\n\t\t\t\t_this._modified = false;\r\n\t\t\t\t$battleSceneManager.endScene();\r\n\t\t\t\t//_this._currentDefinition = 0;\r\n\t\t\t\t//_this._currentEnvironmentDefinition = 0;\r\n\t\t\t\t_this._currentEditor = this.value;\r\n\t\t\t\t_this.show();\r\n\t\t\t} else {\r\n\t\t\t\tthis.value = _this._currentEditor;\r\n\t\t\t\treturn false;\r\n\t\t\t}\t\t\t\r\n\t\t});\r\n\t\t_this._contentDiv.querySelector(\"#font_scaler_slider\").addEventListener(\"change\", function(){\r\n\t\t\tnw.Window.get(window).zoomLevel = Math.log(this.value/100.0) / Math.log(1.2);\r\n\t\t\t_this._preferences[\"font_scale\"] = this.value;\r\n\t\t\t_this.savePreferences();\r\n\t\t});\r\n\t\t\r\n\t\t_this._contentDiv.querySelector(\"#font_scaler_slider\").addEventListener(\"input\", function(){\r\n\t\t\t_this._contentDiv.querySelector(\"#scale_label\").innerHTML = this.value + \"%\";\r\n\t\t});\r\n\t\tcurrentEditorInfo.func.call(_this);\r\n\t\tGraphics.updatePreviewWindowWidth()\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.getBattleEnvironmentId = function(){\r\n\treturn this._currentEnvironmentDefinition;\r\n}\r\n\r\nSRWEditor.prototype.prepareBattleScenePreview = function(){\r\n\tvar _this = this;\r\n\tdocument.onkeydown = null;\r\n\t\r\n\t/*if(_this._battleSceneLayer){\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(_this._battleSceneLayer);\r\n\t} else {\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(document.querySelector(\"#battle_scene_layer\"));\r\n\t}\t\r\n\t_this._battleSceneLayer = document.querySelector(\"#attack_editor #battle_scene_layer\");\r\n\t_this._battleSceneLayer.style.width = \"\";\r\n\t_this._battleSceneLayer.style.height = \"\";\r\n\t\r\n\tif(_this._battleSceneUILayer){\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(_this._battleSceneUILayer);\r\n\t} else {\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(document.querySelector(\"#battle_scene_ui_layer\"));\r\n\t}\t\r\n\t_this._battleSceneUILayer = document.querySelector(\"#attack_editor #battle_scene_ui_layer\");\r\n\t_this._battleSceneUILayer.style.width = \"\";\r\n\t_this._battleSceneUILayer.style.height = \"\";\r\n\t\r\n\tif(_this._battleSceneFadeLayer){\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(_this._battleSceneFadeLayer);\r\n\t} else {\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(document.querySelector(\"#fade_container\"));\r\n\t}\r\n\t_this._battleSceneFadeLayer = document.querySelector(\"#attack_editor #fade_container\");\r\n\t_this._battleSceneFadeLayer.style.width = \"\";\r\n\t_this._battleSceneFadeLayer.style.height = \"\";\r\n\t\r\n\tif(_this._battleSceneSystemFadeLayer){\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(_this._battleSceneSystemFadeLayer);\r\n\t} else {\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(document.querySelector(\"#system_fade_container\"));\r\n\t}\r\n\t_this._battleSceneSystemFadeLayer = document.querySelector(\"#attack_editor #system_fade_container\");\r\n\t_this._battleSceneSystemFadeLayer.style.width = \"\";\r\n\t_this._battleSceneSystemFadeLayer.style.height = \"\";\r\n\t\r\n\tif(_this._battleSceneSwipeLayer){\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(_this._battleSceneSwipeLayer);\r\n\t} else {\r\n\t\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild(document.querySelector(\"#swipe_container\"));\r\n\t}\r\n\t_this._battleSceneSwipeLayer = document.querySelector(\"#attack_editor #swipe_container\");\r\n\t_this._battleSceneSwipeLayer.style.width = \"\";\r\n\t_this._battleSceneSwipeLayer.style.height = \"\";*/\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._container);\r\n\t$battleSceneManager._container.style.width = \"\";\r\n\t$battleSceneManager._container.style.height = \"\";\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._UIcontainer);\t\r\n\t$battleSceneManager._UIcontainer.style.width = \"\";\r\n\t$battleSceneManager._UIcontainer.style.height = \"\";\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._PIXIContainer);\t\r\n\t$battleSceneManager._PIXIContainer.style.width = \"\";\r\n\t$battleSceneManager._PIXIContainer.style.height = \"\";\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._movieContainer);\t\r\n\t$battleSceneManager._movieContainer.style.width = \"\";\r\n\t$battleSceneManager._movieContainer.style.height = \"\";\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._fadeContainer);\r\n\t$battleSceneManager._fadeContainer.style.width = \"\";\r\n\t$battleSceneManager._fadeContainer.style.height = \"\";\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._systemFadeContainer);\r\n\t$battleSceneManager._systemFadeContainer.style.width = \"\";\r\n\t$battleSceneManager._systemFadeContainer.style.height = \"\";\r\n\t\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._swipeContainer);\r\n\t$battleSceneManager._swipeContainer.style.width = \"\";\r\n\t$battleSceneManager._swipeContainer.style.height = \"\";\r\n\r\n\tdocument.querySelector(\"#attack_editor .preview_window\").appendChild($battleSceneManager._TextContainer);\r\n\t$battleSceneManager._TextContainer.style.width = \"\";\r\n\t$battleSceneManager._TextContainer.style.height = \"\";\r\n\t\r\n\t//$battleSceneManager.init(true);\t\r\n\t\r\n\t$battleSceneManager.setExternalFPSCounter(document.querySelector(\"#attack_editor .fps_counter\"));\r\n\t$battleSceneManager.setExternalTickCounter(document.querySelector(\"#attack_editor .tick_counter\"));\r\n\t\r\n\t//$battleSceneManager._fadeContainer = _this._battleSceneFadeLayer;\r\n}\r\n\r\nSRWEditor.prototype.showBattleTextEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tvar content = \"\";\r\n\t\r\n\t$battleSceneManager.toggleTextBox(true);\r\n\t\r\n\tcontent+=\"<div id='attack_editor' class='text_editor'>\";\r\n\tcontent+=\"<div class='edit_controls'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='preview'>\";\r\n\t\r\n\tcontent+=\"<div class='preview_window_container'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='preview_window'>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"<div class='preview_extra_controls'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontainerNode.innerHTML = content;\r\n\tthis.prepareBattleScenePreview();\r\n\t\r\n\t\r\n\tthis.showBattleTextEditorControls();\r\n}\r\n\r\nSRWEditor.prototype.showBattleTextEditorControls = function(){\r\n\tvar _this = this;\r\n\t_this._battleTextBuilder.isLoaded().then(function(){\r\n\t\t$battleSceneManager.showEnvironmentScene();\t\r\n\t\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\t\tvar content = \"\";\r\n\t\t\r\n\t\tcontent+=\"<div id='info_section' class='section'>\";\r\n\t\tcontent+=\"<button id='save_def'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\r\n\t\tcontent+=\"<div class='section_label'>\"+EDITORSTRINGS.GENERAL.label_info+\"</div>\";\r\n\t\tcontent+=\"<div class='section_content' id='text_editor_section_tools'>\";\r\n\t\t\r\n\t\tvar currentTextInfo;\r\n\r\n\t\tvar currentTypeInfo = _this._battleTextBuilder.getDefinitions()[_this._currentBattleTextType];\r\n\t\t\r\n\t\tcontent+=\"<div class='row'>\";\r\n\t\tcontent+=\"<div class='select_label'>\";\r\n\t\tcontent+=EDITORSTRINGS.TEXT.label_text_type;\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<select id='battle_text_type_select'>\";\r\n\t\tcontent+=\"<option value='default' \"+(_this._currentBattleTextType == \"default\" ? \"selected\" : \"\")+\">Default</option>\";\r\n\t\t//content+=\"<option value='stage' \"+(_this._currentBattleTextType == \"stage\" ? \"selected\" : \"\")+\">Stage</option>\";\r\n\t\tcontent+=\"<option value='event' \"+(_this._currentBattleTextType == \"event\" ? \"selected\" : \"\")+\">Special</option>\";\r\n\t\tcontent+=\"</select>\";\r\n\t\t\r\n\t\tif(_this._currentBattleTextType == \"event\"){\r\n\t\t\tcontent+=\"<div class='select_label'>\";\r\n\t\t\tcontent+=EDITORSTRINGS.TEXT.label_event;\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<select id='battle_text_event_select'>\";\r\n\t\t\tcontent+=\"<option value='-1'></option>\";\r\n\t\t\tif(currentTypeInfo){\r\n\t\t\t\tvar definedEvents = Object.keys(currentTypeInfo);\r\n\t\t\t\t//if(_this._currentBattleTextEvent == -1){\r\n\t\t\t\t//\t_this._currentBattleTextEvent = definedEvents[0];\r\n\t\t\t//\t}\r\n\t\t\t\tObject.keys(definedEvents).forEach(function(eventId){\r\n\t\t\t\t\tvar refId = _this._battleTextBuilder.getDefinitions()[_this._currentBattleTextType][eventId].refId;\r\n\t\t\t\t\tcontent+=\"<option value='\"+eventId+\"' \"+(_this._currentBattleTextEvent == eventId ? \"selected\" : \"\")+\">\"+eventId+\". \"+refId+\"</option>\";\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tvar currentStageTextInfo = currentTypeInfo[_this._currentBattleTextEvent];\t\r\n\t\t\t\tif(currentStageTextInfo){\r\n\t\t\t\t\tcurrentTextInfo = currentStageTextInfo[_this._currentBattleTextActorType];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontent+=\"</select>\";\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tif(currentTypeInfo){\r\n\t\t\t\tcurrentTextInfo = currentTypeInfo[_this._currentBattleTextActorType];\r\n\t\t\t}\r\n\t\t}\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<div class='row'>\";\r\n\t\tcontent+=\"<div class='select_label'>\";\r\n\t\tcontent+=EDITORSTRINGS.TEXT.label_unit_type;\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<select id='battle_text_actor_type_select'>\";\r\n\t\tcontent+=\"<option value='actor' \"+(_this._currentBattleTextActorType == \"actor\" ? \"selected\" : \"\")+\">Actor</option>\";\r\n\t\tcontent+=\"<option value='enemy' \"+(_this._currentBattleTextActorType == \"enemy\" ? \"selected\" : \"\")+\">Enemy</option>\";\r\n\r\n\t\tcontent+=\"</select>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='select_label'>\";\r\n\t\tcontent+=EDITORSTRINGS.TEXT.label_unit;\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=_this.createUnitSelect(_this._currentTextUnit, null, false, \"main_unit_select\");\r\n\t\t\r\n\t\t\r\n\t\tvar textHooks = _this._battleTextBuilder.getAvailableTextHooks();\r\n\t\tcontent+=\"<div class='select_label'>\";\r\n\t\tcontent+=EDITORSTRINGS.TEXT.label_text_type;\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<select id='text_type_select'>\";\r\n\t\t\r\n\t\ttextHooks.forEach(function(textHook){\r\n\t\t\tcontent+=\"<option \"+(_this._currentTextHook == textHook ? \"selected\" : \"\")+\" value='\"+textHook+\"'>\"+textHook+\"</option>\";\r\n\t\t});\r\n\t\tcontent+=\"</select>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tif(_this._currentBattleTextType == \"event\"){\r\n\t\t\tcontent+=\"<div class='event_controls'>\";\r\n\t\t\tif(_this._currentBattleTextEvent != -1){\r\n\t\t\t\tcontent+=\"<div class='command_label reference_id_label'>\"+EDITORSTRINGS.TEXT.label_reference_id+\":</div>\";\r\n\t\t\t\tcontent+=\"<input class='event_id' value='\"+_this._battleTextBuilder.getDefinitions()[_this._currentBattleTextType][_this._currentBattleTextEvent].refId+\"'></input>\";\r\n\t\t\t}\r\n\t\t\tcontent+=\"<button class='event_new'>New</button>\";\r\n\t\t\tif(_this._currentBattleTextEvent != -1){\r\n\t\t\t\tcontent+=\"<button class='event_copy'>\"+EDITORSTRINGS.GENERAL.label_copy+\"</button>\";\r\n\t\t\t\tcontent+=\"<button class='event_delete'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\r\n\t\t\t}\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\r\n\t\t\r\n\t\tcontent+=\"<div class='commands_scroll text_scroll_\"+_this._currentBattleTextType+\"'>\";\r\n\t\t\r\n\t\t/*Object.keys(currentTextInfo).forEach(function(unitId){\r\n\t\t\tvar currentData = currentTextInfo[unitId];\r\n\t\t\tcontent+=\"<div data-unitbg='\"+unitId+\"' class='bg_block tick_block'>\";\r\n\t\t\tcontent+=_this.createUnitSelect(unitId);\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t});*/\r\n\t\t\r\n\t\tvar unitSet;\r\n\t\tif(_this._currentBattleTextActorType == \"actor\"){\r\n\t\t\tunitSet = $dataActors;\r\n\t\t} else {\r\n\t\t\tunitSet = $dataEnemies;\r\n\t\t}\r\n\t\tvar result = \"\";\r\n\t\t\r\n\t\t\r\n\t\tfunction createUnitText(textInfo){\r\n\t\t\tvar content = \"\";\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='default' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_default+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.default.forEach(function(quote){\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"default\", ctr++, quote);\r\n\t\t\t});\t\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='target_mech' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_target_mech+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.target_mech.forEach(function(quote){\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"target_mech\", ctr++, quote, null, null, {id: quote.mechId});\r\n\t\t\t});\t\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='mech' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_mech+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.mech.forEach(function(quote){\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"mech\", ctr++, quote, null, {id: quote.mechId});\r\n\t\t\t});\t\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='actor' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_actors+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\t\r\n\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.actor.forEach(function(unitInfo){\t\t\t\t\t\t\t\t\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"actor\", ctr++, unitInfo, {type: \"actor\", id: unitInfo.unitId});\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='enemy' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_enemies+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\t\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.enemy.forEach(function(unitInfo){\t\t\t\t\t\t\t\t\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"enemy\", ctr++, unitInfo, {type: \"enemy\", id: unitInfo.unitId});\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='target_actor_tag' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_target_pilots_tags+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\t\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.target_actor_tag.forEach(function(unitInfo){\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"target_actor_tag\", ctr++, unitInfo, {type: \"tag\"});\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='unit_text'>\";\r\n\t\t\tcontent+=\"<div data-subtype='target_mech_tag' class='text_category_controls'>\";\r\n\t\t\tcontent+=\"<div class='text_label'>\"+EDITORSTRINGS.TEXT.label_target_mech_tags+\"</div>\";\r\n\t\t\tcontent+=\"<button class='add_category_quote'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\t\t\t\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\ttextInfo.target_mech_tag.forEach(function(unitInfo){\t\t\t\t\t\t\t\t\r\n\t\t\t\tcontent+=_this.createQuoteContent(\"target_mech_tag\", ctr++, unitInfo, {type: \"tag\"});\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\t\r\n\t\tvar i = _this._currentTextUnit;\r\n\t\tvar def = unitSet[_this._currentTextUnit];\r\n\t\tif(def && def.name){\r\n\t\t\tcontent+=\"<div data-unitid='\"+i+\"' class='unit_text_block '>\";//tick_block\r\n\t\t\t//content+=i+\". \"+def.name;\t\t\t\t\r\n\t\t\tlet textHook = _this._currentTextHook;\t\r\n\t\t\t//textHooks.sort().forEach(function(textHook){\r\n\t\t\t\tcontent+=\"<div data-hook='\"+textHook+\"' data-unitid='\"+i+\"' class='text_block'>\";//cmd_block cmd_block_outer \r\n\t\t\t\tcontent+=\"<div class='hook_label'>\";\r\n\t\t\t\t//content+=textHook;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='text_types'>\";\r\n\t\t\t\tvar textInfo = _this.getUnitDef(i, textHook);\r\n\t\t\t\tif(textInfo){\r\n\t\t\t\t\tif(textHook == \"attacks\"){\t\t\r\n\t\t\t\t\t\tcontent+=\"<div data-subtype='default' class='attacks_controls'>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar availableAttacks = [];\r\n\t\t\t\t\t\tcontent+=\"<select class='attack_select'>\";\r\n\t\t\t\t\t\tcontent+=\"<option value='-1'></option>\"\r\n\t\t\t\t\t\t$dataWeapons.forEach(function(weapon){\r\n\t\t\t\t\t\t\tif(weapon && weapon.name && !textInfo[weapon.id]){\r\n\t\t\t\t\t\t\t\tcontent+=\"<option value='\"+weapon.id+\"'>\"+weapon.name+\"</option>\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcontent+=\"</select>\"\r\n\t\t\t\t\t\tcontent+=\"<button class='add_attack'>\"+EDITORSTRINGS.TEXT.label_add+\"</button>\";\r\n\t\t\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\t\tObject.keys(textInfo).forEach(function(weaponId){\r\n\t\t\t\t\t\t\tcontent+=\"<div data-weaponid='\"+weaponId+\"' class='attack_text'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='delete_weapon_entry'><img src='\"+_this._svgPath+\"close-line.svg'></div>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='title_label'>\"+weaponId+\". \"+$dataWeapons[weaponId].name+\"</div>\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar options = textInfo[weaponId];\r\n\t\t\t\t\t\t\tif(!options[\"__groupodds\"]){\r\n\t\t\t\t\t\t\t\toptions[\"__groupodds\"] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcontent+=\"<div data-weaponid='\"+weaponId+\"' class='group_frequency_controls'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='title'>\"+EDITORSTRINGS.TEXT.label_quote_odds+\"</div>\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcontent+=\"<div class='scroll_pane'>\";\r\n\t\t\t\t\t\t\tlet idx = 0;\r\n\t\t\t\t\t\t\tfor(let entry of options[\"__groupodds\"]){\r\n\t\t\t\t\t\t\t\tcontent+=\"<div data-idx='\"+(idx++)+\"' class='entry'>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\t\t\tcontent+=EDITORSTRINGS.TEXT.label_quote_group;\r\n\t\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"<div class='value'>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"<input class='group_id' value='\"+entry.groupId+\"'></input>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"<div class='label'>\";\r\n\t\t\t\t\t\t\t\tcontent+=EDITORSTRINGS.TEXT.label_quote_percent;\r\n\t\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"<input class='group_weight' value='\"+entry.weight+\"'></input>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"<img class='delete_group_def' src='\"+_this._svgPath+\"close-line.svg'>\";\r\n\t\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\tcontent+=\"<div class='line_controls'>\";\r\n\t\t\t\t\t\t\tcontent+=\"<img class='add_group_def' src='\"+_this._svgPath+\"add-line.svg'>\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(!options.default){\r\n\t\t\t\t\t\t\t\toptions.default = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!options.mech){\r\n\t\t\t\t\t\t\t\toptions.mech = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!options.actor){\r\n\t\t\t\t\t\t\t\toptions.actor = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!options.enemy){\r\n\t\t\t\t\t\t\t\toptions.enemy = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!options.target_mech){\r\n\t\t\t\t\t\t\t\toptions.target_mech = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!options.target_mech_tag){\r\n\t\t\t\t\t\t\t\toptions.target_mech_tag = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!options.target_actor_tag){\r\n\t\t\t\t\t\t\t\toptions.target_actor_tag = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcontent+=createUnitText(options);\r\n\t\t\t\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\t\t});\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\t\r\n\t\t\t\t\t\tif(!textInfo.target_mech_tag){\r\n\t\t\t\t\t\t\ttextInfo.target_mech_tag = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!textInfo.target_actor_tag){\r\n\t\t\t\t\t\t\ttextInfo.target_actor_tag = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=createUnitText(textInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t//});\r\n\t\t\tcontent+=\"</div>\";\r\n\r\n\t\t}\r\n\t\t\r\n\t\t\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".edit_controls\").innerHTML = content;\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").scrollTop = _this._editorScrollTop;\t\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#battle_text_type_select\").addEventListener(\"change\", function(){\r\n\t\t\t$gameTemp.scriptedBattleDemoId = null;\r\n\t\t\t_this._currentBattleTextType = this.value;\r\n\t\t\t_this._currentTextUnit = 0;\r\n\t\t\t//_this._currentBattleTextActorType = \"actor\";\r\n\t\t\t//_this._currentTextUnit = 0;\r\n\t\t\t_this.showBattleTextEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tif(_this._currentBattleTextType == \"stage\"){\r\n\t\t\tcontainerNode.querySelector(\"#battle_text_stage_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t_this._currentBattleTextStage = this.value;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._currentBattleTextType == \"event\"){\r\n\t\t\tcontainerNode.querySelector(\"#battle_text_event_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t_this._currentBattleTextEvent = this.value;\r\n\t\t\t\t$gameTemp.scriptedBattleDemoId =_this._battleTextBuilder.getDefinitions()[_this._currentBattleTextType][_this._currentBattleTextEvent].refId;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#battle_text_actor_type_select\").addEventListener(\"change\", function(){\r\n\t\t\t_this._currentBattleTextActorType = this.value;\r\n\t\t\t_this.showBattleTextEditorControls();\r\n\t\t});\t\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".main_unit_select\").addEventListener(\"change\", function(){\r\n\t\t\t_this._currentTextUnit = this.value;\r\n\t\t\t_this.showBattleTextEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#text_type_select\").addEventListener(\"change\", function(){\r\n\t\t\t_this._currentTextHook = this.value;\r\n\t\t\t_this.showBattleTextEditorControls();\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar viewButtons = containerNode.querySelectorAll(\".view_text_btn\");\r\n\t\tviewButtons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"click\", function(){\r\n\t\t\t\tvar entityType = _this._currentBattleTextActorType;\r\n\t\t\t\tvar entityId = this.closest(\".unit_text_block\").getAttribute(\"data-unitid\");\r\n\t\t\t\tvar unitSet;\r\n\t\t\t\tif(_this._currentBattleTextActorType == \"actor\"){\r\n\t\t\t\t\tunitSet = $dataActors;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunitSet = $dataEnemies;\r\n\t\t\t\t}\r\n\t\t\t\tvar name = unitSet[entityId].name;\r\n\t\t\t\tvar type = this.closest(\".text_block\").getAttribute(\"data-hook\");\r\n\t\t\t\tvar subType = this.closest(\".quote\").getAttribute(\"data-subtype\");\r\n\t\t\t\t\r\n\t\t\t\tvar targetIdx =  this.closest(\".quote\").getAttribute(\"data-idx\");\r\n\t\t\t\tvar attackId;\r\n\t\t\t\tvar attackText = this.closest(\".attack_text\");\r\n\t\t\t\tif(attackText){\r\n\t\t\t\t\tattackId = attackText.getAttribute(\"data-weaponid\");\r\n\t\t\t\t\ttargetIdx = this.closest(\".quote\").querySelector(\".quote_id\").value;\r\n\t\t\t\t}\r\n\t\t\t\tvar actor = new Game_Actor(entityId, 0, 0);\r\n\t\t\t\t$statCalc.initSRWStats(actor);\r\n\t\t\t\tvar mechId;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tif(subType == \"mech\"){\r\n\t\t\t\t\tmechId = this.closest(\".quote\").querySelector(\".mech_select\").value;\r\n\t\t\t\t}\r\n\t\t\t\tif(mechId){\r\n\t\t\t\t\tactor._mechClass = mechId;\t\r\n\t\t\t\t\t$statCalc.initSRWStats(actor);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar targetId = this.closest(\".quote\").getAttribute(\"data-targetunit\");\r\n\t\t\t\tvar targetMechId;\r\n\t\t\t\tif(subType == \"target_mech\"){\r\n\t\t\t\t\ttargetMechId = this.closest(\".quote\").querySelector(\".target_mech_select\").value;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t$battleSceneManager.showText(entityType, actor, name, type, subType, {id: targetId, mechId: targetMechId}, targetIdx, attackId, {id: targetId, mechId: targetMechId});\r\n\t\t\t});\r\n\t\t});\t\r\n\r\n\t\tfunction getLocatorInfo(elem){\r\n\t\t\tvar params = {};\r\n\t\t\tparams.sceneType = _this._currentBattleTextType;\r\n\t\t\tparams.entityType = _this._currentBattleTextActorType;\r\n\t\t\tparams.eventId = _this._currentBattleTextEvent;\r\n\t\t\tparams.stageId = _this._currentBattleTextStage;\r\n\t\t\tparams.entityId = elem.closest(\".unit_text_block\").getAttribute(\"data-unitid\");\r\n\t\t\t\r\n\t\t\tparams.type = elem.closest(\".text_block\").getAttribute(\"data-hook\");\r\n\t\t\tvar quote = elem.closest(\".quote\");\r\n\t\t\tif(quote){\r\n\t\t\t\tparams.subType = quote.getAttribute(\"data-subtype\");\r\n\t\t\t\tparams.targetId = quote.getAttribute(\"data-targetunit\");\r\n\t\t\t\tparams.targetIdx = quote.getAttribute(\"data-idx\");\r\n\t\t\t}\t\t\t\r\n\t\t\tvar attackText = elem.closest(\".attack_text\");\r\n\t\t\tif(attackText){\r\n\t\t\t\tparams.weaponId = attackText.getAttribute(\"data-weaponid\");\r\n\t\t\t}\t\t\r\n\t\t\tvar quoteLine = elem.closest(\".quote_line\");\r\n\t\t\tif(quoteLine){\r\n\t\t\t\tparams.lineIdx = quoteLine.getAttribute(\"data-lineidx\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn params;\r\n\t\t}\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".delete_text_btn\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"click\", function(){\r\n\t\t\t\tif(confirm(EDITORSTRINGS.TEXT.confirm_delete_text)){\r\n\t\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\t\t_this._battleTextBuilder.deleteText(params);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".delete_weapon_entry\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"click\", function(){\r\n\t\t\t\tif(confirm(EDITORSTRINGS.TEXT.confirm_delete_entry)){\r\n\t\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\t\t_this._battleTextBuilder.deleteWeaponEntry(params);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\t\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".group_frequency_controls .add_group_def\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"click\", function(){\t\t\t\r\n\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\t_this._battleTextBuilder.addAttackGroupOdds(params);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showBattleTextEditorControls();\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".group_frequency_controls .delete_group_def\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"click\", function(){\t\t\t\r\n\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\tlet idx = this.closest(\".entry\").getAttribute(\"data-idx\");\r\n\t\t\t\tif(idx != null){\r\n\t\t\t\t\t_this._battleTextBuilder.removeAttackGroupOdds(params, idx);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\t\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".group_frequency_controls .group_id\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"change\", function(){\t\t\t\r\n\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\tlet idx = this.closest(\".entry\").getAttribute(\"data-idx\");\r\n\t\t\t\tif(idx != null){\r\n\t\t\t\t\t_this._battleTextBuilder.setAttackGroupProperty(params, idx, \"groupId\", this.value);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\t\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".group_frequency_controls .group_weight\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"change\", function(){\t\t\t\r\n\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\tlet idx = this.closest(\".entry\").getAttribute(\"data-idx\");\r\n\t\t\t\tif(idx != null){\r\n\t\t\t\t\t_this._battleTextBuilder.setAttackGroupProperty(params, idx, \"weight\", this.value);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\t\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\t\r\n\t\tvar buttons = containerNode.querySelectorAll(\".add_attack\");\r\n\t\tbuttons.forEach(function(button){\r\n\t\t\tbutton.addEventListener(\"click\", function(){\t\t\t\r\n\t\t\t\tvar weaponId = this.parentNode.querySelector(\".attack_select\").value;\r\n\t\t\t\tif(weaponId != -1){\r\n\t\t\t\t\tvar params = getLocatorInfo(this);\t\t\t\t\r\n\t\t\t\t\t_this._battleTextBuilder.addWeaponEntry(params, weaponId);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t\t\r\n\t\tfunction updatePortraitPreviews(){\r\n\t\t\tvar divs = containerNode.querySelectorAll(\".portrait_preview\");\r\n\t\t\tdivs.forEach(function(div){\r\n\t\t\t\tlet faceName = div.closest(\".quote_line\").querySelector(\".quote_face_name\").value;\r\n\t\t\t\tlet\tfaceIndex = div.closest(\".quote_line\").querySelector(\".quote_face_index\").value;\r\n\t\t\t\t_FaceManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loadFaceByParams(faceName, faceIndex, div);\r\n\t\t\t});\r\n\t\t}\r\n\t\tupdatePortraitPreviews();\r\n\t\t\r\n\t\tvar divs = containerNode.querySelectorAll(\".portrait_preview\");\r\n\t\tdivs.forEach(function(div){\r\n\t\t\tdiv.addEventListener(\"click\", async function(e){\r\n\t\t\t\tvar elem = this;\r\n\t\t\t\tlet faceName = this.closest(\".quote_line\").querySelector(\".quote_face_name\").value;\r\n\t\t\t\tlet\tfaceIndex = this.closest(\".quote_line\").querySelector(\".quote_face_index\").value;\r\n\t\t\t\tlet result = await _FaceManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].showFaceSelector(e, faceName, faceIndex, this);\r\n\t\t\t\tif(result.status == \"updated\"){\r\n\t\t\t\t\tthis.closest(\".quote_line\").querySelector(\".quote_face_name\").value = result.faceName;\r\n\t\t\t\t\tthis.closest(\".quote_line\").querySelector(\".quote_face_index\").value = result.faceIndex;\r\n\t\t\t\t\tupdateQuote(e, elem);\r\n\t\t\t\t}\r\n\t\t\t});\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tfunction updateQuote(e, elem){\r\n\t\t\tif(!elem){\r\n\t\t\t\telem = this;\r\n\t\t\t}\r\n\t\t\tfunction getQuoteLineValFromDOM(querySelector){\r\n\t\t\t\tlet targetElem = elem.closest(\".quote_line\").querySelector(querySelector);\r\n\t\t\t\tif(targetElem){\r\n\t\t\t\t\treturn targetElem.value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar newVal  = {\r\n\t\t\t\ttext: getQuoteLineValFromDOM(\".quote_text\"),\r\n\t\t\t\tfaceName: getQuoteLineValFromDOM(\".quote_face_name\"),\r\n\t\t\t\tfaceIndex: getQuoteLineValFromDOM(\".quote_face_index\"),\r\n\t\t\t\tdisplayName: getQuoteLineValFromDOM(\".quote_display_name\"),\r\n\t\t\t\tduration: getQuoteLineValFromDOM(\".quote_duration\"),\r\n\t\t\t\tvariable: getQuoteLineValFromDOM(\".quote_variable\"),\r\n\t\t\t\tvariableValue: getQuoteLineValFromDOM(\".quote_variable_value\"),\r\n\t\t\t}\r\n\t\t\tvar params = getLocatorInfo(elem);\r\n\t\t\tif(params.type == \"attacks\"){\r\n\t\t\t\tnewVal.quoteId = elem.closest(\".quote\").querySelector(\".quote_id\").value;\r\n\t\t\t}\r\n\t\t\t_this._battleTextBuilder.updateText(params, newVal);\r\n\t\t\t_this._modified = true;\r\n\t\t\tupdatePortraitPreviews();\r\n\t\t}\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_text\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_face_name\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_face_index\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_display_name\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_duration\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_variable\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\r\n\t\t\t\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_variable_value\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", updateQuote);\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_id\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\t\t\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.setQuoteId(params, this.value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t});\r\n\t\t});\t\r\n\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_group\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\t\t\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.setQuoteGroup(params, this.value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t});\r\n\t\t});\t\t\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".add_category_quote\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\tvar categoryControls = this.closest(\".unit_text\").querySelector(\".text_category_controls\");\r\n\t\t\t\tconst idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\tparams.subType = categoryControls.getAttribute(\"data-subtype\");\r\n\t\t\t\t_this._battleTextBuilder.addText(params, idx);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".add_line\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.addTextLine(params);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".unit_select\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.setUnitId(params, this.value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".mech_select\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.setMechId(params, this.value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".target_mech_select\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.setMechId(params, this.value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t});\r\n\t\t});\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_tag\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\r\n\t\t\t\tvar params = getLocatorInfo(this);\r\n\t\t\t\t_this._battleTextBuilder.setQuoteTag(params, this.value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").addEventListener(\"scroll\", function(){\r\n\t\t\t_this._editorScrollTop = this.scrollTop;\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#save_def\").addEventListener(\"click\", function(){\r\n\t\t\t_this._battleTextBuilder.save();\r\n\t\t\t_this._modified = false;\r\n\t\t\t_this.showBattleTextEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tvar eventIdInput = containerNode.querySelector(\".event_id\");\r\n\t\tif(eventIdInput){\r\n\t\t\teventIdInput.addEventListener(\"change\", function(){\r\n\t\t\t\t_this._battleTextBuilder.changeEventId(_this._currentBattleTextEvent, this.value);\r\n\t\t\t\t$gameTemp.scriptedBattleDemoId = this.value;\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tvar eventNewBtn = containerNode.querySelector(\".event_new\");\r\n\t\tif(eventNewBtn){\r\n\t\t\teventNewBtn.addEventListener(\"click\", function(){\r\n\t\t\t\t_this._battleTextBuilder.addEvent();\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tvar eventNewBtn = containerNode.querySelector(\".event_copy\");\r\n\t\tif(eventNewBtn){\r\n\t\t\teventNewBtn.addEventListener(\"click\", function(){\r\n\t\t\t\t_this._battleTextBuilder.copyEvent(_this._currentBattleTextEvent);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar eventDeleteBtn = containerNode.querySelector(\".event_delete\");\r\n\t\tif(eventDeleteBtn){\r\n\t\t\teventDeleteBtn.addEventListener(\"click\", function(){\r\n\t\t\t\tif(confirm(EDITORSTRINGS.TEXT.confirm_delete_event_entry)){\r\n\t\t\t\t\t_this._battleTextBuilder.deleteEvent(_this._currentBattleTextEvent);\r\n\t\t\t\t\t_this._currentBattleTextEvent = -1;\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t}\t\t\r\n\t\t\r\n\t\tvar btns = containerNode.querySelectorAll(\".portrait_copy\");\r\n\t\tbtns.forEach(function(btn){\r\n\t\t\tbtn.addEventListener(\"click\", function(){\r\n\t\t\t\tlet faceName = this.closest(\".quote_line\").querySelector(\".quote_face_name\").value;\r\n\t\t\t\tlet\tfaceIndex = this.closest(\".quote_line\").querySelector(\".quote_face_index\").value;\r\n\t\t\t\t_this._faceBuffer = {\r\n\t\t\t\t\tfaceName: faceName,\r\n\t\t\t\t\tfaceIndex: faceIndex\r\n\t\t\t\t};\r\n\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar btns = containerNode.querySelectorAll(\".portrait_paste\");\r\n\t\tbtns.forEach(function(btn){\r\n\t\t\tbtn.addEventListener(\"click\", function(e){\r\n\t\t\t\tif(_this._faceBuffer){\r\n\t\t\t\t\tthis.closest(\".quote_line\").querySelector(\".quote_face_name\").value = _this._faceBuffer.faceName;\r\n\t\t\t\t\tthis.closest(\".quote_line\").querySelector(\".quote_face_index\").value = _this._faceBuffer.faceIndex;\r\n\t\t\t\t\tupdateQuote(e, this);\r\n\t\t\t\t\t_this.showBattleTextEditorControls();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t});\r\n}\r\n\r\nSRWEditor.prototype.createQuoteContent = function(type, idx, quote, unitBaseInfo, mechBaseInfo, targetMechBaseInfo){\r\n\tvar _this = this;\r\n\tvar content = \"\";\r\n\tvar targetUnitId;\r\n\r\n\tvar lines = [];\r\n\tif(!Array.isArray(quote)){\r\n\t\tlines = [quote];\r\n\t} else {\r\n\t\tlines = quote;\r\n\t}\r\n\t\r\n\tvar lineCounter = 0;\r\n\tcontent+=\"<div data-subtype='\"+type+\"' data-idx='\"+idx+\"'class='quote'>\";\r\n\tcontent+=\"<div class='quote_title'>\"+EDITORSTRINGS.TEXT.label_quote+\"</div>\";\r\n\tlines.forEach(function(quote){\t\t\t\r\n\t\tvar mechInfo;\r\n\t\tif(mechBaseInfo){\r\n\t\t\tmechInfo = {\r\n\t\t\t\tid: quote.mechId\r\n\t\t\t};\r\n\t\t}\t\r\n\t\t\r\n\t\tvar unitInfo;\r\n\t\tif(unitBaseInfo){\r\n\t\t\tunitInfo = {\r\n\t\t\t\tid: quote.unitId,\r\n\t\t\t\ttype: unitBaseInfo.type,\r\n\t\t\t\ttag: quote.tag || \"\"\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar targetMechInfo;\r\n\t\tif(targetMechBaseInfo){\r\n\t\t\ttargetMechInfo = {\r\n\t\t\t\tid: quote.mechId\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\t//hack to pretend that the quote id is stored for an entire quote instead of for each line of the quote\t\t\r\n\t\tif(quote.quoteId != null && lineCounter == 0){\t\t\r\n\t\t\tcontent+=\"<div class='command_label quote_id_label'>\"+EDITORSTRINGS.TEXT.label_quote_id+\":</div>\";\r\n\t\t\tcontent+=\"<input class='quote_id' value='\"+quote.quoteId+\"'></input>\";\t\r\n\r\n\t\t\tcontent+=\"<div class='command_label quote_group_label'>\"+EDITORSTRINGS.TEXT.label_quote_group+\":</div>\";\r\n\t\t\tcontent+=\"<input class='quote_group' value='\"+(quote.quoteGroup || \"\")+\"'></input>\";\t\t\t\t\r\n\t\t}\t\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"<div data-lineidx='\"+(lineCounter)+\"'  data-targetunit='\"+(quote.unitId)+\"'  class='quote_line'>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='line_title'>\"+EDITORSTRINGS.TEXT.label_line+\" \"+(lineCounter+1)+\"</div>\";\t\t\r\n\t\t\r\n\t\tif(lineCounter == 0){\t\r\n\t\t\tcontent+=\"<div class='var_controls'>\";\r\n\t\t\tcontent+=\"<div class='command_label variable'>\"+EDITORSTRINGS.TEXT.label_variable+\":</div>\";\r\n\t\t\tcontent+=\"<input class='quote_variable' value='\"+(quote.variable || \"\")+\"'></input>\";\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='command_label variable_value'>\"+EDITORSTRINGS.TEXT.label_value+\":</div>\";\r\n\t\t\tcontent+=\"<input class='quote_variable_value' value='\"+(quote.variableValue ||  \"\")+\"'></input>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t}\t\t\r\n\t\t\r\n\t\tcontent+=\"<div class='quote_config'>\";\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"<div class='portrait_preview'></div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='face_controls'>\";\r\n\t\tcontent+=\"<button class='portrait_copy'>\"+EDITORSTRINGS.TEXT.label_copy_face+\"</button>\";\r\n\t\tif(_this._faceBuffer){\r\n\t\t\tcontent+=\"<button class='portrait_paste'>\"+EDITORSTRINGS.TEXT.label_paste_face+\"</button>\";\r\n\t\t}\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='face_inputs'>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='command_label '>\"+EDITORSTRINGS.TEXT.label_face_name+\":</div>\";\r\n\t\tcontent+=\"<input class='quote_face_name' value='\"+quote.faceName+\"'></input>\";\r\n\t\tcontent+=\"<div class='command_label '>\"+EDITORSTRINGS.TEXT.label_face_index+\":</div>\";\r\n\t\tcontent+=\"<input class='quote_face_index' value='\"+quote.faceIndex+\"'></input>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"<div class='quote_controls'>\";\r\n\t\tcontent+=\"<div title='\"+EDITORSTRINGS.TEXT.hint_preview+\"' class='view_text_btn'><img src='\"+_this._svgPath+\"eye-line.svg'></div>\"\r\n\t\tcontent+=\"<div title='\"+EDITORSTRINGS.TEXT.hint_delete+\"' class='delete_text_btn'><img src='\"+_this._svgPath+\"close-line.svg'></div>\"\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"<div class='controls_line'>\";\r\n\t\tcontent+=\"<div class='command_label name'>\"+EDITORSTRINGS.TEXT.label_name+\":</div>\";\r\n\t\tcontent+=\"<input class='quote_display_name' value='\"+(quote.displayName || \"\")+\"'></input>\";\r\n\t\t\r\n\t\tcontent+=\"<div title='\"+EDITORSTRINGS.TEXT.hint_duration+\"' class='duration_controls'>\";\r\n\t\tcontent+=\"<div class='command_label duration'>\"+EDITORSTRINGS.TEXT.label_duration+\":</div>\";\r\n\t\tcontent+=\"<input class='quote_duration' value='\"+(quote.duration ||  \"\")+\"'></input>\";\r\n\t\tcontent+=EDITORSTRINGS.TEXT.label_ticks;\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='quote_id_container'>\";\r\n\t\t\r\n\t\t\r\n\t\tif(unitInfo && lineCounter == 0){\r\n\t\t\tif(unitInfo.type != \"tag\"){\r\n\t\t\t\tcontent+=\"<div class='command_label '>\"+EDITORSTRINGS.TEXT.label_other_unit+\":</div>\";\r\n\t\t\t\tcontent+=_this.createUnitSelect(unitInfo.id, unitInfo.type);\r\n\t\t\t} else {\r\n\t\t\t\tcontent+=\"<div class='command_label '>\"+EDITORSTRINGS.TEXT.label_tag+\":</div>\";\r\n\t\t\t\tcontent+=\"<input class='quote_tag' value='\"+unitInfo.tag+\"'></input>\";\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\tif(mechInfo && lineCounter == 0){\r\n\t\t\tcontent+=\"<div class='command_label '>\"+EDITORSTRINGS.TEXT.label_mech+\":</div>\";\r\n\t\t\tcontent+=\"<select class='mech_select'>\";\r\n\t\t\tcontent+=\"<option value='-1'></option>\";\r\n\t\t\t$dataClasses.forEach(function(classInfo){\r\n\t\t\t\tif(classInfo && classInfo.name){\r\n\t\t\t\t\tcontent+=\"<option \"+(classInfo.id == mechInfo.id ? \"selected\" : \"\")+\" value='\"+classInfo.id+\"'>\"+classInfo.name+\"</option>\";\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\tcontent+=\"</select>\";\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif(targetMechInfo && lineCounter == 0){\r\n\t\t\tcontent+=\"<div class='command_label '>\"+EDITORSTRINGS.TEXT.label_target_mech+\":</div>\";\r\n\t\t\tcontent+=\"<select class='target_mech_select'>\";\r\n\t\t\tcontent+=\"<option value='-1'></option>\";\r\n\t\t\t$dataClasses.forEach(function(classInfo){\r\n\t\t\t\tif(classInfo && classInfo.name){\r\n\t\t\t\t\tcontent+=\"<option \"+(classInfo.id == targetMechInfo.id ? \"selected\" : \"\")+\" value='\"+classInfo.id+\"'>\"+classInfo.name+\"</option>\";\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\tcontent+=\"</select>\";\t\t\r\n\t\t}\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"<input class='param_value quote_text' value=\\\"\"+(quote.text.replace(/\\\"/g, '&quot;') || \"\")+\"\\\"></input>\";\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tlineCounter++;\r\n\t});\r\n\t\r\n\t\r\n\tcontent+=\"<div class='line_controls'>\";\r\n\t\r\n\tcontent+=\"<img class='add_line' src='\"+_this._svgPath+\"add-line.svg'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='add_category_quote_container'>\";\r\n\tcontent+=\"<button class='add_category_quote' data-idx='\"+idx+\"'>\"+EDITORSTRINGS.TEXT.label_new+\"</button>\";\r\n\tcontent+=\"</div>\";\r\n\treturn content;\r\n}\r\n\r\nSRWEditor.prototype.getUnitDef = function(unitId, hook){\r\n\tvar _this = this;\r\n\tvar currentTextInfo;\r\n\tvar currentTypeInfo = _this._battleTextBuilder.getDefinitions()[_this._currentBattleTextType];\r\n\r\n\tif(currentTypeInfo){\t\r\n\t\tif(_this._currentBattleTextType == \"stage\"){\t\t\t\t\t\t\r\n\t\t\tvar currentStageTextInfo = currentTypeInfo[_this._currentBattleTextStage].data;\t\r\n\t\t\tif(currentStageTextInfo){\r\n\t\t\t\tif(!currentStageTextInfo[_this._currentBattleTextActorType]){\r\n\t\t\t\t\tcurrentStageTextInfo[_this._currentBattleTextActorType] = {};\r\n\t\t\t\t}\r\n\t\t\t\tcurrentTextInfo = currentStageTextInfo[_this._currentBattleTextActorType];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t} else if(_this._currentBattleTextType == \"event\"){\t\t\t\t\r\n\t\t\tvar currentStageTextInfo = currentTypeInfo[_this._currentBattleTextEvent].data;\t\r\n\t\t\tif(currentStageTextInfo){\r\n\t\t\t\tif(!currentStageTextInfo[_this._currentBattleTextActorType]){\r\n\t\t\t\t\tcurrentStageTextInfo[_this._currentBattleTextActorType] = {};\r\n\t\t\t\t}\r\n\t\t\t\tcurrentTextInfo = currentStageTextInfo[_this._currentBattleTextActorType];\r\n\t\t\t}\t\t\t\r\n\t\t} else {\t\t\t\r\n\t\t\tcurrentTextInfo = currentTypeInfo[_this._currentBattleTextActorType];\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(!currentTextInfo[unitId]){\r\n\t\tcurrentTextInfo[unitId] = {};\r\n\t}\r\n\t\r\n\tif(!currentTextInfo[unitId][hook]){\r\n\t\tcurrentTextInfo[unitId][hook] = {};\r\n\t}\t\r\n\t\r\n\tcurrentTextInfo = currentTextInfo[unitId][hook];\t\r\n\t\r\n\tif(hook != \"attacks\"){\r\n\t\tif(!currentTextInfo){\r\n\t\t\tcurrentTextInfo = {\r\n\t\t\t\tdefault: [],\r\n\t\t\t\tactor: [],\r\n\t\t\t\tenemy: [],\r\n\t\t\t\tmech: [],\r\n\t\t\t\ttarget_mech: []\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(!currentTextInfo.default){\r\n\t\t\tcurrentTextInfo.default = [];\r\n\t\t}\r\n\t\tif(!currentTextInfo.mech){\r\n\t\t\tcurrentTextInfo.mech = [];\r\n\t\t}\r\n\t\tif(!currentTextInfo.target_mech){\r\n\t\t\tcurrentTextInfo.target_mech = [];\r\n\t\t}\r\n\t\tif(!currentTextInfo.actor){\r\n\t\t\tcurrentTextInfo.actor = [];\r\n\t\t}\r\n\t\tif(!currentTextInfo.enemy){\r\n\t\t\tcurrentTextInfo.enemy = [];\r\n\t\t}\r\n\t}\r\n\treturn currentTextInfo;\r\n}\r\n\r\nSRWEditor.prototype.createUnitSelect = function(selected, type, noEmpty, cssClass){\r\n\tvar unitSet;\r\n\tif(type == \"actor\" || (!type && this._currentBattleTextActorType == \"actor\")){\r\n\t\tunitSet = $dataActors;\r\n\t} else {\r\n\t\tunitSet = $dataEnemies;\r\n\t}\r\n\tvar result = \"\";\r\n\tvar cssClass = cssClass || \"unit_select\";\r\n\tresult+=\"<select class='\"+cssClass+\"'>\";\r\n\tif(!noEmpty){\r\n\t\tresult+=\"<option value='-1'></option>\";\r\n\t}\r\n\t\r\n\tfor(var i = 0; i < unitSet.length; i++){\r\n\t\tvar def = unitSet[i];\r\n\t\tif(def && def.name){\r\n\t\t\tresult+=\"<option value='\"+i+\"'  \"+(i == selected ? \"selected\" : \"\")+\">\"+def.name+\"</option>\";\r\n\t\t}\t\t\r\n\t}\r\n\tresult+=\"</select>\";\r\n\treturn result;\r\n}\r\n\r\nSRWEditor.prototype.showEnvironmentEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tvar content = \"\";\r\n\tcontent+=\"<div id='attack_editor'>\";\r\n\tcontent+=\"<div class='edit_controls'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='preview'>\";\r\n\tcontent+=\"<div class='preview_window_container'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='preview_window'>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"<div class='preview_extra_controls'>\";\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<button id='reset_view' >Reset</button>\";\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>Show textbox</div>\";\r\n\tcontent+=\"<input id='hide_textbox' checked type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontainerNode.innerHTML = content;\r\n\t\r\n\tcontainerNode.querySelector(\"#reset_view\").addEventListener(\"click\", function(){\r\n\t\t_this.showEnvironmentEditorControls();\r\n\t});\r\n\t\r\n\tcontainerNode.querySelector(\"#hide_textbox\").addEventListener(\"click\", function(){\r\n\t\t$battleSceneManager.toggleTextBox(this.checked);\r\n\t});\r\n\t\r\n\t\r\n\t\r\n\tthis.prepareBattleScenePreview();\r\n\tthis._environmentBuilder = $battleSceneManager.getEnvironmentBuilder();\r\n\t//$battleSceneManager.showEnvironmentScene();\r\n\t\t\r\n\tthis.showEnvironmentEditorControls();\r\n}\r\n\r\n\r\nSRWEditor.prototype.showEnvironmentEditorControls = function(){\r\n\tvar _this = this;\r\n\t_this._environmentBuilder.isLoaded().then(function(){\r\n\t\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\t\tvar content = \"\";\r\n\t\t$battleSceneManager.showEnvironmentScene();\t\r\n\t\t\r\n\t\tcontent+=\"<div class='selection_controls'>\";\r\n\t\tcontent+=\"<select class='definition_select'>\";\r\n\t\tvar definitions = _this._environmentBuilder.getDefinitions();\r\n\t\tObject.keys(definitions).forEach(function(id){\r\n\t\t\tcontent+=\"<option \"+(_this._currentEnvironmentDefinition == id ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+id+\" - \"+definitions[id].name+\"</option>\";\r\n\t\t});\r\n\t\tif(!definitions[_this._currentEnvironmentDefinition]){\r\n\t\t\t_this._currentEnvironmentDefinition = _this._environmentBuilder.newDef(\"Environment\");\r\n\t\t}\r\n\t\tcontent+=\"</select>\";\r\n\t\tcontent+=\"<div class='selection_control_buttons'>\";\r\n\t\tcontent+=\"<button id='new_def'>\"+EDITORSTRINGS.GENERAL.label_new+\"</button>\";\r\n\t\tcontent+=\"<button id='copy_def'>\"+EDITORSTRINGS.GENERAL.label_copy+\"</button>\";\r\n\t\tcontent+=\"<button id='delete_def'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\r\n\t\tcontent+=\"<button id='export_def'>\"+EDITORSTRINGS.GENERAL.label_export+\"</button>\";\r\n\t\tcontent+=\"<button id='import_def'>\"+EDITORSTRINGS.GENERAL.label_import+\"</button>\";\r\n\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div id='info_section' class='section'>\";\r\n\t\tcontent+=\"<button id='save_def'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\r\n\t\tcontent+=\"<div class='section_label'>\"+EDITORSTRINGS.GENERAL.label_info+\"</div>\";\r\n\t\tcontent+=\"<div class='section_content'>\";\r\n\t\tcontent+=\"\"+EDITORSTRINGS.GENERAL.label_name+\"<input id='def_name' value='\"+definitions[_this._currentEnvironmentDefinition].name+\"'></input>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='section'>\";\r\n\t\tcontent+=\"<div class='section_label'>\"+EDITORSTRINGS.BG.label_layers+\"</div>\";\r\n\t\tcontent+=\"<div id='timeline_section' class='section_content'>\";\r\n\t\t\r\n\t\tcontent+=\"<button id='new_bg'>\"+EDITORSTRINGS.GENERAL.label_new+\"</button>\";\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"<div class='commands_scroll'>\";\r\n\t\t\r\n\t\tvar bgs = definitions[_this._currentEnvironmentDefinition].data.bgs;\r\n\t\tbgs = bgs.sort(function(a, b){return a.zoffset - b.zoffset});\r\n\t\tbgs.forEach(function(bg){\r\n\t\t\tcontent+=\"<div data-bgid='\"+bg.id+\"' class='bg_block tick_block'>\";\r\n\t\t\tcontent+=\"<div class='bg_controls' data-bgid='\"+bg.id+\"'>\";\r\n\t\t\tcontent+=\"<button class='bg_delete_button'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\t\r\n\t\t\t\r\n\t\t\tcontent+=\"<div class='bg_label label_visible'>\"+EDITORSTRINGS.BG.label_visible+\":</div> <input type='checkbox' data-dataid='hidden' class='param_value' \"+(!bg.hidden ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<div data-bgid='\"+bg.id+\"' class='cmd_block cmd_block_outer'>\";\r\n\t\t\tcontent+=\"<div class='param_values'>\";\t\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_path+\":</div> <input data-dataid='path' class='param_value' value='\"+(bg.path || \"\")+\"'></input>\";\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_fixed+\":</div> <input type='checkbox' data-dataid='isfixed' class='param_value' \"+(bg.isfixed ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<div class='param_values'>\";\t\t\t\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_width+\":</div> <input data-dataid='width' class='param_value' value='\"+(bg.width || 0)+\"'></input>\";\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_height+\": </div><input data-dataid='height' class='param_value' value='\"+(bg.height || 0)+\"'></input>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<div class='param_values'>\";\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_x_offset+\": </div><input data-dataid='xoffset' class='param_value' value='\"+(bg.xoffset || 0)+\"'></input>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"<div class='param_values'>\";\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_y_offset+\": </div><input data-dataid='yoffset' class='param_value' value='\"+(bg.yoffset || 0)+\"'></input>\";\r\n\t\t\tcontent+=\"<div class='bg_label'>\"+EDITORSTRINGS.BG.label_z_offset+\": </div><input data-dataid='zoffset' class='param_value' value='\"+(bg.zoffset || 0)+\"'></input>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t});\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".edit_controls\").innerHTML = content;\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").scrollTop = _this._editorScrollTop;\t\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").addEventListener(\"scroll\", function(){\r\n\t\t\t_this._editorScrollTop = this.scrollTop;\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".definition_select\").addEventListener(\"change\", function(){\r\n\t\t\t_this._currentEnvironmentDefinition = this.value;\r\n\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#save_def\").addEventListener(\"click\", function(){\r\n\t\t\t_this._environmentBuilder.save();\r\n\t\t\t_this._modified = false;\r\n\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#new_def\").addEventListener(\"click\", function(){\r\n\t\t\tvar name = prompt(EDITORSTRINGS.BG.prompt_name) || \"New Animation\";\r\n\t\t\tvar newId = _this._environmentBuilder.newDef(name);\r\n\t\t\t_this._currentEnvironmentDefinition = newId;\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t});\r\n\t\tcontainerNode.querySelector(\"#copy_def\").addEventListener(\"click\", function(){\r\n\t\t\tvar newId = _this._environmentBuilder.copyDef(_this._currentEnvironmentDefinition);\r\n\t\t\t_this._currentEnvironmentDefinition = newId;\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t});\r\n\t\tcontainerNode.querySelector(\"#delete_def\").addEventListener(\"click\", function(){\r\n\t\t\tif(confirm(EDITORSTRINGS.BG.confirm_delete)){\r\n\t\t\t\t_this._environmentBuilder.deleteDef(_this._currentEnvironmentDefinition);\r\n\t\t\t\t_this._currentEnvironmentDefinition = 0;\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t\t}\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#export_def\").addEventListener(\"click\", function(){\r\n\t\t\t_this._environmentBuilder.exportDef(_this._currentEnvironmentDefinition);\t\t\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#import_def\").addEventListener(\"click\", async function(){\r\n\t\t\tlet newId = await _this._environmentBuilder.importDef(_this._currentEnvironmentDefinition);\t\t\r\n\t\t\tif(newId != -1){\r\n\t\t\t\t_this._currentEnvironmentDefinition = newId;\r\n\t\t\t\t_this._modified = false;\r\n\t\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#def_name\").addEventListener(\"blur\", function(){\r\n\t\t\t_this._environmentBuilder.updateName(_this._currentEnvironmentDefinition, this.value);\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#new_bg\").addEventListener(\"click\", function(){\t\t\t\r\n\t\t\t_this._environmentBuilder.newBg(_this._currentEnvironmentDefinition);\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showEnvironmentEditorControls();\t\t\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".bg_delete_button\");\r\n\t\tinputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar bg = this.parentNode.getAttribute(\"data-bgid\");\r\n\t\t\t\tvar c = confirm(EDITORSTRINGS.BG.confirm_delete_layer);\r\n\t\t\t\tif(c){\r\n\t\t\t\t\t_this._environmentBuilder.deleteBg(_this._currentEnvironmentDefinition, bg);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showEnvironmentEditorControls();\r\n\t\t\t\t}\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".param_value\");\r\n\t\tinputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"change\", function(){\r\n\t\t\t\tvar bg = this.closest(\".bg_block\").getAttribute(\"data-bgid\");\r\n\t\t\t\tvar dataId = this.getAttribute(\"data-dataid\");\r\n\t\t\t\tvar value;\r\n\t\t\t\tif(dataId == \"isfixed\"){\r\n\t\t\t\t\tvalue = this.checked;\r\n\t\t\t\t} else if(dataId == \"hidden\"){\r\n\t\t\t\t\tvalue = !this.checked;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = this.value;\r\n\t\t\t\t}\r\n\t\t\t\t_this._environmentBuilder.updateBg(_this._currentEnvironmentDefinition, bg, dataId, value);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showEnvironmentEditorControls();\t\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\t\r\n\t\t_this.registerUnloadListener();\t\r\n\t});\t\r\n}\r\n\r\nSRWEditor.prototype.registerUnloadListener = function(){\r\n\tvar _this = this;\r\n\tif(!_this._unloadListener){\r\n\t\t_this._unloadListener = window.addEventListener(\"beforeunload\", function(event){\r\n\t\t\tif(_this._modified){\r\n\t\t\t\tevent.returnValue = \"You have unsaved changes, exit anyway?\";\r\n\t\t\t}\r\n\t\t});\t\t\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.applyPreferences = function(){\r\n\tvar _this = this;\r\n\tif(_this._preferences){\r\n\t\tObject.keys(_this._preferences).forEach(function(id){\r\n\t\t\tvar elem = document.getElementById(id);\r\n\t\t\tif(elem){\r\n\t\t\t\telem.value = _this._preferences[id];\r\n\t\t\t}\t\t\r\n\t\t});\r\n\t\tif(_this._preferences.actor_select != null){\r\n\t\t\t_this._currentActor = _this._preferences.actor_select;\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._preferences.actor_twin_select != null){\r\n\t\t\t_this._currentActorTwin = _this._preferences.actor_twin_select;\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._preferences.quote_set != null){\r\n\t\t\t_this._currentQuoteSet = _this._preferences.quote_set;\r\n\t\t}\r\n\t\r\n\t\tif(_this._preferences.environment_select != null){\r\n\t\t\t_this._currentEnvironmentDefinition = _this._preferences.environment_select;\r\n\t\t}\r\n\t\r\n\t\tif(_this._preferences.actor_mech_select != null){\r\n\t\t\t_this._currentActorMech = _this._preferences.actor_mech_select;\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._preferences.actor_twin_mech_select != null){\r\n\t\t\t_this._currentActorTwinMech = _this._preferences.actor_twin_mech_select;\r\n\t\t}\r\n\r\n\t\tif(_this._preferences.enemy_select != null){\r\n\t\t\t_this._currentEnemy = _this._preferences.enemy_select;\r\n\t\t}\r\n\t\r\n\t\tif(_this._preferences.enemy_mech_select != null){\r\n\t\t\t_this._currentEnemyMech = _this._preferences.enemy_mech_select;\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._preferences.enemy_twin_select != null){\r\n\t\t\t_this._currentEnemyTwin = _this._preferences.enemy_twin_select;\r\n\t\t}\r\n\t\r\n\t\tif(_this._preferences.enemy_twin_mech_select != null){\r\n\t\t\t_this._currentEnemyTwinMech = _this._preferences.enemy_twin_mech_select;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.showAllyPilotEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tnew _AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](containerNode, this).show();\r\n}\r\n\r\nSRWEditor.prototype.showEnemyPilotEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tnew _EnemyPilotUI_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"](containerNode, this).show();\r\n}\r\n\r\nSRWEditor.prototype.showMechEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tnew _MechUI_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](containerNode, this).show();\r\n}\r\n\r\nSRWEditor.prototype.showWeaponEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tnew _WeaponUI_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](containerNode, this).show();\r\n}\r\n\r\nSRWEditor.prototype.showPatternEditor = function(){\r\n\tvar _this = this;\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tnew _PatternUI_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"](containerNode, this).show();\r\n}\r\n\r\nSRWEditor.prototype.showAttackEditor = function(){\r\n\tvar _this = this;\r\n\t\r\n\t\r\n\t\r\n\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\tvar content = \"\";\r\n\tcontent+=\"<div id='attack_editor'>\";\r\n\tcontent+=\"<div class='edit_controls'>\";\r\n\tcontent+=\"<div class='timeline'>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='edit_panel'>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='preview'>\";\r\n\t\r\n\tcontent+=\"<div class='fps_counter'>\";\r\n\tcontent+=\"0 fps\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='tick_counter'>\";\r\n\tcontent+=\"tick 0\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='camera_info'>\";\r\n\tcontent+=\"<div class='title'>\";\r\n\tcontent+=EDITORSTRINGS.ATTACKS.label_helper;\r\n\tcontent+=\"<input id='helper_target' value='Camera'></input>\";\r\n\tcontent+=\"<img id='refresh_camera' src='\"+_this._svgPath+\"clockwise-rotation.svg'>\";\r\n\t\r\n\tcontent+=\"<img id='hide_camera_info' src='\"+_this._svgPath+\"close-line.svg'>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div id='camera_info_content'>\";\r\n\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='preview_window_container'>\";\r\n\tcontent+=\"<div class='preview_window'>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='preview_controls'>\";\r\n\tcontent+=\"<img id='play_button' src='\"+_this._svgPath+\"play-button.svg'>\";\r\n\tcontent+=\"<img id='pause_button' src='\"+_this._svgPath+\"pause-button.svg'>\";\r\n\t\r\n\tcontent+=\"<img id='stop_button' src='\"+_this._svgPath+\"stop-sign.svg'>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='preview_extra_controls_flex'>\";\r\n\tcontent+=\"<div class='preview_extra_controls'>\";\r\n\t\r\n\tcontent+=\"<div class='extra_control playback'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_play_until+\"</div>\";\r\n\tcontent+=\"<input id='inp_play_until'></input>\";\t\r\n\tcontent+=\"<img id='advance' src='\"+_this._svgPath+\"play-mini-fill.svg'>\";\r\n\tcontent+=\"<img id='fast_forward' src='\"+_this._svgPath+\"speed-fill.svg'>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_play+\"</div>\";\r\n\tcontent+=\"<input id='chk_play_bgm' checked type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_enemy_side+\"</div>\";\r\n\tcontent+=\"<input id='chk_enemy_side' type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_hits+\"</div>\";\r\n\tcontent+=\"<input id='chk_hits' checked type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_destroys+\"</div>\";\r\n\tcontent+=\"<input id='chk_destroys' type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_show_barrier+\"</div>\";\r\n\tcontent+=\"<select id='barriers_select'>\";\r\n\tcontent+=\"<option  value='0'>\"+EDITORSTRINGS.GENERAL.label_no+\"</option>\";\r\n\tcontent+=\"<option  value='1'>\"+EDITORSTRINGS.GENERAL.label_yes+\"</option>\";\r\n\tcontent+=\"<option  value='2'>\"+EDITORSTRINGS.ATTACKS.label_break+\"</option>\";\r\n\t\r\n\tcontent+=\"</select>\";\r\n\t//content+=\"<input id='chk_barriers' type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"<div class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_toggle_pivots+\"</div>\";\r\n\tcontent+=\"<input id='chk_pivots' type='checkbox'></input>\";\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='preview_extra_controls'>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_attack+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_attack+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='quote_set'>\";\r\n\tlet ctr = 0;\r\n\t$dataWeapons.forEach(function(weapon){\r\n\t\tif(weapon && weapon.name){\r\n\t\t\tcontent+=\"<option value='\"+weapon.id+\"'>[\"+String(ctr).padStart(3, \"0\")+\"] \"+weapon.name+\"</option>\"\r\n\t\t}\r\n\t\tctr++;\r\n\t});\r\n\tcontent+=\"</select>\"\r\n\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_environment+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_environment+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='environment_select'>\";\r\n\t\r\n\tcontent+=\"</select>\"\r\n\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_actor+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_actor+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='actor_select'>\";\r\n\tfor(var i = 1; i < $dataActors.length; i++){\r\n\t\tif($dataActors[i].name){\r\n\t\t\tvar id = $dataActors[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentActor ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataActors[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_actor_mech+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_actor_mech+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='actor_mech_select'>\";\r\n\tfor(var i = 1; i < $dataClasses.length; i++){\r\n\t\tif($dataClasses[i].name){\r\n\t\t\tvar id = $dataClasses[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentActorMech ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataClasses[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_actor_twin+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_actor_twin+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='actor_twin_select'>\";\r\n\tcontent+=\"<option \"+(_this._currentActorTwin == -1 ? \"selected\" : \"\")+\" value='-1'>None</option>\";\r\n\tfor(var i = 1; i < $dataActors.length; i++){\r\n\t\tif($dataActors[i].name){\r\n\t\t\tvar id = $dataActors[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentActorTwin ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataActors[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_actor_twin_mech+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_actor_twin_mech+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='actor_twin_mech_select'>\";\r\n\tcontent+=\"<option \"+(_this._currentActorTwinMech == -1 ? \"selected\" : \"\")+\" value='-1'>None</option>\";\r\n\tfor(var i = 1; i < $dataClasses.length; i++){\r\n\t\tif($dataClasses[i].name){\r\n\t\t\tvar id = $dataClasses[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentActorTwin ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataClasses[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_enemy+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_enemy+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='enemy_select'>\";\r\n\tfor(var i = 1; i < $dataEnemies.length; i++){\r\n\t\tif($dataEnemies[i].name){\r\n\t\t\tvar id = $dataEnemies[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentEnemy ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataEnemies[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_enemy_mech+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_enemy_mech+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='enemy_mech_select'>\";\r\n\tfor(var i = 1; i < $dataClasses.length; i++){\r\n\t\tif($dataClasses[i].name){\r\n\t\t\tvar id = $dataClasses[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentEnemyMech ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataClasses[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_enemy_twin+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_enemy_twin+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='enemy_twin_select'>\";\r\n\tcontent+=\"<option \"+(_this._currentEnemyTwin == -1 ? \"selected\" : \"\")+\" value='-1'>None</option>\";\r\n\tfor(var i = 1; i < $dataEnemies.length; i++){\r\n\t\tif($dataEnemies[i].name){\r\n\t\t\tvar id = $dataEnemies[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentEnemyTwin ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataEnemies[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div title='\"+EDITORSTRINGS.ATTACKS.hint_enemy_twin_mech+\"' class='extra_control'>\";\r\n\tcontent+=\"<div class='editor_label'>\"+EDITORSTRINGS.ATTACKS.label_enemy_twin_mech+\"</div>\";\r\n\tcontent+=\"<select class='has_preference' id='enemy_twin_mech_select'>\";\r\n\tcontent+=\"<option \"+(_this._currentEnemyTwinMech == -1 ? \"selected\" : \"\")+\" value='-1'>None</option>\";\r\n\tfor(var i = 1; i < $dataClasses.length; i++){\r\n\t\tif($dataClasses[i].name){\r\n\t\t\tvar id = $dataClasses[i].id;\r\n\t\t\tcontent+=\"<option \"+(id == _this._currentEnemyTwinMech ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+$dataClasses[i].name+\"</option>\";\r\n\t\t}\r\n\t}\r\n\tcontent+=\"</select>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontainerNode.innerHTML = content;\r\n\t\r\n\t_this.applyPreferences();\r\n\t\r\n\t\r\n\tthis.prepareBattleScenePreview();\r\n\t\r\n\t//this._animationBuilder = $battleSceneManager.getAnimationBuilder();\r\n\t//this._environmentBuilder = $battleSceneManager.getEnvironmentBuilder()\r\n\t\r\n\tif(_this._currentEnvironmentDefinition == null){\r\n\t\t_this._currentEnvironmentDefinition = id;\r\n\t}\r\n\t\r\n\t_this._environmentBuilder.isLoaded().then(function(){\r\n\t\tvar content = \"\";\r\n\t\tvar defs = _this._environmentBuilder.getDefinitions();\t\r\n\t\tObject.keys(defs).forEach(function(id){\t\t\t\t\t\r\n\t\t\tcontent+=\"<option value='\"+id+\"'>\"+defs[id].name+\"</option>\";\t\t\r\n\t\t});\t\t\r\n\t\tcontainerNode.querySelector(\"#environment_select\").innerHTML = content;\r\n\t\t_this.applyPreferences();\r\n\t});\r\n\t\r\n\t\r\n\t\r\n\tthis.showAttackEditorControls();\r\n\t\r\n\tdocument.querySelector(\"#actor_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentActor = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#actor_twin_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentActorTwin = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#quote_set\").addEventListener(\"change\", function(){\r\n\t\t_this._currentQuoteSet = this.value;\r\n\t});\t\r\n\t\r\n\tdocument.querySelector(\"#environment_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEnvironmentDefinition = this.value;\r\n\t});\t\r\n\t\r\n\t\r\n\tdocument.querySelector(\"#actor_mech_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentActorMech = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#actor_twin_mech_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentActorTwinMech = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#enemy_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEnemy = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#enemy_twin_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEnemyTwin = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#enemy_mech_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEnemyMech = this.value;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#enemy_twin_mech_select\").addEventListener(\"change\", function(){\r\n\t\t_this._currentEnemyTwinMech = this.value;\r\n\t});\r\n\r\n\tdocument.querySelector(\"#play_button\").addEventListener(\"click\", function(){\r\n\t\tif($battleSceneManager.isPaused()){\r\n\t\t\t$battleSceneManager.startAnimations();\r\n\t\t} else {\r\n\t\t\t$battleSceneManager.resetMaxAnimationTick();\r\n\t\t\t_this.playBattleScene();\r\n\t\t}\t\t\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#pause_button\").addEventListener(\"click\", function(){\r\n\t\tif($battleSceneManager.isPaused()){\r\n\t\t\t$battleSceneManager.startAnimations();\r\n\t\t} else {\r\n\t\t\t$battleSceneManager.pauseAnimations();\r\n\t\t}\r\n\t\t\r\n\t});\t\r\n\t\r\n\tdocument.querySelector(\"#stop_button\").addEventListener(\"click\", function(){\r\n\t\t$battleSceneManager.endScene(true);\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#chk_hits\").addEventListener(\"change\", function(){\r\n\t\t_this._previewAttackHits = this.checked;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#chk_destroys\").addEventListener(\"change\", function(){\r\n\t\t_this._previewAttackDestroys = this.checked;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#chk_pivots\").addEventListener(\"change\", function(){\r\n\t\t$battleSceneManager.toggleUnitPivots(this.checked);\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#barriers_select\").addEventListener(\"change\", function(){\r\n\t\t_this._previewShowsBarriers = this.value * 1;\r\n\t});\t\r\n\t\r\n\tdocument.querySelector(\"#chk_enemy_side\").addEventListener(\"change\", function(){\r\n\t\t_this._enemySideAttack = this.checked;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#chk_play_bgm\").addEventListener(\"change\", function(){\r\n\t\t_this._playBGM = this.checked;\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#inp_play_until\").addEventListener(\"change\", function(){\r\n\t\tlet value = this.value * 1;\r\n\t\tif(!isNaN(value)){\r\n\t\t\t_this._playUntil = value;\r\n\t\t} else {\r\n\t\t\t_this._playUntil = -1;\r\n\t\t}\r\n\t\t$battleSceneManager.setPlayUntil(_this._playUntil);\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#advance\").addEventListener(\"click\", function(){\r\n\t\t_this._fastForward = false;\r\n\t\tdocument.querySelector(\"#fast_forward\").classList.remove(\"active\");\r\n\t\t$battleSceneManager.advanceTick();\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#fast_forward\").addEventListener(\"click\", function(){\r\n\t\t_this._fastForward = !_this._fastForward;\r\n\t\tif(_this._fastForward){\r\n\t\t\tthis.classList.add(\"active\");\r\n\t\t} else {\r\n\t\t\tthis.classList.remove(\"active\");\r\n\t\t}\r\n\t});\r\n\t\t\r\n\tvar preferenceEntries = document.querySelectorAll(\".has_preference\")\r\n\tpreferenceEntries.forEach(function(entry){\r\n\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t_this._preferences[this.id] = this.value;\r\n\t\t\t_this.savePreferences();\r\n\t\t});\r\n\t});\t\r\n\t\r\n\tdocument.querySelector(\"#refresh_camera\").addEventListener(\"click\", function(){\r\n\t\t_this.showCameraState();\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#helper_target\").addEventListener(\"keyup\", function(e){\r\n\t\tif(e.keyCode == 13){\r\n\t\t\t_this.showCameraState();\r\n\t\t}\r\n\t});\r\n\t\r\n\tdocument.querySelector(\"#hide_camera_info\").addEventListener(\"click\", function(){\r\n\t\t_this.clearCameraState();\r\n\t});\r\n\t_this.clearCameraState();\r\n\t/*if(_this._cameraInfoInterval){\r\n\t\tclearInterval(_this._cameraInfoInterval);\r\n\t}\r\n\t_this._cameraInfoContainer = document.querySelector(\"#camera_info_content\");\r\n\t_this._cameraInfoInterval = setInterval(function(){\r\n\t\t_this.showAttackEditorControls();\r\n\t}, 100);*/\r\n}\r\n\r\nSRWEditor.prototype.clearCameraState = function(){\r\n\tvar cameraInfoContainer = document.querySelector(\"#camera_info_content\");\r\n\tif(cameraInfoContainer){\r\n\t\tcameraInfoContainer.innerHTML = \"\";\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.showCameraState = function(){\r\n\tvar cameraInfoContainer = document.querySelector(\"#camera_info_content\");\r\n\t\t\r\n\tif(cameraInfoContainer && $battleSceneManager){\r\n\t\tconst name = document.querySelector(\"#helper_target\").value;\r\n\t\tlet targetObj = $battleSceneManager.getTargetObject(name);\r\n\t\tif(targetObj) {\r\n\t\t\tlet pivotHelper = targetObj.pivothelper;\r\n\t\t\tif(targetObj.parent_handle){\r\n\t\t\t\ttargetObj = targetObj.parent_handle;\r\n\t\t\t}\r\n\t\t\tvar content = \"\";\r\n\t\t\tvar position = targetObj.position;\r\n\t\t\tif(targetObj.handle){\t\t\t\t\r\n\t\t\t\tif(targetObj.parent){\r\n\t\t\t\t\tposition = targetObj.offset;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tposition = targetObj.handle.position;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontent+=\"<div>\"\r\n\t\t\tcontent+=\"<b>Position</b>\"\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\tcontent+=\"<div>\"\r\n\t\t\tcontent+=\"x: <input data-type='position' data-prop='x' value='\"+position.x.toFixed(3)+\"'></input>\";\r\n\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\tcontent+=\"<div>\"\r\n\t\t\tcontent+=\"y: <input data-type='position' data-prop='y' value='\"+position.y.toFixed(3)+\"'></input>\";\r\n\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\tcontent+=\"<div>\"\r\n\t\t\tcontent+=\"z: <input data-type='position' data-prop='z' value='\"+position.z.toFixed(3)+\"'></input>\";\r\n\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t\r\n\t\t\tvar rotation = targetObj.rotation;\r\n\t\t\tif(targetObj.handle){\r\n\t\t\t\tif(targetObj.parent){\r\n\t\t\t\t\trotation = targetObj.offsetRotation;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trotation = targetObj.handle.rotation;\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(rotation){\r\n\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\tcontent+=\"<b>Rotation</b>\"\r\n\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\tcontent+=\"x: <input data-type='rotation' data-prop='x' value='\"+rotation.x.toFixed(3)+\"'></input>\";\r\n\t\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\tcontent+=\"y: <input data-type='rotation' data-prop='y' value='\"+rotation.y.toFixed(3)+\"'></input>\";\r\n\t\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\tcontent+=\"z: <input data-type='rotation' data-prop='z' value='\"+rotation.z.toFixed(3)+\"'></input>\";\r\n\t\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t}\t\r\n\r\n\t\t\tif(pivotHelper){\r\n\t\t\t\tvar rotation = pivotHelper.rotation;\r\n\t\t\t\tif(rotation){\r\n\t\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\t\tcontent+=\"<b>Pivot Rotation</b>\"\r\n\t\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\t\tcontent+=\"x: <input data-type='pivot_rotation' data-prop='x' value='\"+rotation.x.toFixed(3)+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\t\tcontent+=\"y: <input data-type='pivot_rotation' data-prop='y' value='\"+rotation.y.toFixed(3)+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t\tcontent+=\"<div>\"\r\n\t\t\t\t\tcontent+=\"z: <input data-type='pivot_rotation' data-prop='z' value='\"+rotation.z.toFixed(3)+\"'></input>\";\r\n\t\t\t\t\tcontent+=\"<img data-direction=1 class='prop_control increase_prop' src='svg/plus.svg'>\";\r\n\t\t\t\t\tcontent+=\"<img data-direction=-1 class='prop_control decrease_prop' src='svg/minus.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\"\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\tcameraInfoContainer.innerHTML = content;\r\n\t\t\t\r\n\t\t\tfunction handleCameraInput(input){\r\n\t\t\t\tvar type = input.getAttribute(\"data-type\");\r\n\t\t\t\tvar prop = input.getAttribute(\"data-prop\");\r\n\t\t\t\tvar value = input.value;\r\n\t\t\t\tif(!isNaN(value)){\t\t\t\t\t\r\n\t\t\t\t\tif(targetObj.handle){\r\n\t\t\t\t\t\tif(type == \"rotation\"){\r\n\t\t\t\t\t\t\tvar newVector;\r\n\t\t\t\t\t\t\tif(targetObj.parent && !targetObj.ignoreParentRotation){\r\n\t\t\t\t\t\t\t\tvar scale = new BABYLON.Vector3(0, 0, 0);\r\n\t\t\t\t\t\t\t\tvar rotation = new BABYLON.Quaternion();\r\n\t\t\t\t\t\t\t\tvar position = new BABYLON.Vector3(0,0,0);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar tempWorldMatrix = targetObj.parent.getWorldMatrix();\r\n\t\t\t\t\t\t\t\ttempWorldMatrix.decompose(scale, rotation, position);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\trotation = rotation.toEulerAngles();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\ttargetObj.offsetRotation[prop] = value * 1;\r\n\t\t\t\t\t\t\t\tlet offsetVector = new BABYLON.Vector3(targetObj.offsetRotation.x * 1, targetObj.offsetRotation.y * 1, targetObj.offsetRotation.z * 1);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tnewVector = new BABYLON.Vector3(\r\n\t\t\t\t\t\t\t\t\trotation.x + offsetVector.x,\r\n\t\t\t\t\t\t\t\t\trotation.y + offsetVector.y,\r\n\t\t\t\t\t\t\t\t\trotation.z + offsetVector.z,\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewVector = new BABYLON.Vector3().copyFrom(targetObj.handle[type]);\r\n\t\t\t\t\t\t\t\tnewVector[prop] = value * 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttargetObj.handle.setRotation(\r\n\t\t\t\t\t\t\t\tnewVector.x, \r\n\t\t\t\t\t\t\t\tnewVector.y, \r\n\t\t\t\t\t\t\t\tnewVector.z\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(targetObj.parent){\r\n\t\t\t\t\t\t\t\tvar scale = new BABYLON.Vector3(0, 0, 0);\r\n\t\t\t\t\t\t\t\tvar rotation = new BABYLON.Quaternion();\r\n\t\t\t\t\t\t\t\tvar position = new BABYLON.Vector3(0,0,0);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar tempWorldMatrix = targetObj.parent.getWorldMatrix();\r\n\t\t\t\t\t\t\t\ttempWorldMatrix.decompose(scale, rotation, position);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\trotation = rotation.toEulerAngles();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\ttargetObj.offset[prop] = value * 1;\r\n\t\t\t\t\t\t\t\tlet offsetVector = new BABYLON.Vector3(targetObj.offset.x * 1, targetObj.offset.y * 1, targetObj.offset.z * 1);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tnewVector = new BABYLON.Vector3(\r\n\t\t\t\t\t\t\t\t\tposition.x + offsetVector.x,\r\n\t\t\t\t\t\t\t\t\tposition.y + offsetVector.y,\r\n\t\t\t\t\t\t\t\t\tposition.z + offsetVector.z,\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewVector = new BABYLON.Vector3().copyFrom(targetObj.handle[type]);\r\n\t\t\t\t\t\t\t\tnewVector[prop] = value * 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttargetObj.handle.setLocation(\r\n\t\t\t\t\t\t\t\tnewVector.x, \r\n\t\t\t\t\t\t\t\tnewVector.y, \r\n\t\t\t\t\t\t\t\tnewVector.z\r\n\t\t\t\t\t\t\t);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//targetObj.context.update();\r\n\t\t\t\t\t\t//targetObj.context.draw();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(type == \"pivot_rotation\"){\r\n\t\t\t\t\t\t\tvar newVector = new BABYLON.Vector3().copyFrom(pivotHelper.rotation);\r\n\t\t\t\t\t\t\tnewVector[prop] = value * 1;\r\n\t\t\t\t\t\t\tpivotHelper.rotation = newVector;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar newVector = new BABYLON.Vector3().copyFrom(targetObj[type]);\r\n\t\t\t\t\t\t\tnewVector[prop] = value * 1;\r\n\t\t\t\t\t\t\ttargetObj[type] = newVector;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar inputs = cameraInfoContainer.querySelectorAll(\"input\");\r\n\t\t\tinputs.forEach(function(input){\r\n\t\t\t\tinput.addEventListener(\"blur\", function(e){\r\n\t\t\t\t\thandleCameraInput(input);\r\n\t\t\t\t});\r\n\t\t\t\tinput.addEventListener(\"keyup\", function(e){\r\n\t\t\t\t\tif(e.keyCode == 13){\r\n\t\t\t\t\t\thandleCameraInput(input);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet intervalId;\r\n\t\t\tconst clickDelta = 0.1;\r\n\t\t\tvar controls = cameraInfoContainer.querySelectorAll(\".prop_control\");\r\n\t\t\tfor(let control of controls){\r\n\t\t\t\tcontrol.addEventListener(\"mousedown\", function(){\r\n\t\t\t\t\tconst direction = this.getAttribute(\"data-direction\");\r\n\t\t\t\t\tconst delta = clickDelta * direction;\r\n\t\t\t\t\tconst targetElem = this.closest(\"div\").querySelector(\"input\");\r\n\t\t\t\t\tintervalId = setInterval(function(){\r\n\t\t\t\t\t\ttargetElem.value= (targetElem.value * 1 + delta * 1).toFixed(3);\r\n\t\t\t\t\t\ttargetElem.dispatchEvent(new Event('blur', {}))\r\n\t\t\t\t\t}, 40);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontrol.addEventListener(\"click\", function(){\r\n\t\t\t\t\tconst direction = this.getAttribute(\"data-direction\");\r\n\t\t\t\t\tconst delta = clickDelta * direction;\r\n\t\t\t\t\tconst targetElem = this.closest(\"div\").querySelector(\"input\");\r\n\t\t\t\t\ttargetElem.value= (targetElem.value * 1 + delta * 1).toFixed(3);\r\n\t\t\t\t\ttargetElem.dispatchEvent(new Event('blur', {}))\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontrol.addEventListener(\"mouseup\", function(){\r\n\t\t\t\t\tif(intervalId){\r\n\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcontrol.addEventListener(\"mouseleave\", function(){\r\n\t\t\t\t\tif(intervalId){\r\n\t\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcameraInfoContainer.innerHTML = EDITORSTRINGS.ATTACKS.label_missing_object.replace(\"[NAME]\", name);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.showAttackEditorControls = function(){\r\n\tvar _this = this;\r\n\t_this._animationBuilder.isLoaded().then(function(){\r\n\t\tvar containerNode = _this._contentDiv.querySelector(\".content\");\r\n\t\tvar content = \"\";\r\n\t\t\r\n\t\t\r\n\t\tcontent+=\"<div class='selection_controls'>\";\r\n\t\tcontent+=\"<select class='definition_select'>\";\r\n\t\tvar definitions = _this._animationBuilder.getDefinitions();\r\n\t\tObject.keys(definitions).forEach(function(id){\r\n\t\t\tcontent+=\"<option \"+(_this._currentDefinition == id ? \"selected\" : \"\")+\" value='\"+id+\"'>\"+id+\" - \"+definitions[id].name+\"</option>\";\r\n\t\t});\r\n\t\tcontent+=\"</select>\";\r\n\t\tcontent+=\"<div class='selection_control_buttons'>\";\r\n\t\tcontent+=\"<button id='new_def'>\"+EDITORSTRINGS.GENERAL.label_new+\"</button>\";\r\n\t\tcontent+=\"<button id='copy_def'>\"+EDITORSTRINGS.GENERAL.label_copy+\"</button>\";\r\n\t\tcontent+=\"<button id='delete_def'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\r\n\t\tcontent+=\"<button id='export_def'>\"+EDITORSTRINGS.GENERAL.label_export+\"</button>\";\r\n\t\tcontent+=\"<button id='import_def'>\"+EDITORSTRINGS.GENERAL.label_import+\"</button>\";\t\t\r\n\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div id='info_section' class='section'>\";\r\n\t\tcontent+=\"<button id='save_def'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\r\n\t\tcontent+=\"<div class='section_label'>\"+EDITORSTRINGS.GENERAL.label_info+\"</div>\";\r\n\t\tcontent+=\"<div class='section_content'>\";\r\n\t\tcontent+=EDITORSTRINGS.GENERAL.label_name+\"<input id='def_name' value='\"+definitions[_this._currentDefinition].name+\"'></input>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='section'>\";\r\n\t\tcontent+=\"<div class='section_label'>\"+EDITORSTRINGS.GENERAL.label_commands+\"</div>\";\r\n\t\tcontent+=\"<div id='timeline_section' class='section_content'>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='command_tools'>\";\r\n\t\tcontent+=EDITORSTRINGS.ATTACKS.label_sequence+\"<select id='sequence_select'>\";\r\n\t\t_this._sequenceTypes.forEach(function(sequenceInfo){\r\n\t\t\tcontent+=\"<option \"+(_this._currentSequenceType == sequenceInfo.id ? \"selected\" : \"\")+\" value='\"+sequenceInfo.id+\"'>\"+sequenceInfo.name+\"</option>\";\r\n\t\t});\r\n\t\tcontent+=\"</select>\";\r\n\t\t\r\n\t\tcontent+=\"<button id='new_tick'>\"+EDITORSTRINGS.ATTACKS.label_new_tick+\"</button>\";\r\n\t\t\r\n\t\tif(_this._clipboardTick){\r\n\t\t\tcontent+=\"<button class='tick_paste_button'>\"+EDITORSTRINGS.GENERAL.label_paste+\"</button>\";\r\n\t\t}\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"<div class='commands_scroll'>\";\r\n\t\r\n\t\tvar commands = definitions[_this._currentDefinition].data;\r\n\t\tvar sequence = commands[_this._currentSequenceType];\r\n\t\tif(!sequence){\r\n\t\t\tsequence = {};\r\n\t\t}\r\n\t\t\r\n\t\tObject.keys(sequence).forEach(function(tick){\r\n\t\t\tvar tickCommands = sequence[tick];\r\n\t\t\tcontent+=\"<div data-tick='\"+tick+\"' class='tick_block'>\";\r\n\t\t\tcontent+=\"<div data-tick='\"+tick+\"' class='tick_controls'>\";\r\n\t\t\tcontent+=\"<input class='tick_input' value='\"+tick+\"'></input>\";\r\n\t\t\t//content+=\"<button class='tick_button'>Update</button>\";\t\r\n\t\t\tcontent+=\"<button class='tick_delete_button'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\t\r\n\t\t\tcontent+=\"<select class='tick_send_select'>\";\t\r\n\t\t\tcontent+=\"<option value='-1'>\"+EDITORSTRINGS.ATTACKS.label_send_to+\"</option>\";\r\n\t\t\t_this._sequenceTypes.forEach(function(sequenceInfo){\r\n\t\t\t\tif(sequenceInfo.id != _this._currentSequenceType){\r\n\t\t\t\t\tcontent+=\"<option data-name='\"+sequenceInfo.name+\"' value='\"+sequenceInfo.id+\"'>\"+sequenceInfo.name+\"</option>\";\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t\tcontent+=\"</select>\";\t\r\n\t\t\tcontent+=\"<button class='tick_shift_button'>\"+EDITORSTRINGS.ATTACKS.label_shift+\"</button>\";\t\r\n\t\t\tcontent+=\"<button class='tick_copy_button'>\"+EDITORSTRINGS.GENERAL.label_copy+\"</button>\";\t\t\t\r\n\t\t\t\r\n\t\t\tcontent+=\"</div>\"\r\n\t\t\t//content+=\"<button class='tick_play_button'>Play</button>\";\t\t\t\t\r\n\t\t\tcontent+=\"<div>\"\r\n\t\t\tcontent+=\"<button class='tick_add_command'>\"+EDITORSTRINGS.GENERAL.label_new+\"</button>\";\t\t\r\n\t\t\tif(_this._clipboardCommand){\r\n\t\t\t\tcontent+=\"<button class='tick_paste_command'>\"+EDITORSTRINGS.GENERAL.label_paste+\"</button>\";\r\n\t\t\t}\t\t\r\n\t\t\t\t\t\t\r\n\t\t\tcontent+=\"</div>\"\t\r\n\t\t\tvar ctr = 0;\r\n\t\t\tObject.keys(tickCommands).forEach(function(tick){\r\n\t\t\t\tvar command = tickCommands[tick];\r\n\t\t\t\tcontent+=\"<div data-cmdid='\"+command.type+\"' data-cmdidx='\"+(ctr++)+\"' class='cmd_block cmd_block_outer'>\";\r\n\t\t\t\tcontent+=_this.getCommandContent(command);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t});\r\n\t\t\tcontent+=\"</div>\";\r\n\t\t});\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontent+=\"</div>\";\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".edit_controls\").innerHTML = content;\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").scrollTop = _this._editorScrollTop;\t\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").addEventListener(\"scroll\", function(){\r\n\t\t\t_this._editorScrollTop = this.scrollTop;\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".definition_select\").addEventListener(\"change\", function(){\r\n\t\t\t_this._currentDefinition = this.value;\r\n\t\t\t_this.showAttackEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#sequence_select\").addEventListener(\"change\", function(){\r\n\t\t\t_this._currentSequenceType = this.value;\r\n\t\t\t_this.showAttackEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#save_def\").addEventListener(\"click\", function(){\r\n\t\t\t_this._animationBuilder.save();\r\n\t\t\t_this._modified = false;\r\n\t\t\t_this.showAttackEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#new_def\").addEventListener(\"click\", function(){\r\n\t\t\tvar name = prompt(\"Please enter a name\") || \"New Animation\";\r\n\t\t\tvar newId = _this._animationBuilder.newDef(name);\r\n\t\t\t_this._currentDefinition = newId;\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showAttackEditorControls();\r\n\t\t});\r\n\t\tcontainerNode.querySelector(\"#copy_def\").addEventListener(\"click\", function(){\r\n\t\t\tvar newId = _this._animationBuilder.copyDef(_this._currentDefinition);\r\n\t\t\t_this._currentDefinition = newId;\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showAttackEditorControls();\r\n\t\t});\r\n\t\tcontainerNode.querySelector(\"#delete_def\").addEventListener(\"click\", function(){\r\n\t\t\tif(confirm(\"Delete the current definition?\")){\r\n\t\t\t\t_this._animationBuilder.deleteDef(_this._currentDefinition);\r\n\t\t\t\t_this._currentDefinition = 0;\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t}\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#export_def\").addEventListener(\"click\", function(){\r\n\t\t\t_this._animationBuilder.exportDef(_this._currentDefinition);\t\t\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#import_def\").addEventListener(\"click\", async function(){\r\n\t\t\tlet newId = await _this._animationBuilder.importDef(_this._currentDefinition);\t\t\r\n\t\t\tif(newId != -1){\r\n\t\t\t\t_this._currentDefinition = newId;\r\n\t\t\t\t_this._modified = false;\r\n\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#def_name\").addEventListener(\"blur\", function(){\r\n\t\t\t_this._animationBuilder.updateName(_this._currentDefinition, this.value);\r\n\t\t\t_this._modified = true;\r\n\t\t\t_this.showAttackEditorControls();\r\n\t\t});\r\n\t\t\r\n\t\tcontainerNode.querySelector(\"#new_tick\").addEventListener(\"click\", function(){\r\n\t\t\tvar newTick = prompt(\"Please enter the new tick value\") * 1;\r\n\t\t\tvar isUsed = _this._animationBuilder.isUsedTick(_this._currentDefinition, _this._currentSequenceType, newTick);\r\n\t\t\tif(!isUsed){\r\n\t\t\t\t_this._animationBuilder.newTick(_this._currentDefinition, _this._currentSequenceType, newTick);\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t}\t\t\t\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_input\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\tvar isProcessing = false;\r\n\t\t\ttickInput.addEventListener(\"change\", function(){\r\n\t\t\t\tvar originalTick = this.parentNode.getAttribute(\"data-tick\");\r\n\t\t\t\tvar newTick = this.value;\r\n\t\t\t\tif(!isProcessing && originalTick != newTick){\r\n\t\t\t\t\tisProcessing = true;\r\n\t\t\t\t\tvar isUsed = _this._animationBuilder.isUsedTick(_this._currentDefinition, _this._currentSequenceType, newTick);\r\n\t\t\t\t\tvar c = true;\r\n\t\t\t\t\tif(isUsed){\r\n\t\t\t\t\t\tvar c = confirm(EDITORSTRINGS.ATTACKS.confirm_merge_tick);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(c){\r\n\t\t\t\t\t\t_this._animationBuilder.updateTick(_this._currentDefinition, _this._currentSequenceType, originalTick, newTick);\r\n\t\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tisProcessing = false;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_delete_button\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar tick = this.parentNode.querySelector(\".tick_input\").value;\r\n\t\t\t\tvar c = confirm(EDITORSTRINGS.ATTACKS.confirm_delete);\r\n\t\t\t\tif(c){\r\n\t\t\t\t\t_this._animationBuilder.deleteTick(_this._currentDefinition, _this._currentSequenceType, tick);\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t\t}\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\tvar tickSelects = containerNode.querySelectorAll(\".tick_send_select\");\r\n\t\ttickSelects.forEach(function(tickSelect){\r\n\t\t\ttickSelect.addEventListener(\"change\", function(){\r\n\t\t\t\tconst targetSequence = this.value;\r\n\t\t\t\tif(targetSequence != -1 && targetSequence != _this._currentSequenceType){\r\n\t\t\t\t\tvar tick = this.parentNode.querySelector(\".tick_input\").value;\r\n\t\t\t\t\t//var c = confirm(\"Send the selected tick to the \"+this.options[this.selectedIndex ].getAttribute(\"data-name\")+\" sequence? (Will merge with existing ticks)\");\r\n\t\t\t\t\t//if(c){\r\n\t\t\t\t\t\tconst tickCopy = _this._animationBuilder.getTickCopy(_this._currentDefinition, _this._currentSequenceType, tick);\t\r\n\t\t\t\t\t\t_this._animationBuilder.mergeTickIntoSequence(_this._currentDefinition, targetSequence, tick, tickCopy);\t\r\n\t\t\t\t\t\t_this._animationBuilder.deleteTick(_this._currentDefinition, _this._currentSequenceType, tick);\r\n\t\t\t\t\t\t_this.showAttackEditorControls();\t\t\r\n\t\t\t\t\t//} else {\r\n\t\t\t\t\t//\tthis.value = -1;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\t\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_shift_button\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar amount = (prompt(EDITORSTRINGS.ATTACKS.prompt_ticks_count) || 0) * 1;\r\n\t\t\t\tif(!isNaN(amount) && amount != 0){\r\n\t\t\t\t\tvar tick = this.parentNode.querySelector(\".tick_input\").value;\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t_this._animationBuilder.shiftTicks(_this._currentDefinition, _this._currentSequenceType, tick, amount);\r\n\t\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t\t\t} catch(e){\r\n\t\t\t\t\t\talert(e);\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_copy_button\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\t\t\t\t\r\n\t\t\t\t_this._clipboardTickDef = _this._animationBuilder.getTickCopy(_this._currentDefinition, _this._currentSequenceType, tick);\t\t\t\r\n\t\t\t\t_this._clipboardTick = tick;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_paste_button\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\r\n\t\t\t\tif(_this._clipboardTickDef){\r\n\t\t\t\t\tif(!_this._animationBuilder.isUsedTick(_this._currentDefinition, _this._currentSequenceType, _this._clipboardTick)){\r\n\t\t\t\t\t\t_this._animationBuilder.pasteTick(_this._currentDefinition, _this._currentSequenceType, _this._clipboardTick, _this._clipboardTickDef);\t\t\t\t\r\n\t\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t\t_this.showAttackEditorControls();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(EDITORSTRINGS.ATTACKS.alert_tick_in_use.replace(\"[TICK]\", _this._clipboardTick));\r\n\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_add_command\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\t\t\r\n\t\t\t\tvar tick = this.parentNode.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.addInnerCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this._animationBuilder.addCommand(_this._currentDefinition, _this._currentSequenceType, tick);\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\r\n\t\t\t});\r\n\t\t});\t\r\n\r\n\t\tvar tickInputs = containerNode.querySelectorAll(\".tick_paste_command\");\r\n\t\ttickInputs.forEach(function(tickInput){\r\n\t\t\ttickInput.addEventListener(\"click\", function(){\t\t\r\n\t\t\t\tif(_this._clipboardCommand){\r\n\t\t\t\t\tvar tick = this.parentNode.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t\t_this._animationBuilder.addInnerCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, _this._clipboardCommand);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_this._animationBuilder.addCommand(_this._currentDefinition, _this._currentSequenceType, tick, _this._clipboardCommand);\t\t\t\t\t\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t_this._modified = true;\r\n\t\t\t\t\t_this.showAttackEditorControls();\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\t\t\r\n\r\n\t\tvar inputs = containerNode.querySelectorAll(\".delete_command\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\t\t\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.deleteInnerCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this._animationBuilder.deleteCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx);\r\n\t\t\t\t}\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tvar inputs = containerNode.querySelectorAll(\".copy_command\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\t\t\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._clipboardCommand = _this._animationBuilder.getInnerCommandCopy(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this._clipboardCommand = _this._animationBuilder.getCommandCopy(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".command_select\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.changeInnerCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx, this.value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this._animationBuilder.changeCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, this.value);\r\n\t\t\t\t}\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".target_input\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.changeInnerCommandTarget(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx, this.value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this._animationBuilder.changeCommandTarget(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, this.value);\r\n\t\t\t\t}\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".command_param input\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block_outer\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tvar param = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar value = _this.processParamInput(this);\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param_outer\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.changeInnerParamValue(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx, param, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar value = _this.processParamInput(this);\r\n\t\t\t\t\t_this._animationBuilder.changeParamValue(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, param, value);\r\n\t\t\t\t}\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".command_param .copy_from_cam\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\t\t\r\n\t\t\t\tvar referenceNode = this.closest(\".param_values\");\r\n\t\t\t\tvar prop = this.getAttribute(\"data-prop\");\r\n\t\t\t\tconst name = document.querySelector(\"#helper_target\").value;\r\n\t\t\t\tlet targetObj = $battleSceneManager.getTargetObject(name);\r\n\t\t\t\tif(targetObj){\r\n\t\t\t\t\tif(targetObj.parent_handle){\r\n\t\t\t\t\t\ttargetObj = targetObj.parent_handle;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar data = targetObj[prop]; \r\n\t\t\t\t\r\n\t\t\t\t\tif(targetObj.handle){\r\n\t\t\t\t\t\tif(targetObj.parent){\r\n\t\t\t\t\t\t\tif(prop == \"position\"){\r\n\t\t\t\t\t\t\t\tdata = targetObj.offset;\r\n\t\t\t\t\t\t\t} else if(prop == \"rotation\"){\r\n\t\t\t\t\t\t\t\tdata = targetObj.offsetRotation;\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(prop == \"position\"){\r\n\t\t\t\t\t\t\t\tdata = targetObj.handle.position;\r\n\t\t\t\t\t\t\t} else if(prop == \"rotation\"){\r\n\t\t\t\t\t\t\t\tdata = targetObj.handle.rotation;\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\tvar xInput = referenceNode.querySelector(\".param_value[data-dataid='x']\");\t\r\n\t\t\t\t\tif(prop == \"position\"){\r\n\t\t\t\t\t\txInput.value = ((data.x || data._x || 0).toFixed(3)) * $battleSceneManager.getAnimationDirection();\r\n\t\t\t\t\t}\telse {\r\n\t\t\t\t\t\txInput.value = ((data.x || data._x || 0).toFixed(3));\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t\tvar event = new Event('change');\r\n\t\t\t\t\txInput.dispatchEvent(event);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar yInput = referenceNode.querySelector(\".param_value[data-dataid='y']\");\t\r\n\t\t\t\t\tif(prop == \"rotation\"){\r\n\t\t\t\t\t\tyInput.value = (data.y || data._y || 0).toFixed(3) * $battleSceneManager.getAnimationDirection();;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tyInput.value = (data.y || data._y || 0).toFixed(3);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar event = new Event('change');\r\n\t\t\t\t\tyInput.dispatchEvent(event);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar zInput = referenceNode.querySelector(\".param_value[data-dataid='z']\");\t\r\n\t\t\t\t\tzInput.value = (data.z || data._z || 0).toFixed(3);\r\n\t\t\t\t\tvar event = new Event('change');\r\n\t\t\t\t\tzInput.dispatchEvent(event);\r\n\t\t\t\t}\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".command_param .param_select\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block_outer\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tvar param = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar value = _this.processParamInput(this);\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param_outer\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.changeInnerParamValue(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx, param, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar value = _this.processParamInput(this);\r\n\t\t\t\t\t_this._animationBuilder.changeParamValue(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, param, value);\r\n\t\t\t\t}\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".target_select\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\t\r\n\t\t\t\tvar targetInput = this.closest(\".command_target\").querySelector(\".target_input\");\r\n\t\t\t\ttargetInput.value = this.value;\r\n\t\t\t\tvar event = new Event('change');\r\n\t\t\t\ttargetInput.dispatchEvent(event);\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".command_param .position_select\")\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\r\n\t\t\t\tvar container = input.parentNode;\r\n\t\t\t\tvar defaultPositions = $battleSceneManager.getDefaultPositions();\r\n\t\t\t\tvar pos = defaultPositions[this.value];\r\n\t\t\t\t\r\n\t\t\t\tvar xInput = container.querySelector(\"input[data-dataid='x']\");\t\t\t\t\r\n\t\t\t\txInput.value = pos.x;\r\n\t\t\t\tcontainer.querySelector(\"input[data-dataid='y']\").value = pos.y;\r\n\t\t\t\tcontainer.querySelector(\"input[data-dataid='z']\").value = pos.z;\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar event = new Event('change');\r\n\t\t\t\txInput.dispatchEvent(event);\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".command_param .rotation_select\")\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"change\", function(){\t\r\n\t\t\t\tvar container = input.parentNode;\r\n\t\t\t\tvar defaultRotations = $battleSceneManager.getDefaultRotations();\r\n\t\t\t\tvar pos = defaultRotations[this.value];\r\n\t\t\t\t\r\n\t\t\t\tvar xInput = container.querySelector(\"input[data-dataid='x']\");\t\t\t\t\r\n\t\t\t\txInput.value = pos.x;\r\n\t\t\t\tcontainer.querySelector(\"input[data-dataid='y']\").value = pos.y;\r\n\t\t\t\tcontainer.querySelector(\"input[data-dataid='z']\").value = pos.z;\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar event = new Event('change');\r\n\t\t\t\txInput.dispatchEvent(event);\t\r\n\t\t\t});\r\n\t\t});\t\r\n\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".tick_play_button\")\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\t\r\n\t\t\t\tvar tick = this.parentNode.querySelector(\".tick_input\").value;\r\n\t\t\t\t$battleSceneManager.setMaxAnimationTick(tick);\r\n\t\t\t\t_this.playBattleScene();\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".quote_selector_control\")\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\t\r\n\t\t\t\tlet targetSelector = this.parentNode.querySelector(\".quote_selector\");\r\n\t\t\t\tif(targetSelector.getAttribute(\"data-active\") * 1){\r\n\t\t\t\t\ttargetSelector.style.display = \"none\";\r\n\t\t\t\t\ttargetSelector.setAttribute(\"data-active\", 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttargetSelector.setAttribute(\"data-active\", 1);\r\n\t\t\t\t\ttargetSelector.style.display = \"block\";\r\n\t\t\t\t\tlet rect = this.getBoundingClientRect();\r\n\t\t\t\t\ttargetSelector.style.top = rect.bottom + \"px\";\r\n\t\t\t\t\ttargetSelector.style.left = rect.left + \"px\";\r\n\t\t\t\t}\t\t\r\n\t\t\t\tlet value = this.closest(\".command_param\").querySelector(\"input\").value;\t\r\n\t\t\t\tlet result = \"\";\r\n\t\t\t\t\r\n\t\t\t\tlet quoteSet = [];\r\n\t\t\t\ttry {\r\n\t\t\t\t\tquoteSet = _this._battleTextBuilder.getDefinitions().default;\r\n\t\t\t\t\tif(_this._enemySideAttack){\r\n\t\t\t\t\t\tquoteSet = quoteSet.enemy[_this._currentEnemy];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tquoteSet = quoteSet.actor[_this._currentActor];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tquoteSet = quoteSet.attacks[_this._currentQuoteSet].default;\r\n\t\t\t\t\t\r\n\t\t\t\t} catch(e){\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif(quoteSet.length){\r\n\t\t\t\t\t\tfor(let quote of quoteSet){\r\n\t\t\t\t\t\t\tlet line = quote[0];\r\n\t\t\t\t\t\t\tresult+=\"<div  data-quoteid='\"+line.quoteId+\"' class='entry \"+(value == line.quoteId ? \"selected\" : \"\")+\"' >\";\r\n\t\t\t\t\t\t\tresult+=\"<div class='display_name'>\";\r\n\t\t\t\t\t\t\tlet displayName;\r\n\t\t\t\t\t\t\tif(line.displayName){\r\n\t\t\t\t\t\t\t\tdisplayName = line.displayName;\r\n\t\t\t\t\t\t\t} else if(_this._enemySideAttack){\r\n\t\t\t\t\t\t\t\tdisplayName = $dataEnemies[_this._currentEnemy].name;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdisplayName = $dataActors[_this._currentActor].name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult+=displayName;\r\n\t\t\t\t\t\t\tresult+=\"</div>\";\r\n\t\t\t\t\t\t\tresult+=\"<div>\";\r\n\t\t\t\t\t\t\tresult+=line.text;\r\n\t\t\t\t\t\t\tresult+=\"</div>\";\r\n\t\t\t\t\t\t\tresult+=\"</div>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult+=EDITORSTRINGS.GENERAL.hint_no_quote;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(e){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\ttargetSelector.innerHTML = result;\r\n\t\t\t\t\r\n\t\t\t\tvar inputs = targetSelector.querySelectorAll(\".quote_selector .entry\")\r\n\t\t\t\tinputs.forEach(function(input){\r\n\t\t\t\t\tinput.addEventListener(\"click\", function(){\t\t\r\n\t\t\t\t\t\tlet selector = this.parentNode;\r\n\t\t\t\t\t\tselector.style.display = \"none\";\r\n\t\t\t\t\t\tselector.setAttribute(\"data-active\", 0);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet targetInput = this.closest(\".command_param\").querySelector(\"input\");\t\t\t\t\r\n\t\t\t\t\t\ttargetInput.value = this.getAttribute(\"data-quoteid\");\r\n\t\t\t\t\t\tvar event = new Event('change');\r\n\t\t\t\t\t\ttargetInput.dispatchEvent(event);\t\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tcontainerNode.querySelector(\".commands_scroll\").addEventListener(\"scroll\", function(){\r\n\t\t\tvar selectors = containerNode.querySelectorAll(\".quote_selector\")\r\n\t\t\tselectors.forEach(function(selector){\r\n\t\t\t\tselector.style.display = \"none\";\r\n\t\t\t\tselector.setAttribute(\"data-active\", 0);\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\t_this.registerUnloadListener();\t\r\n\t\t\r\n\t\t\r\n\t\tvar inputs = containerNode.querySelectorAll(\".move_command_button\");\r\n\t\tinputs.forEach(function(input){\r\n\t\t\tinput.addEventListener(\"click\", function(){\r\n\t\t\t\tvar direction = this.getAttribute(\"data-direction\");\r\n\t\t\t\tvar tick = this.closest(\".tick_block\").querySelector(\".tick_input\").value;\t\r\n\t\t\t\tvar cmdIdx = this.closest(\".cmd_block\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\tvar isCmdParam = this.closest(\".inner_commands\") != null;\r\n\t\t\t\tif(isCmdParam){\r\n\t\t\t\t\tvar cmdInnerIdx = this.closest(\".cmd_block_inner\").getAttribute(\"data-cmdidx\");\r\n\t\t\t\t\tvar type = this.closest(\".command_param\").getAttribute(\"data-param\");\r\n\t\t\t\t\t_this._animationBuilder.moveInnerCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, type, cmdInnerIdx, direction);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this._animationBuilder.moveCommand(_this._currentDefinition, _this._currentSequenceType, tick, cmdIdx, direction);\r\n\t\t\t\t}\r\n\t\t\t\t_this._modified = true;\r\n\t\t\t\t_this.showAttackEditorControls();\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t});\t\r\n}\r\n\r\nSRWEditor.prototype.processParamInput = function(input){\r\n\tvar param = input.closest(\".command_param\").getAttribute(\"data-param\");\r\n\tvar paramHandlers = {\r\n\t\tposition: function(input){\r\n\t\t\tvar container = input.parentNode;\r\n\t\t\tvar x = container.querySelector(\"input[data-dataid='x']\").value*1;\r\n\t\t\tvar y = container.querySelector(\"input[data-dataid='y']\").value*1;\r\n\t\t\tvar z = container.querySelector(\"input[data-dataid='z']\").value*1;\r\n\t\t\treturn {x: x, y: y, z: z};\r\n\t\t},\r\n\t\tstartPosition: function(input){\r\n\t\t\treturn this.position(input);\r\n\t\t},\r\n\t\trotation: function(input){\r\n\t\t\tvar container = input.parentNode;\r\n\t\t\tvar x = container.querySelector(\"input[data-dataid='x']\").value*1;\r\n\t\t\tvar y = container.querySelector(\"input[data-dataid='y']\").value*1;\r\n\t\t\tvar z = container.querySelector(\"input[data-dataid='z']\").value*1;\r\n\t\t\treturn {x: x, y: y, z: z};\r\n\t\t},\r\n\t\tstartRotation: function(input){\r\n\t\t\treturn this.position(input);\r\n\t\t},\r\n\t\tduration: function(input){\r\n\t\t\treturn input.value*1;\r\n\t\t},\r\n\t\tcatmullRom: function(input){\r\n\t\t\tvar container = input.closest(\".command_param \");\r\n\t\t\tvar pos1 = {};\r\n\t\t\t\r\n\t\t\tfunction parseValue(val){\r\n\t\t\t\tif(val === \"\"){\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val * 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpos1.x = parseValue(container.querySelector(\"div[data-catmullpos='pos1'] input[data-dataid='x']\").value);\r\n\t\t\tpos1.y = parseValue(container.querySelector(\"div[data-catmullpos='pos1'] input[data-dataid='y']\").value);\r\n\t\t\tpos1.z = parseValue(container.querySelector(\"div[data-catmullpos='pos1'] input[data-dataid='z']\").value);\r\n\t\t\t\r\n\t\t\tvar pos4 = {};\r\n\t\t\tpos4.x = parseValue(container.querySelector(\"div[data-catmullpos='pos4'] input[data-dataid='x']\").value);\r\n\t\t\tpos4.y = parseValue(container.querySelector(\"div[data-catmullpos='pos4'] input[data-dataid='y']\").value);\r\n\t\t\tpos4.z = parseValue(container.querySelector(\"div[data-catmullpos='pos4'] input[data-dataid='z']\").value);\r\n\t\t\treturn {pos1: pos1, pos4: pos4};\r\n\t\t}\r\n\t};\r\n\tif(paramHandlers[param]){\r\n\t\treturn paramHandlers[param](input);\r\n\t} else {\r\n\t\treturn input.value;\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.getCommandDisplayInfo = function(command){\r\n\tvar _this = this;\r\n\t\r\n\tif(_this._commandDisplayInfo[command]){\r\n\t\treturn _this._commandDisplayInfo[command]\r\n\t} else {\r\n\t\treturn {\r\n\t\t\thasTarget: true,\r\n\t\t\tparams: [],\r\n\t\t\tdesc: \"\"\r\n\t\t};\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.getCommandContent = function(command, isInner){\r\n\tvar _this = this;\r\n\tvar result = \"\";\r\n\tvar displayInfo = _this.getCommandDisplayInfo(command.type);\r\n\t\r\n\tresult+=\"<div class='command_type command_row'>\";\r\n\tresult+=\"<div class='command_label' title='\"+displayInfo.desc+\"'>\"+EDITORSTRINGS.ATTACKS.label_command+\":</div>\";\r\n\tresult+=_this.getCommandSelect(command.type, isInner);\r\n\tresult+=\"<button class='copy_command'>\"+EDITORSTRINGS.GENERAL.label_copy+\"</button>\";\r\n\tresult+=\"<button class='delete_command'>\"+EDITORSTRINGS.GENERAL.label_delete+\"</button>\";\t\r\n\t\r\n\tresult+=\"<div class='move_command_buttons'>\";\r\n\tresult+=\"<div data-direction='up' class='move_command_button up'>\";\r\n\tresult+=\"<img src='\"+_this._svgPath+\"arrow-up-line.svg'>\";\r\n\tresult+=\"</div>\";\r\n\tresult+=\"<div data-direction='down' class='move_command_button down'>\";\r\n\tresult+=\"<img src='\"+_this._svgPath+\"arrow-down-line.svg'>\";\r\n\tresult+=\"</div>\";\r\n\tresult+=\"</div>\";\r\n\t\r\n\tresult+=\"</div>\";\r\n\t\r\n\tif(displayInfo.hasTarget){\t\r\n\t\tresult+=\"<div class='command_target command_row'><div class='command_label'>\"+EDITORSTRINGS.ATTACKS.label_target+\": </div><input class='target_input' value='\"+command.target+\"'></input>\"+_this.getTargetSelect(command.target, displayInfo.isLightCommand)+\"</div>\";\r\n\t\r\n\t}\r\n\tif(displayInfo.params.length){\r\n\t\tconst aliases = displayInfo.aliases || {};\r\n\t\tresult+=\"<div class='command_row'>\";\r\n\t\tresult+=\"<div class='params_label'>\"+EDITORSTRINGS.ATTACKS.label_parameters+\"</div>\";\r\n\t\tvar params = command.params;\r\n\t\tdisplayInfo.params.forEach(function(param){\r\n\t\t\tvar value = params[param];\r\n\t\t\tresult+=\"<div data-param='\"+param+\"' class='command_param \"+(isInner ? \"\" : \"command_param_outer\")+\"'>\";\r\n\t\t\tresult+=\"<div title='\"+(_this._paramTooltips[param] || \"\")+\"' class='param_label'>\"+(aliases[param] || param)+\": </div>\";\r\n\t\t\tresult+=_this.getParamContent(param, value, displayInfo);\r\n\t\t\tresult+=\"</div>\";\r\n\t\t});\r\n\t\tresult+=\"</div>\";\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nSRWEditor.prototype.getCommandSelect = function(command, isInner){\r\n\tvar _this = this;\r\n\tvar result = \"\";\r\n\tresult+=\"<select class='command_select'>\";\r\n\tObject.keys(_this._commandDisplayInfo).sort().forEach(function(type){\r\n\t\tif(!isInner || (type != \"next_phase\" && type != \"dodge_pattern\")){\r\n\t\t\tresult+=\"<option \"+(command == type ? \"selected\" : \"\")+\" value='\"+type+\"'>\"+type+\"</option>\";\r\n\t\t}\t\t\r\n\t});\r\n\tresult+=\"</select>\";\r\n\treturn result;\r\n}\r\n\r\nSRWEditor.prototype.getTargetSelect = function(target, isLightCommand){\r\n\tvar _this = this;\r\n\tvar result = \"\";\r\n\tresult+=\"<select class='target_select'>\";\r\n\tresult+=\"<option value=''></option>\";\r\n\tlet targets;\r\n\tif(isLightCommand){\r\n\t\ttargets = _this._specialLights;\r\n\t} else {\r\n\t\ttargets = _this._specialTargets;\r\n\t}\r\n\ttargets.forEach(function(type){\r\n\t\tresult+=\"<option \"+(target == type.id ? \"selected\" : \"\")+\" value='\"+type.id+\"'>\"+type.name+\"</option>\";\r\n\t});\r\n\tresult+=\"</select>\";\r\n\treturn result;\r\n}\r\n\r\nSRWEditor.prototype.getParamContent = function(param, value, displayInfo){\r\n\tvar _this = this;\r\n\tvar result = \"\";\r\n\tif(displayInfo.paramAlias && displayInfo.paramAlias[param]){\r\n\t\tparam = displayInfo.paramAlias[param];\r\n\t}\r\n\tif(_this._paramDisplayHandlers[param]){\r\n\t\tresult = _this._paramDisplayHandlers[param](value);\r\n\t\tif(!result){\r\n\t\t\tresult = \"<input value='\"+(value || \"\")+\"'></input>\";\r\n\t\t}\r\n\t} else {\r\n\t\tresult+=\"???\";\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nSRWEditor.prototype.killAudioAfterScene = function(){\r\n\tvar _this = this;\r\n\tif($gameSystem.isSubBattlePhase() == \"after_battle\"){\r\n\t\tAudioManager.stopBgm();\r\n\t} else {\t\t\r\n\t\tsetTimeout(function(){_this.killAudioAfterScene()}, 100);\r\n\t}\t\r\n}\r\n\r\nSRWEditor.prototype.playBattleScene = function(){\r\n\tvar _this = this;\r\n\tif($gameSystem.isSubBattlePhase() == \"after_battle\"){\r\n\t\t$battleSceneManager._UILayerManager.redraw();// ensure the UI is scaled to the preview window's size\r\n\t\t$gameSystem.setSubBattlePhase(\"halt\");\r\n\t\t\r\n\t\tvar weapon = {\r\n\t\t\tid: _this._currentQuoteSet || 1,\r\n\t\t\tname: \"Test\",\r\n\t\t\ttype: \"M\",\r\n\t\t\tpostMoveEnabled: 0,\r\n\t\t\tpower: 0,\r\n\t\t\tminRange: 0,\r\n\t\t\trange:0,\r\n\t\t\thitMod: 0,\r\n\t\t\tcritMod: 0,\r\n\t\t\ttotalAmmo: 0,\r\n\t\t\tcurrentAmmo: 0,\r\n\t\t\tENCost: 50,\r\n\t\t\twillRequired: 0,\r\n\t\t\tterrain: {air: \"C\", land: \"C\", water: \"C\", space: \"C\"},\r\n\t\t\teffects: [],\r\n\t\t\tparticleType: \"\", //missile, funnel, beam, gravity, physical or \"\".\r\n\t\t\tanimId:_this._currentDefinition,\r\n\t\t\tisMap: 0, \r\n\t\t\tmapId: -1,\r\n\t\t\tisCombination: 0,\r\n\t\t\tcombinationWeapons: null,\r\n\t\t\tcombinationType: null,\r\n\t\t\ttextAlias: parseInt($dataWeapons[_this._currentQuoteSet].meta[\"weaponTextAlias\"] || -1)\r\n\t\t}\t\t\t\r\n\t\t\r\n\t\tif(_this._currentQuoteSet){\r\n\t\t\tweapon.isAll = ($dataWeapons[_this._currentQuoteSet].meta.weaponIsAll || 0) * 1;\r\n\t\t}\r\n\t\tlet songId = \"\";\r\n\t\tif(_this._playBGM){\r\n\t\t\tif(_this._enemySideAttack){\r\n\t\t\t\tsongId = $songManager.getEnemySongInfo(_this._currentEnemy) || \"Battle1\";\t\r\n\t\t\t} else {\r\n\t\t\t\tsongId = $songManager.getActorSongInfo(_this._currentActor) || \"Battle1\";\t\r\n\t\t\t}\r\n\t\t\t\t\t\r\n\t\t}\r\n\t\tvar demoConfig = {\r\n\t\t\tenemyFirst: _this._enemySideAttack, // if 0 the actor will move first, if 1 the enemy will move first. This also affects the supports. If 0, the actor support will be attacking otherwise defending. If 1, the enemy support will be attacking otherwise defending.\r\n\t\t\tsongId: songId, // the id of the song that should be played during the battle scene\r\n\t\t\tactor: {\r\n\t\t\t\tid: _this._currentActor, // the id of the actor pilot\r\n\t\t\t\tmechId: _this._currentActorMech, // the id of the actor mech\r\n\t\t\t\taction: _this._enemySideAttack ? \"defend\" : \"attack\", // the action the actor will take: \"attack\", \"defend\", \"evade\". \r\n\t\t\t\tweapon: weapon, // the id of the attack the actor will use. Only used if the action is \"attack\".\r\n\t\t\t\thits: _this._previewAttackHits, // if 0 the attack performed by this unit will miss, if 1 the attack will hit \r\n\t\t\t\tstartHP: 100, // the start HP of the actor in percent\r\n\t\t\t\ttargetEndHP: _this._previewAttackDestroys ? 0 : 50, // the end HP of the target in percent\r\n\t\t\t},\r\n\t\t\t/*actorSupport: { // ommit this section if there is no actor supporter\r\n\t\t\t\tid: 3, // the id of the actor pilot\r\n\t\t\t\taction: \"attack\", // the action the actor will take: \"attack\", \"defend\", \"evade\". \r\n\t\t\t\tweapon: 5, // the id of the attack the actor will use. Only used if the action is \"attack\".\r\n\t\t\t\thits: 1, // if 0 the attack performed by this unit will miss, if 1 the attack will hit \r\n\t\t\t\tstartHP: 100, // the start HP of the actor in percent\r\n\t\t\t\ttargetEndHP: 0, // the end HP of the target in percent\r\n\t\t\t},*/\r\n\t\t\tenemy: {\r\n\t\t\t\tid: _this._currentEnemy, // the id of the enemy pilot\r\n\t\t\t\tmechId: _this._currentEnemyMech, // the id of the enemy mech\r\n\t\t\t\tweapon: weapon, // the id of the attack the actor will use. Only used if the action is \"attack\".\r\n\t\t\t\taction: _this._enemySideAttack ? \"attack\" : \"defend\", // the action the enemy will take: \"attack\", \"defend\", \"evade\". \r\n\t\t\t\thits: _this._previewAttackHits, // if 0 the attack performed by this unit will miss, if 1 the attack will hit \r\n\t\t\t\tstartHP: 100, // the start HP of the enemy in percent\r\n\t\t\t\ttargetEndHP: _this._previewAttackDestroys ? 0 : 50, // the end HP of the target in percent\r\n\t\t\t},\r\n\t\t\t/*enemySupport: { // ommit this section if there is no enemy supporter\r\n\t\t\t\tid: 3, // the id of the enemy pilot\r\n\t\t\t\taction: \"defend\", // the action the enemy will take: \"attack\", \"defend\", \"evade\". \r\n\t\t\t\thits: 1, // if 0 the attack performed by this unit will miss, if 1 the attack will hit \r\n\t\t\t\tweapon: -1, // the id of the attack the actor will use. Only used if the action is \"attack\".\r\n\t\t\t\tstartHP: 100, // the start HP of the enemy in percent\r\n\t\t\t\ttargetEndHP: 0, // the end HP of the target in percent\r\n\t\t\t}\t*/\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._currentActorTwin != -1 && _this._currentActorTwinMech != -1){\r\n\t\t\tdemoConfig.actorTwin = {\r\n\t\t\t\tid: _this._currentActorTwin, // the id of the actor pilot\r\n\t\t\t\tmechId: _this._currentActorTwinMech, // the id of the actor mech\r\n\t\t\t\taction: _this._enemySideAttack ? \"defend\" : \"attack\", // the action the actor will take: \"attack\", \"defend\", \"evade\". \r\n\t\t\t\tweapon: weapon, // the id of the attack the actor will use. Only used if the action is \"attack\".\r\n\t\t\t\thits: _this._previewAttackHits, // if 0 the attack performed by this unit will miss, if 1 the attack will hit \r\n\t\t\t\tstartHP: 100, // the start HP of the actor in percent\r\n\t\t\t\ttargetEndHP: _this._previewAttackDestroys ? 0 : 50, // the end HP of the target in percent\r\n\t\t\t\ttarget: \"twin\"\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(_this._currentEnemyTwin != -1 && _this._currentEnemyTwinMech != -1){\r\n\t\t\tdemoConfig.enemyTwin = {\r\n\t\t\t\tid: _this._currentEnemyTwin, // the id of the enemy pilot\r\n\t\t\t\tmechId: _this._currentEnemyTwinMech, // the id of the enemy mech\r\n\t\t\t\tweapon: weapon, // the id of the attack the actor will use. Only used if the action is \"attack\".\r\n\t\t\t\taction: _this._enemySideAttack ? \"attack\" : \"defend\", // the action the enemy will take: \"attack\", \"defend\", \"evade\". \r\n\t\t\t\thits: _this._previewAttackHits, // if 0 the attack performed by this unit will miss, if 1 the attack will hit \r\n\t\t\t\tstartHP: 100, // the start HP of the enemy in percent\r\n\t\t\t\ttargetEndHP: _this._previewAttackDestroys ? 0 : 50, // the end HP of the target in percent\r\n\t\t\t\ttarget: \"twin\"\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t$battleSceneManager.setDebugBarriers(_this._previewShowsBarriers);\r\n\t\tif(this._playUntil){\r\n\t\t\t$battleSceneManager.setPlayUntil(this._playUntil);\r\n\t\t}\r\n\t\t$battleSceneManager.setFastForward(this._fastForward);\r\n\t\t$gameMap._interpreter.playBattleScene(demoConfig);\r\n\t\tthis.killAudioAfterScene();\r\n\t}\r\n}\r\n\r\nSRWEditor.prototype.isModified = function(){\r\n\treturn this._modified;\r\n}\r\n\r\nSRWEditor.prototype.setModified = function(){\r\n\tthis._modified = true;\r\n}\r\n\r\nSRWEditor.prototype.clearModified = function(){\r\n\tthis._modified = false;\r\n}\r\n\r\nSRWEditor.prototype.generateDist = async function(){\r\n\tconst fs = __webpack_require__(/*! fs */ \"fs\");\r\n\tlet fse = __webpack_require__(/*! fs-extra */ \"./node_modules/fs-extra/lib/index.js\");\r\n\tlet path = __webpack_require__(/*! path */ \"path\");\r\n\tlet base = getBase()+\"\\\\\";\r\n\tlet distPath = base+'\\\\dist\\\\www\\\\';\r\n\t\r\n\tfunction initDir(path){\r\n\t\t// if folder doesn't exists create it\r\n\t\tif (!fs.existsSync(distPath+path)){\r\n\t\t\tfs.mkdirSync(distPath+path, { recursive: true });\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction copyDir(path){\r\n\t\t// if folder doesn't exists create it\r\n\t\tif (!fs.existsSync(distPath+path)){\r\n\t\t\tfs.mkdirSync(distPath+path, { recursive: true });\r\n\t\t}\r\n\t\t//copy directory content including subfolders\r\n\t\tfse.copySync(base+path, distPath+path); \r\n\t}\r\n\t\r\n\tfunction listFiles(Directory, files) {\r\n\t\tfs.readdirSync(Directory).forEach(File => {\r\n\t\t\tconst Absolute = Directory+\"\\\\\"+File;\r\n\t\t\tif (fs.statSync(Absolute).isDirectory()) return listFiles(Absolute, files);\r\n\t\t\telse return files.push(Absolute);\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\tfs.copyFileSync(base+'index.html', distPath+'index.html');\r\n\t\r\n\tcopyDir('js');\t\r\n\tfs.rmSync(distPath+\"js/plugins/src\", { recursive: true });\r\n\t\r\n\tcopyDir('data');\r\n\t\r\n\tcopyDir('effekseer');\r\n\t\r\n\tcopyDir('fonts');\r\n\t\r\n\tcopyDir('icon');\r\n\t\r\n\tcopyDir('shader');\r\n\t\r\n\tcopyDir('svg');\r\n\t\r\n\tcopyDir('text_scripts');\r\n\t\r\n\tcopyDir('UI');\r\n\t\r\n\tlet whiteList = {};\r\n\t\r\n\tfunction append(resourcePath, resourceName, resourceType){\r\n\t\tif(resourceName){\r\n\t\t\twhiteList[resourcePath+resourceName+\".\"+resourceType] = true;\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\tlet files = [];\r\n\tlistFiles(\"img\\\\animations\\\\spirits\", files);\r\n\t\r\n\tfor(let file of files){\r\n\t\twhiteList[file] = true;\r\n\t}\r\n\t\r\n\tappend(\"img\\\\characters\\\\\", \"srpg_set\", \"png\");\r\n\tappend(\"img\\\\animations\\\\\", \"SRWAppear\", \"png\");\r\n\tappend(\"img\\\\animations\\\\\", \"Explosion1\", \"png\");\r\n\tappend(\"img\\\\animations\\\\\", \"SRWDisappear\", \"png\");\r\n\t//database\r\n\t\r\n\tappend(\"img\\\\titles1\\\\\", $dataSystem.title1Name, \"png\");\r\n\tappend(\"img\\\\titles2\\\\\", $dataSystem.title2Name, \"png\");\r\n\t\r\n\tappend(\"audio\\\\bgm\\\\\", $dataSystem.gameoverMe.name, \"ogg\");\r\n\t\r\n\tappend(\"audio\\\\bgm\\\\\", $dataSystem.titleBgm.name, \"ogg\");\r\n\t\r\n\t//only the first 7 are used by the engine(Cursor -> Load)\r\n\tfor(let i = 0; i < 7; i++){\r\n\t\tappend(\"audio\\\\se\\\\\", $dataSystem.sounds[i].name, \"ogg\");\r\n\t}\r\n\t\r\n\t/*\r\n\tfor(let animation of $dataAnimations){\r\n\t\tif(animation){\r\n\t\t\tappend(\"img\\\\animations\\\\\", animation.animation1Name, \"png\");\r\n\t\t\tappend(\"img\\\\animations\\\\\", animation.animation2Name, \"png\");\r\n\t\t}\r\n\t}\r\n\t*/\r\n\t\r\n\tfunction loadAnimAssets(animId){\r\n\t\tlet animation = $dataAnimations[animId];\r\n\t\tif(animation){\r\n\t\t\tappend(\"img\\\\animations\\\\\", animation.animation1Name, \"png\");\r\n\t\t\tappend(\"img\\\\animations\\\\\", animation.animation2Name, \"png\");\r\n\t\t\tif(animation.timings){\r\n\t\t\t\tfor(let timing of animation.timings){\r\n\t\t\t\t\tif(timing.se){\r\n\t\t\t\t\t\tappend(\"audio\\\\se\\\\\", timing.se.name, \"ogg\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\r\n\t}\t\r\n\t\r\n\tfor(let tileset of $dataTilesets){\r\n\t\tif(tileset){\r\n\t\t\tfor(let name of tileset.tilesetNames){\r\n\t\t\t\tappend(\"img\\\\tilesets\\\\\", name, \"png\");\r\n\t\t\t\tappend(\"img\\\\tilesets\\\\\", name, \"txt\");\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor(let actor of $dataActors){\r\n\t\tif(actor){\r\n\t\t\tappend(\"img\\\\faces\\\\\", actor.faceName, \"png\");\t\t\t\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor(let actor of $dataEnemies){\r\n\t\tif(actor){\r\n\t\t\tappend(\"img\\\\faces\\\\\", actor.meta.faceName, \"png\");\t\t\t\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor(let mech of $dataClasses){\r\n\t\tif(mech){\r\n\t\t\tappend(\"img\\\\basic_battle\\\\\", mech.meta.mechBasicBattleSprite, \"png\");\t\t\t\t\t\t\r\n\t\t\tlet battleSceneFiles = [];\t\r\n\t\t\tif(mech.meta.mechBattleSceneSprite){\r\n\t\t\t\ttry {\t\t\t\t\r\n\t\t\t\t\tlistFiles(\"img\\\\SRWBattleScene\\\\\"+mech.meta.mechBattleSceneSprite, battleSceneFiles);\r\n\t\t\t\t\tfor(let file of battleSceneFiles){\r\n\t\t\t\t\t\twhiteList[file] = true;\t\t\r\n\t\t\t\t\t}\t\r\n\t\t\t\t} catch(e){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tappend(\"img\\\\menu\\\\\", mech.meta.mechMenuSprite, \"png\");\t\r\n\t\t\tif(mech.meta.srpgOverworld){\r\n\t\t\t\tlet OWInfo = mech.meta.srpgOverworld.split(\",\");\r\n\t\t\t\tappend(\"img\\\\characters\\\\\", OWInfo[0], \"png\");\t\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tappend(\"img\\\\animations\\\\\", mech.meta.mechSpawnAnimName, \"png\");\t\r\n\t\t\tappend(\"audio\\\\se\\\\\", mech.meta.mechSpawnAnimSoundEffect, \"ogg\");\t\r\n\t\t\t\r\n\t\t\tappend(\"img\\\\animations\\\\\", mech.meta.mechDestroyAnimName, \"png\");\t\r\n\t\t\tappend(\"audio\\\\se\\\\\", mech.meta.mechDestroyAnimSoundEffect, \"ogg\");\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tappend(\"img\\\\basic_battle\\\\\", \"barrier\", \"png\");\t\r\n\tappend(\"img\\\\basic_battle\\\\\", \"damage\", \"png\");\t\r\n\tappend(\"img\\\\basic_battle\\\\\", \"destroyed\", \"png\");\r\n\t\r\n\tfor(let weapon of $dataWeapons){\r\n\t\tif(weapon && weapon.weaponMapId != null){\r\n\t\t\tlet mapAttackInfo = $mapAttackManager.getDefinition(weapon.weaponMapId);\r\n\t\t\tif(mapAttackInfo && mapAttackInfo.animInfo){\r\n\t\t\t\tloadAnimAssets(mapAttackInfo.animInfo.animId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\t\r\n\t\r\n\tlet spiritInfo = $spiritManager.getSpiritDefinitions();\r\n\tfor(let spiritDef of spiritInfo){\r\n\t\tif(spiritDef && spiritDef.animInfo){\r\n\t\t\tappend(\"audio\\\\se\\\\\", spiritDef.animInfo.se, \"ogg\");\t\r\n\t\t\tloadAnimAssets(spiritDef.animInfo.animId);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor(let actorId in $SRWConfig.battleSongs.actorSongMapping){\r\n\t\tappend(\"audio\\\\bgm\\\\\", $SRWConfig.battleSongs.actorSongMapping[actorId], \"ogg\");\t\r\n\t}\r\n\t\r\n\tfor(let enemyId in $SRWConfig.battleSongs.enemySongMapping){\r\n\t\tappend(\"audio\\\\bgm\\\\\", $SRWConfig.battleSongs.enemySongMapping[enemyId], \"ogg\");\t\r\n\t}\r\n\t\r\n\tlet battleAnimBuilder = new BattleAnimationBuilder();\r\n\tawait battleAnimBuilder.isLoaded();\r\n\tlet animList = battleAnimBuilder.getDefinitions();\r\n\tfor(let animId in animList){\r\n\t\tvar animationList = battleAnimBuilder.buildAnimation(animId);\r\n\t\tObject.keys(animationList).forEach(function(animType){\r\n\t\t\tanimationList[animType].forEach(function(batch){\r\n\t\t\t\tbatch.forEach(function(animCommand){\r\n\t\t\t\t\tvar target = animCommand.target;\r\n\t\t\t\t\tvar params = animCommand.params;\r\n\t\t\t\t\tif(animCommand.type == \"play_se\"){\t\t\t\t\t\t\r\n\t\t\t\t\t\tappend(\"audio\\\\se\\\\\", params.seId, \"ogg\");\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(animCommand.type == \"play_rmmv_anim\"){\t\t\t\t\t\t\r\n\t\t\t\t\t\tloadAnimAssets(params.animId);\r\n\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t});\t\t\t\t\r\n\t\t});\r\n\t}\r\n\t\r\n\tlet mvsFiles = [];\r\n\tlistFiles(\"text_scripts\", mvsFiles);\r\n\tfor(let file of mvsFiles){\r\n\t\tif(file.match(/.*\\.mvs$/)){\t\t\t\r\n\t\t\tlet scriptId = file.replace(\"text_scripts\\\\\", \"\").replace(\".mvs\", \"\");\r\n\t\t\tlet eventList = await DataManager.interpretTextScript(scriptId)\t\t\t\t\t\t\r\n\t\t\tfor(let command of eventList){\r\n\t\t\t\tif(command.code == 250){\r\n\t\t\t\t\tappend(\"audio\\\\se\\\\\", command.parameters[0].name, \"ogg\");\t\r\n\t\t\t\t}\r\n\t\t\t\tif(command.code == 241){\r\n\t\t\t\t\tappend(\"audio\\\\bgm\\\\\", command.parameters[0].name, \"ogg\");\t\r\n\t\t\t\t}\t\r\n\t\t\t\tif(command.code == 356){\r\n\t\t\t\t\tlet parts = command.parameters[0].split(\" \");\r\n\t\t\t\t\tif(parts[0] == \"setStageSong\"){\r\n\t\t\t\t\t\tappend(\"audio\\\\bgm\\\\\", parts[1], \"ogg\");\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(parts[0] == \"setCloudScrollImage\"){\r\n\t\t\t\t\t\tappend(\"img\\\\parallaxes\\\\\", parts[1], \"png\");\t\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif(command.code == 212){\t\t\t\t\t\r\n\t\t\t\t\tloadAnimAssets(command.parameters[1]);\r\n\t\t\t\t}\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfiles = [];\r\n\t\r\n\tlistFiles(\"img\", files);\r\n\tlistFiles(\"audio\", files);\r\n\t\r\n\tfor(let file of files){\r\n\t\tif(whiteList[file]){\r\n\t\t\tlet filePathParts = (file).split(\"\\\\\");\r\n\t\t\tfilePathParts.pop();\r\n\t\t\tlet filePath = filePathParts.join(\"\\\\\")\r\n\t\t\tif (!fs.existsSync(distPath+filePath)){\r\n\t\t\t\tfs.mkdirSync(distPath+filePath, { recursive: true });\r\n\t\t\t}\r\n\t\t\tfs.copyFileSync(base+file, distPath+file);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\tcopyDir(\"img\\\\pictures\");\r\n\tcopyDir(\"img\\\\SRWBattlebacks\");\r\n\tcopyDir(\"img\\\\system\");\r\n\t\r\n\tinitDir(\"img\\\\SRWBattleScene\");\r\n\tfs.copyFileSync(base+'\\\\img\\\\SRWBattleScene\\\\shadow.png', distPath+'\\\\img\\\\SRWBattleScene\\\\shadow.png');\r\n\tfs.copyFileSync(base+'\\\\img\\\\SRWBattleScene\\\\battleFade.png', distPath+'\\\\img\\\\SRWBattleScene\\\\battleFade.png');\r\n\tcopyDir(\"img\\\\SRWBattleScene\\\\opacityTextures\");\r\n\t\r\n\tinitDir(\"audio\\\\me\");\r\n\tinitDir(\"audio\\\\bgs\");\r\n\tinitDir(\"audio\\\\se\");\r\n\t\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWAppear.ogg', distPath+'\\\\audio\\\\se\\\\SRWAppear.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWAttack.ogg', distPath+'\\\\audio\\\\se\\\\SRWAttack.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWDisappear.ogg', distPath+'\\\\audio\\\\se\\\\SRWDisappear.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWDoubleImage.ogg', distPath+'\\\\audio\\\\se\\\\SRWDoubleImage.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWExplosion.ogg', distPath+'\\\\audio\\\\se\\\\SRWExplosion.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWFloat.ogg', distPath+'\\\\audio\\\\se\\\\SRWFloat.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWHit.ogg', distPath+'\\\\audio\\\\se\\\\SRWHit.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWHit_Barrier.ogg', distPath+'\\\\audio\\\\se\\\\SRWHit_Barrier.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWHit_Barrier_Break.ogg', distPath+'\\\\audio\\\\se\\\\SRWHit_Barrier_Break.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWHit_Crit.ogg', distPath+'\\\\audio\\\\se\\\\SRWHit_Crit.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWJamming.ogg', distPath+'\\\\audio\\\\se\\\\SRWJamming.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWLand.ogg', distPath+'\\\\audio\\\\se\\\\SRWLand.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWLevelUp.ogg', distPath+'\\\\audio\\\\se\\\\SRWLevelUp.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWMastery.ogg', distPath+'\\\\audio\\\\se\\\\SRWMastery.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWMiss.ogg', distPath+'\\\\audio\\\\se\\\\SRWMiss.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWParry.ogg', distPath+'\\\\audio\\\\se\\\\SRWParry.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWPowerUp.ogg', distPath+'\\\\audio\\\\se\\\\SRWPowerUp.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWShield.ogg', distPath+'\\\\audio\\\\se\\\\SRWShield.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWShootDown.ogg', distPath+'\\\\audio\\\\se\\\\SRWShootDown.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWSubmerge.ogg', distPath+'\\\\audio\\\\se\\\\SRWSubmerge.ogg');\r\n\tfs.copyFileSync(base+'\\\\audio\\\\se\\\\SRWTransform.ogg', distPath+'\\\\audio\\\\se\\\\SRWTransform.ogg');\r\n\t\r\n\t\r\n\t\r\n\talert(\"Dist package created\");\r\n}\r\n\r\nSRWEditor.prototype.generateAllyPilotOverview = function(){\r\n\tlet dataProvider = new _AllyPilotUI_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\r\n\tdataProvider.loadData();\r\n\tlet result = [];\r\n\tfor(let i = 0; i < dataProvider._data.length; i++){\r\n\t\tdataProvider._currentId = i;\r\n\t\tconst entry = dataProvider._data[i];\r\n\t\tif(entry && entry.name){\r\n\t\t\tresult.push(entry.name)\r\n\t\t\tresult.push(\"Terrain: \"+dataProvider.getMetaValue(\"pilotTerrain\"));\r\n\t\t\tlet aceInfo = $pilotAbilityManager.getDefinitions()[dataProvider.getMetaValue(\"pilotAbilityAce\")];\r\n\t\t\tif(aceInfo){\r\n\t\t\t\tresult.push(\"Ace: \"+aceInfo.name+\" (\"+aceInfo.desc+\")\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(\"Ace: None\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresult.push(\"Tags: \"+dataProvider.getMetaValue(\"pilotTags\"));\r\n\t\t\tresult.push(\"\\nStats\");\r\n\t\t\tconst stats = [\"SP\", \"Melee\", \"Ranged\", \"Skill\", \"Evade\", \"Hit\"];\r\n\t\t\tfor(const stat of stats){\r\n\t\t\t\tvar value = dataProvider.getMetaValue(\"pilot\"+stat+\"Growth\");\r\n\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\tvar type = parts.length > 1 ? \"curve\" : \"flat\";\r\n\t\t\t\tresult.push(\"\\t\"+stat+\":\"+(stat == \"SP\" ? \"\\t\" : \"\")+\"\\t\"+dataProvider.getMetaValue(\"pilotBase\"+stat)+\"\\t (\"+type+\", \"+value+\")\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresult.push(\"\\nSpirits\");\r\n\t\t\tfor(let j = 1; j <= 6; j++){\r\n\t\t\t\tvar value = dataProvider.getMetaValue(\"pilotSpirit\"+j);\r\n\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\tvar learnedAt = parts[1] || 0;\r\n\t\t\t\tvar cost = parts[2] || 0;\r\n\t\t\t\tlet def = $spiritManager.getSpiritDefinitions()[id];\r\n\t\t\t\tif(def){\r\n\t\t\t\t\tresult.push(\"\\t\"+def.name+\"\\t cost: \"+cost+\"\\t learned at: \"+learnedAt);\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresult.push(\"\\nAbilities\");\r\n\t\t\t\r\n\t\t\tfor(var idx = 0; idx < 200; idx++){\r\n\t\t\t\tvar value = dataProvider.getMetaValue(\"pilotAbility\"+idx);\r\n\t\t\t\tvar parts = value.split(\",\");\r\n\t\t\t\tvar id = parts[0] || -1;\r\n\t\t\t\tvar abilityLevel = parts[1] || 0;\r\n\t\t\t\tvar requiredLevel = parts[2] || 0;\r\n\t\t\t\t\r\n\t\t\t\tlet def;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdef\t= $pilotAbilityManager.getAbilityDef(id);\r\n\t\t\t\t} catch(e){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(def){\r\n\t\t\t\t\tresult.push(\"\\t\"+def.name+\"\\t level: \"+abilityLevel+\"\\t learned at: \"+requiredLevel);\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\tresult.push(\"================================\\n\");\r\n\t\t}\r\n\t}\r\n\treturn result.join(\"\\n\");\r\n}\r\n\n\n//# sourceURL=webpack://src/./js/Editor/SRW_editor.js?");

/***/ }),

/***/ "./js/Editor/WeaponUI.js":
/*!*******************************!*\
  !*** ./js/Editor/WeaponUI.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ WeaponUI)\n/* harmony export */ });\n/* harmony import */ var _EditorUI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EditorUI.js */ \"./js/Editor/EditorUI.js\");\n/* harmony import */ var _DBList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DBList.js */ \"./js/Editor/DBList.js\");\n/* harmony import */ var _MapAttackUI_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MapAttackUI.js */ \"./js/Editor/MapAttackUI.js\");\n\r\n\r\n\r\n\r\n\r\nfunction WeaponUI(container, mainUIHandler){\r\n\t_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].call(this, container, mainUIHandler);\r\n\tthis._dataFile = \"data/MechWeapons.json\";\r\n\tthis._vanillaFile = \"data/Weapons.json\";\r\n\tthis._gameVar = \"$dataWeapons\";\r\n}\r\n\r\nWeaponUI.prototype = Object.create(_EditorUI_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype);\r\nWeaponUI.prototype.constructor = WeaponUI;\r\n\r\nWeaponUI.prototype.initPropertyHandlers = function(){\r\n\tlet _this = this;\r\n\tvar containerNode = _this._container;\r\n\t_this._propertyHandlers = {\r\n\t\tname: {\r\n\t\t\tcreateControls(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.GENERAL.label_name;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='prop_name' value='\"+entry.name+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.GENERAL.label_editor_tag;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='editor_tag' value='\"+_this.getMetaValue(\"editorTag\")+\"'></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(entry){\r\n\t\t\t\tentry = _this.getCurrentEntry();\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_name\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tentry.name = this.value;\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\tcontainerNode.querySelector(\"#editor_tag\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"editorTag\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\ttype: {\r\n\t\t\tcreateControls(){\t\t\t\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div title='' class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_type;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponType\");\r\n\t\t\t\tif(!value){\r\n\t\t\t\t\tvalue = \"R\";\r\n\t\t\t\t}\r\n\t\t\t\tvar options = [\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_melee, value: \"M\"},\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_ranged, value: \"R\"},\r\n\t\t\t\t];\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<select id='wep_type_select'>\";\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[i].value == value ? \"selected\" : \"\")+\"  value='\"+options[i].value+\"'>\"+options[i].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#wep_type_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponType\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tpost_move: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_post_move;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='weapon_post_move' type=checkbox \"+(_this.getMetaValue(\"weaponPostMoveEnabled\") * 1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_post_move\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponPostMoveEnabled\", this.checked ? 1 : 0);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t}, \t\r\n\t\tpower: handleDefaultProp(\"weaponPower\", EDITORSTRINGS.WEAPON.label_power),\t\t\r\n\t\tmin_range: handleDefaultProp(\"weaponMinRange\", EDITORSTRINGS.WEAPON.label_min_range),\r\n\t\trange: handleDefaultProp(\"weaponRange\", EDITORSTRINGS.WEAPON.label_range),\r\n\t\tterrain: {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=_this.createTerrainControls(\"weaponTerrain\");\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tlet entries = containerNode.querySelectorAll(\".terrain_container .entry\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar parts = _this.getMetaValue(\"weaponTerrain\").split(\"\");\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-scoreidx\");\r\n\t\t\t\t\t\tvar score = this.getAttribute(\"data-score\");\r\n\t\t\t\t\t\tparts[idx] = score;\r\n\t\t\t\t\t\t_this.setMetaValue(\"weaponTerrain\", parts.join(\"\"));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tammo: handleDefaultProp(\"weaponAmmo\", EDITORSTRINGS.WEAPON.label_ammo),\r\n\t\tEN: handleDefaultProp(\"weaponEN\", EDITORSTRINGS.WEAPON.label_EN),\r\n\t\tMP: handleDefaultProp(\"weaponMP\", EDITORSTRINGS.WEAPON.label_MP),\r\n\t\twill: handleDefaultProp(\"weaponWill\", EDITORSTRINGS.WEAPON.label_will),\r\n\t\thit_mod: handleDefaultProp(\"weaponHitMod\", EDITORSTRINGS.WEAPON.label_hit_mod),\r\n\t\tcrit_mod: handleDefaultProp(\"weaponCritMod\", EDITORSTRINGS.WEAPON.label_crit_mod),\r\n\t\tcategory: handleDefaultProp(\"weaponCategory\", EDITORSTRINGS.WEAPON.label_category),\r\n\t\tattr1: handleDefaultProp(\"weaponAttribute1\", EDITORSTRINGS.WEAPON.label_primary_attr),\r\n\t\tattr2: handleDefaultProp(\"weaponAttribute2\", EDITORSTRINGS.WEAPON.label_secondary_attr),\r\n\t\tinvalid_tags: handleDefaultProp(\"weaponInvalidTags\", EDITORSTRINGS.WEAPON.label_invalid_target_tags),\r\n\t\tupgrade_type: {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tvar idx = _this.getMetaValue(\"weaponUpgradeType\") || 0;\r\n\t\t\t\tvar options = Object.keys(ENGINE_SETTINGS.WEAPON_UPGRADE_TYPES);\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_upgrade_type;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='weapon_upgrade_type'>\";\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\r\n\t\t\t\t\tcontent+=\"<option \"+(i == idx ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+i+\"</option>\";\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar typeSummary = [];\r\n\t\t\t\tvar typeData = ENGINE_SETTINGS.WEAPON_UPGRADE_TYPES[options[idx]];\r\n\t\t\t\tif(typeData){\r\n\t\t\t\t\tfor(var i = 0; i < typeData.length; i++){\r\n\t\t\t\t\t\ttypeSummary.push(\"Level \"+(i+1)+\": \"+typeData[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontent+=\"<img title='\"+(typeSummary.join(\"\\n\"))+\"' class='view_type_costs_icon' img src='\"+_this._svgPath+\"eye-line.svg'>\"\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_upgrade_type\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponUpgradeType\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t\tis_counter: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_always_counter;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='weapon_is_counter' type=checkbox \"+(_this.getMetaValue(\"weaponIsCounter\") * 1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_is_counter\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponIsCounter\", this.checked ? 1 : 0);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t}, \r\n\t\tis_counter_only: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_only_counter;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='weapon_only_counter' type=checkbox \"+(_this.getMetaValue(\"weaponIsCounterOnly\") * 1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_only_counter\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponIsCounterOnly\", this.checked ? 1 : 0);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t}, \r\n\t\thp_tresh: handleDefaultProp(\"weaponHPThreshold\", EDITORSTRINGS.WEAPON.label_HP_treshold),\r\n\t\tis_all: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_ALL;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='weapon_is_ALL' type=checkbox \"+(_this.getMetaValue(\"weaponIsAll\") * 1 ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_is_ALL\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponIsAll\", this.checked ? 1 : 0);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tanimation: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table sub_section'>\";\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_animation;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='anim_select'>\";\r\n\t\t\t\tvar animData = _this._mainUIHandler.getAnimationDefs();\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponAnimId\");\r\n\t\t\t\tcontent+=\"<option title='' value=''>System Default</option>\";\r\n\t\t\t\tvar options = Object.keys(animData);\r\n\t\t\t\tfor(var j = 0; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[j] == value ? \"selected\" : \"\")+\" value='\"+options[j]+\"'>\"+animData[options[j]].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_animation_ally;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='anim_ally_select'>\";\r\n\t\t\t\tvar animData = _this._mainUIHandler.getAnimationDefs();\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponVSAllyAnimId\");\r\n\t\t\t\tcontent+=\"<option title='' value=''>System Default</option>\";\r\n\t\t\t\tvar options = Object.keys(animData);\r\n\t\t\t\tfor(var j = 0; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[j] == value ? \"selected\" : \"\")+\" value='\"+options[j]+\"'>\"+animData[options[j]].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table sub_section'>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_basic_animation;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='anim_bb_select'>\";\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponBBAnimId\");\r\n\t\t\t\tcontent+=\"<option title='' value='-1'>None</option>\";\r\n\t\t\t\tvar options = $dataAnimations;\r\n\t\t\t\tfor(var j = 1; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[j].id == value ? \"selected\" : \"\")+\" value='\"+options[j].id+\"'>\"+String(j).padStart(4, \"0\")+\" \"+options[j].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBAnimId_scale\", EDITORSTRINGS.WEAPON.label_basic_animation_scale, \"\", EDITORSTRINGS.WEAPON.label_percent);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBAnimId_rate\", EDITORSTRINGS.WEAPON.label_basic_animation_rate, \"\", EDITORSTRINGS.WEAPON.label_frames);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBAnimId_XOff\", EDITORSTRINGS.WEAPON.label_basic_animation_x_off, \"\", EDITORSTRINGS.WEAPON.label_percent);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBAnimId_YOff\", EDITORSTRINGS.WEAPON.label_basic_animation_y_off, \"\", EDITORSTRINGS.WEAPON.label_percent);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table sub_section'>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_basic_animation_ally;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='anim_bb_ally_select'>\";\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponBBVSAllyAnimId\");\r\n\t\t\t\tcontent+=\"<option title='' value='-1'>None</option>\";\r\n\t\t\t\tvar options = $dataAnimations;\r\n\t\t\t\tfor(var j = 1; j < options.length; j++){\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[j].id == value ? \"selected\" : \"\")+\" value='\"+options[j].id+\"'>\"+String(j).padStart(4, \"0\")+\" \"+options[j].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBVSAllyAnimId_scale\", EDITORSTRINGS.WEAPON.label_basic_animation_scale_ally, \"\", EDITORSTRINGS.WEAPON.label_percent);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBVSAllyAnimId_rate\", EDITORSTRINGS.WEAPON.label_basic_animation_rate, \"\", EDITORSTRINGS.WEAPON.label_frames);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBVSAllyAnimId_XOff\", EDITORSTRINGS.WEAPON.label_basic_animation_x_off, \"\", EDITORSTRINGS.WEAPON.label_percent);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row '>\";\r\n\t\t\t\tcontent+=_this.createValueInput(\"weaponBBVSAllyAnimId_YOff\", EDITORSTRINGS.WEAPON.label_basic_animation_y_off, \"\", EDITORSTRINGS.WEAPON.label_percent);\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#anim_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponAnimId\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t\tcontainerNode.querySelector(\"#anim_ally_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponVSAllyAnimId\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#anim_bb_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponBBAnimId\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#anim_bb_ally_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponBBVSAllyAnimId\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t\t\r\n\t\t\t\tconst handledProps = [\r\n\t\t\t\t\t\"weaponBBVSAllyAnimId_scale\",\r\n\t\t\t\t\t\"weaponBBAnimId_scale\",\r\n\t\t\t\t\t\"weaponBBAnimId_rate\",\r\n\t\t\t\t\t\"weaponBBVSAllyAnimId_rate\",\r\n\t\t\t\t\t\"weaponBBAnimId_XOff\",\r\n\t\t\t\t\t\"weaponBBVSAllyAnimId_XOff\",\r\n\t\t\t\t\t\"weaponBBAnimId_YOff\",\r\n\t\t\t\t\t\"weaponBBVSAllyAnimId_YOff\"\r\n\t\t\t\t];\r\n\t\t\t\t\r\n\t\t\t\tfor(const prop of handledProps){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\teffects: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $weaponEffectManager.getDefinitions();\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.hint_effects;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tfunction createEffectControl(idx){\t\t\t\t\t\r\n\t\t\t\t\tvar content = \"\";\r\n\t\t\t\t\tvar id = _this.getMetaValue(\"weaponEffect\"+idx);\r\n\t\t\t\t\tif(id == \"\"){\r\n\t\t\t\t\t\tid = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"#\"+String(idx + 1).padStart(2,0);\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='weapon_effect_\"+idx+\"'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].desc)+\"' value='\"+i+\"'>\"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_affects;\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tvar targetSetting = _this.getMetaValue(\"weaponEffectTargeting\"+idx);\r\n\t\t\t\t\tvar options = [\r\n\t\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_target_both, value: \"all\"},\r\n\t\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_target_enemies, value: \"enemy\"},\r\n\t\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_target_allies, value: \"ally\"},\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+idx+\"' id='weapon_effect_target_\"+idx+\"'>\";\r\n\t\t\t\t\tfor(var i = 0; i < options.length; i++){\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent+=\"<option \"+(options[i].value == targetSetting ? \"selected\" : \"\")+\" value='\"+options[i].value+\"'>\"+options[i].name+\"</option>\";\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\t\t\t\t\r\n\t\t\t\t\treturn content;\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"<div class=''>\";\t\r\n\t\t\t\tfor(var i = 0; i < 10; i++){\r\n\t\t\t\t\tcontent+=createEffectControl(i);\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tfor(var i = 0; i < 10; i++){\r\n\t\t\t\t\tcontainerNode.querySelector(\"#weapon_effect_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\t_this.setMetaValue(\"weaponEffect\"+idx, this.value);\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontainerNode.querySelector(\"#weapon_effect_target_\"+i).addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\t_this.setMetaValue(\"weaponEffectTargeting\"+idx, this.value);\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmap_attack: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar abilityDefs = $mapAttackManager.getDefinitions();\r\n\t\t\t\tvar content = \"\";\r\n\r\n\t\t\t\r\n\t\t\t\tvar id = _this.getMetaValue(\"weaponMapId\");\r\n\t\t\t\tif(id == \"\"){\r\n\t\t\t\t\tid = null;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tif(id != null){\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.hint_is_map;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.hint_is_regular;\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_attack_id;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='map_attack'>\";\r\n\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\tfor(var i = 0; i < abilityDefs.length; i++){\r\n\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == id ? \"selected\" : \"\")+\"  value='\"+i+\"'>\"+String(i).padStart(3, \"0\")+\" \"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tif(id == null){\r\n\t\t\t\t\tcontent+=\"<button id='edit_map_attack'>New</button>\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontent+=\"<button id='edit_map_attack'>Edit</button>\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_ignore_friendlies;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tlet ignoresFriendlies = _this.getMetaValue(\"weaponIgnoresFriendlies\");\r\n\t\t\t\tif(ignoresFriendlies == null || ignoresFriendlies == \"\"){\r\n\t\t\t\t\tignoresFriendlies = 1;\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"<input id='map_ignore_friendlies' type=checkbox \"+(!(ignoresFriendlies * 1) ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_allies_interaction;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tvar interactionType = _this.getMetaValue(\"weaponAllyInteraction\");\r\n\t\t\t\t\r\n\t\t\t\tvar options = [\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_damage_and_status, value: \"damage_and_status\"},\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_status_only, value: \"status\"},\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_damage_only, value: \"damage\"},\r\n\t\t\t\t];\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<select id='wep_ally_interaction'>\";\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[i].value == interactionType ? \"selected\" : \"\")+\"  value='\"+options[i].value+\"'>\"+options[i].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_allies_counter;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tlet alliesCounter = _this.getMetaValue(\"weaponAlliesCounter\");\r\n\t\t\t\tif(alliesCounter == null || alliesCounter == \"\"){\r\n\t\t\t\t\talliesCounter = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcontent+=\"<input id='wep_allies_counter' type=checkbox \"+((alliesCounter * 1) ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_hit_enemies;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<input id='map_ignore_enemies' type=checkbox \"+(!(_this.getMetaValue(\"weaponIgnoresEnemies\") * 1) ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_enemies_interaction;\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tvar interactionType = _this.getMetaValue(\"weaponEnemyInteraction\");\r\n\t\t\t\t\r\n\t\t\t\tvar options = [\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_damage_and_status, value: \"damage_and_status\"},\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_status_only, value: \"status\"},\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_damage_only, value: \"damage\"},\r\n\t\t\t\t];\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<select id='wep_enemy_interaction'>\";\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[i].value == interactionType ? \"selected\" : \"\")+\"  value='\"+options[i].value+\"'>\"+options[i].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_enemies_counter;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tlet enemiesCounter = _this.getMetaValue(\"weaponEnemiesCounter\");\r\n\t\t\t\tif(enemiesCounter == null || enemiesCounter == \"\"){\r\n\t\t\t\t\tenemiesCounter = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcontent+=\"<input id='wep_enemies_counter' type=checkbox \"+((enemiesCounter * 1) ? \"checked\" : \"\")+\"></input>\";\r\n\t\t\t\tcontent+=\"</div>\";\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#map_attack\").addEventListener(\"change\", function(){\r\n\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t_this.setMetaValue(\"weaponMapId\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#edit_map_attack\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tvar mapAttackId = _this.getMetaValue(\"weaponMapId\");\r\n\t\t\t\t\tif(mapAttackId == \"\"){\r\n\t\t\t\t\t\tmapAttackId = null;\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tnew _MapAttackUI_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](_this._container, mapAttackId, _this, {\r\n\t\t\t\t\t\t\"new\": function(id){\r\n\t\t\t\t\t\t\t_this.setMetaValue(\"weaponMapId\", id);\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"updated\": function(){\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"deleted\": function(){\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.setMetaValue(\"weaponMapId\", \"\");\r\n\t\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}).show();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tignore_friendlies: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#map_ignore_friendlies\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponIgnoresFriendlies\", this.checked ? 0 : 1);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#map_ignore_enemies\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponIgnoresEnemies\", this.checked ? 0 : 1);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#wep_ally_interaction\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponAllyInteraction\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#wep_enemy_interaction\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponEnemyInteraction\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#wep_allies_counter\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponAlliesCounter\", this.checked ? 1 : 0);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#wep_enemies_counter\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponEnemiesCounter\", this.checked ? 1 : 0);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\r\n\t\t\t}\r\n\t\t}, \t\r\n\t\tcombo_properties: {\r\n\t\t\tcreateControls(){\t\t\t\t\t\t\t\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='table'>\";\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_combo_type;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponComboType\");\r\n\t\t\t\tvar options = [\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_adjacent, value: \"0\"},\r\n\t\t\t\t\t{name: EDITORSTRINGS.WEAPON.label_on_map, value: \"1\"},\r\n\t\t\t\t];\r\n\t\t\t\tcontent+=\"<select id='combo_type_select'>\";\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<option \"+(options[i].value == value ? \"selected\" : \"\")+\"  value='\"+options[i].value+\"'>\"+options[i].name+\"</option>\";\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\r\n\t\t\t\tcontent+=\"<div title='' class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_required_weapons;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transformation_scroll'>\";\r\n\t\t\t\tcontent+=\"<div class='table'>\";\r\n\t\t\t\t\r\n\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"weaponComboWeapons\") || \"[]\");\r\n\t\t\t\tvar abilityDefs = $dataWeapons;\r\n\t\t\t\tfor(var i = 0; i < value.length; i++){\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='row'>\";\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"<select data-idx='\"+i+\"' class='combo_weapon_select'>\";\r\n\t\t\t\t\tcontent+=\"<option title='None' value=''></option>\";\r\n\t\t\t\t\tfor(var j = 1; j < abilityDefs.length; j++){\r\n\t\t\t\t\t\tif(abilityDefs[j]){\r\n\t\t\t\t\t\t\tcontent+=\"<option \"+(j == value[i] ? \"selected\" : \"\")+\" title='\"+abilityDefs[j].description+\"' value='\"+j+\"'>\"+abilityDefs[j].name+\"</option>\";\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\r\n\t\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\tcontent+=\"<img class='remove_combo_weapon remove_button' data-idx='\"+i+\"' src='\"+_this._svgPath+\"/close-line.svg'>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='transform_list_controls'>\";\r\n\t\t\t\tcontent+=\"<button id='add_combo_weapon'>Add</button>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#combo_type_select\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponComboType\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\r\n\t\t\t\tcontainerNode.querySelector(\"#add_combo_weapon\").addEventListener(\"click\", function(){\r\n\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"weaponComboWeapons\") || \"[]\");\r\n\t\t\t\t\tvalue.push(\"\");\r\n\t\t\t\t\t_this.setMetaValue(\"weaponComboWeapons\", JSON.stringify(value));\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t\t\r\n\t\t\t\tlet entries = containerNode.querySelectorAll(\".remove_combo_weapon\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"weaponComboWeapons\") || \"[]\");\r\n\t\t\t\t\t\tvalue.splice(idx, 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"weaponComboWeapons\", JSON.stringify(value));\r\n\t\t\t\t\t\t_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tentries = containerNode.querySelectorAll(\".combo_weapon_select\");\r\n\t\t\t\tentries.forEach(function(entry){\r\n\t\t\t\t\tentry.addEventListener(\"change\", function(){\r\n\t\t\t\t\t\tvar idx = this.getAttribute(\"data-idx\");\r\n\t\t\t\t\t\tvar value = JSON.parse(_this.getMetaValue(\"weaponComboWeapons\") || \"[]\");\r\n\t\t\t\t\t\tvalue[idx] = this.value;\t\t\t\r\n\t\t\t\t\t\t_this.setMetaValue(\"weaponComboWeapons\", JSON.stringify(value));\r\n\t\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcostType: {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tvar idx = _this.getMetaValue(\"weaponCostType\") || 0;\r\n\t\t\t\tvar options = Object.keys(ENGINE_SETTINGS.COST_TYPES.WEAPON);\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.WEAPON.label_cost_type;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=\"<select id='weapon_cost_type'>\";\r\n\t\t\t\tfor(var i = 0; i < options.length; i++){\r\n\t\t\t\t\tcontent+=\"<option \"+(i == idx ? \"selected\" : \"\")+\" value='\"+i+\"'>\"+i+\"</option>\";\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar typeSummary = [];\r\n\t\t\t\tvar typeData = ENGINE_SETTINGS.COST_TYPES.WEAPON[options[idx]];\r\n\t\t\t\tif(typeData){\r\n\t\t\t\t\tfor(var i = 0; i < typeData.length; i++){\r\n\t\t\t\t\t\ttypeSummary.push(\"Level \"+(i+1)+\": \"+typeData[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontent+=\"<img title='\"+(typeSummary.join(\"\\n\"))+\"' class='view_type_costs_icon' img src='\"+_this._svgPath+\"eye-line.svg'>\"\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_cost_type\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponCostType\", this.value);\r\n\t\t\t\t\t_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\r\n\t\t\t}\t\t\r\n\t\t},\r\n\t\tweight: handleDefaultProp(\"weaponWeight\", EDITORSTRINGS.WEAPON.label_weight),\r\n\t\tbannedMechs: handleDefaultProp(\"weaponBannedOn\", EDITORSTRINGS.WEAPON.label_banned_mechs),\r\n\t\tallowedMechs: handleDefaultProp(\"weaponAllowedOn\", EDITORSTRINGS.WEAPON.label_allowed_mechs),\r\n\t\talias: {\r\n\t\t\tcreateControls(){\t\t\r\n\t\t\t\tvar content = \"\";\t\t\t\r\n\r\n\t\t\t\tvar abilityDefs = $dataWeapons;\r\n\t\t\t\tvar value = _this.getMetaValue(\"weaponTextAlias\");\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<div class='row'>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\tcontent+=EDITORSTRINGS.MECH.lavel_text_alias;\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"<div class='cell'>\";\r\n\t\t\t\t\r\n\t\t\t\tcontent+=\"<select id='weapon_text_alias'>\";\r\n\t\t\t\tcontent+=\"<option title='None' value='-1'></option>\";\r\n\t\t\t\tfor(var i = 1; i < abilityDefs.length; i++){\r\n\t\t\t\t\tif(abilityDefs[i]){\r\n\t\t\t\t\t\tcontent+=\"<option \"+(i == value ? \"selected\" : \"\")+\" title='\"+_this.escapeAttribute(abilityDefs[i].description)+\"' value='\"+i+\"'>[\"+String(i).padStart(3, \"0\")+\"] \"+abilityDefs[i].name+\"</option>\";\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tcontent+=\"</select>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\tcontent+=\"</div>\";\r\n\t\t\t\treturn content;\t\t\t\t\r\n\t\t\t},\r\n\t\t\thook(){\t\t\t\t\r\n\t\t\t\tcontainerNode.querySelector(\"#weapon_text_alias\").addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(\"weaponTextAlias\", this.value);\r\n\t\t\t\t\t//_this.show();\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t};\t\r\n\t\r\n\tvar terrains = [\r\n\t\t{type: \"AIR\", prop: \"mechAirEnabled\"},\r\n\t\t{type: \"LND\",  prop: \"mechLandEnabled\"},\r\n\t\t{type: \"SEA\",  prop: \"mechWaterEnabled\"},\r\n\t\t{type: \"SPC\", prop: \"mechSpaceEnabled\"}\r\n\t];\r\n\t\r\n\tfunction handleDefaultProp(prop, name){\r\n\t\treturn {\r\n\t\t\tcreateControls(){\r\n\t\t\t\tvar content = \"\";\r\n\t\t\t\tcontent+=_this.createValueInput(prop, name);\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\thook(){\r\n\t\t\t\tcontainerNode.querySelector(\"#prop_\"+prop).addEventListener(\"change\", function(){\r\n\t\t\t\t\t_this.setMetaValue(prop, this.value);\r\n\t\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n\r\n\r\nWeaponUI.prototype.show = async function(){\r\n\tlet _this = this;\r\n\t_this.loadData();\r\n\tvar listScroll = 0;\r\n\tif(this._dbList){\r\n\t\tlistScroll = this._dbList.getScroll();\r\n\t}\r\n\tvar currentScroll;\r\n\tvar scrollContainer = document.querySelector(\".edit_pane .main_info\");\r\n\tif(scrollContainer){\r\n\t\tcurrentScroll = scrollContainer.scrollTop;\r\n\t}\r\n\t\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tvar content = \"\";\r\n\tcontent+=\"<div class='editor_ui'>\";\r\n\tcontent+=\"<div class='list_pane'>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='edit_pane'>\";\r\n\tcontent+=\"<div class='controls'>\";\r\n\tcontent+=\"<button class='cancel'>\"+EDITORSTRINGS.GENERAL.label_cancel+\"</button>\";\r\n\tcontent+=\"<button class='save'>\"+EDITORSTRINGS.GENERAL.label_save+\"</button>\";\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='main_info'>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=\"General\";\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content'>\";\r\n\t\r\n\t\r\n\tcontent+=\"<div class='table'>\";\r\n\tcontent+=_this._propertyHandlers.name.createControls();\r\n\r\n\tcontent+=_this._propertyHandlers.alias.createControls();\r\n\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.type.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.post_move.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.power.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.range.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.min_range.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.terrain.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.upgrade_type.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.invalid_tags.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_attributes;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content' style='display: block;'>\";\r\n\t\r\n\tcontent+=\"<div class='table sub_section'>\";\t\t\r\n\t\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=\"<div class='cell'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.hint_no_cost;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='table' style='width: 100%;'>\";\r\n\t\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.EN.createControls();\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.MP.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.ammo.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.will.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='table sub_section'>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.hit_mod.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.crit_mod.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.hp_tresh.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.is_counter.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.is_counter_only.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.is_all.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row '>\";\r\n\tcontent+=_this._propertyHandlers.category.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row '>\";\r\n\tcontent+=_this._propertyHandlers.attr1.createControls();\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row '>\";\r\n\tcontent+=_this._propertyHandlers.attr2.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_effects;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content' style='display: block;'>\";\r\n\tcontent+=\"<div class='table'>\";\t\t\r\n\tcontent+=_this._propertyHandlers.effects.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_animation;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content' style='display: block;'>\";\r\n\tcontent+=\"<div class='table'>\";\t\t\r\n\tcontent+=_this._propertyHandlers.animation.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_map_attack;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content' style='display: block;'>\";\r\n\tcontent+=\"<div class='table'>\";\t\t\r\n\t\r\n\tcontent+=_this._propertyHandlers.map_attack.createControls();\r\n\t;\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.ignore_friendlies.createControls();\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\t\r\n\t\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_combo_attack;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content' style='display: block;'>\";\r\n\t\r\n\tcontent+=_this._propertyHandlers.combo_properties.createControls();\r\n\r\n\t\r\n\t\r\n\t\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\t\r\n\tcontent+=\"<div class='section'>\";\r\n\tcontent+=\"<div class='title abilities'>\";\r\n\tcontent+=EDITORSTRINGS.WEAPON.label_equipable;\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"<div class='content' style='display: block;'>\";\r\n\tcontent+=\"<div class='table'>\";\t\r\n\tcontent+=\"<div class='row '>\";\r\n\tcontent+=_this._propertyHandlers.costType.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row numeric'>\";\r\n\tcontent+=_this._propertyHandlers.weight.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.bannedMechs.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"<div class='row'>\";\r\n\tcontent+=_this._propertyHandlers.allowedMechs.createControls();\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\tcontent+=\"</div>\";\r\n\t\r\n\tcontent+=\"</div>\";\t\r\n\tcontent+=\"</div>\";\r\n\t\r\n\t\r\n\tthis._container.innerHTML = content;\r\n\tvar search = \"\";\r\n\tif(this._dbList){\r\n\t\tsearch = this._dbList.getSearch();\r\n\t}\r\n\tthis._dbList = new _DBList_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\r\n\t\tthis._container.querySelector(\".list_pane\"), \r\n\t\tthis._data, \r\n\t\tthis,\r\n\t\t{\r\n\t\t\tselected: function(id){\r\n\t\t\t\t_this._currentId = id;\r\n\t\t\t\t_this.show();\r\n\t\t\t},\r\n\t\t\tcountChanged: function(amount){\r\n\t\t\t\t\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\tfor(var i = 0; i < amount + 1; i++){\r\n\t\t\t\t\tlet blankEntry = _this.getEmpty(i);\r\n\t\t\t\t\ttmp.push(_this._data[i] || blankEntry);\r\n\t\t\t\t}\r\n\t\t\t\t_this._data = tmp;\r\n\t\t\t\t_this.show();\r\n\t\t\t\t_this._mainUIHandler.setModified();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tthis._dbList.setSearch(search);\r\n\tthis._dbList.show(_this._currentId);\r\n\tif(listScroll){\r\n\t\tthis._dbList.setScroll(listScroll);\r\n\t}\r\n\t\r\n\tdocument.querySelector(\".edit_pane .main_info\").scrollTop = currentScroll;\r\n\tthis.hook();\r\n\t\r\n}\r\n\r\n\r\nWeaponUI.prototype.hook = function(){\r\n\tlet _this = this;\r\n\t_this._container.querySelector(\".edit_pane .controls .save\").addEventListener(\"click\", function(){\r\n\t\t_this.save();\r\n\t\t_this._mainUIHandler.clearModified();\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\".edit_pane .controls .cancel\").addEventListener(\"click\", function(){\r\n\t\tvar c = true;\r\n\t\tif(_this._mainUIHandler.isModified()){\r\n\t\t\tc = confirm(EDITORSTRINGS.GENERAL.confirm_discard_unchaged);\r\n\t\t}\r\n\t\tif(c){\r\n\t\t\t_this._data = null;\r\n\t\t\t_this.show();\t\r\n\t\t\t_this._mainUIHandler.clearModified();\r\n\t\t}\t\t\r\n\t});\r\n\tvar currentEntry = this.getCurrentEntry();\r\n\tObject.keys(_this._propertyHandlers).forEach(function(prop){\r\n\t\t_this._propertyHandlers[prop].hook(currentEntry);\r\n\t});\t\r\n\t_this.hookPageControls();\r\n}\r\n\r\n\r\n\r\nWeaponUI.prototype.hookPageControls = function(){\r\n\tlet _this = this;\r\n\t/*_this._container.querySelector(\"#abi_page_left\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage > 0){\r\n\t\t\t_this._currentAbiPage--;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});\r\n\t\r\n\t_this._container.querySelector(\"#abi_page_right\").addEventListener(\"click\", function(){\r\n\t\tif(_this._currentAbiPage < 19){\r\n\t\t\t_this._currentAbiPage++;\r\n\t\t}\t\t\r\n\t\t_this.show();\t\r\n\t});*/\r\n\t\r\n}\r\n\t\t\t\r\nWeaponUI.prototype.getEmpty = function(id){\r\n\treturn {\r\n\t  \"id\": id,\r\n\t  \"learnings\": [],\r\n\t  \"name\": \"\",\r\n\t  \"note\": \"\",\r\n\t  \"meta\": {}\r\n\t};\r\n}\t\t\t\r\n\t\t\n\n//# sourceURL=webpack://src/./js/Editor/WeaponUI.js?");

/***/ }),

/***/ "./js/Editor/main.js":
/*!***************************!*\
  !*** ./js/Editor/main.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SRW_editor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SRW_editor.js */ \"./js/Editor/SRW_editor.js\");\n\r\nwindow.SRWEditor = _SRW_editor_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\r\n\n\n//# sourceURL=webpack://src/./js/Editor/main.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./js/Editor/style/editor.css":
/*!**************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./js/Editor/style/editor.css ***!
  \**************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root {\\r\\n\\t--theme-color: #1c70d9;\\t\\r\\n\\t--light-theme-color: #e0eeff;\\r\\n\\t--white-filter: invert(100%) sepia(0%) saturate(7440%) hue-rotate(311deg) brightness(105%) contrast(97%);\\r\\n\\t--editor-theme-color: #b8c8f1;\\r\\n\\t--editor-theme-color2: #576082;\\r\\n\\t--editor-theme-color3: #7b84a8;\\r\\n\\t--editor-theme-color4: #697295;\\r\\n\\t--editor-theme-color-dark: #2f3754;\\r\\n\\t--grayed-out-filter: invert(77%) sepia(3%) saturate(3%) hue-rotate(9deg) brightness(83%) contrast(87%);\\r\\n}\\r\\n\\r\\n#srw_editor {\\r\\n\\twidth: 100vw;\\r\\n    height: 100vh;\\r\\n    background-color: #FFFFFF;\\r\\n    z-index: 999999;\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n\\tfont-family: Trebuchet MS;\\r\\n\\tflex-wrap: wrap;\\r\\n}\\r\\n\\r\\n#srw_editor button {\\r\\n\\tborder: 0px;\\r\\n\\tbackground-color: #F1F1F1;\\r\\n\\tcolor: #444444;\\r\\n\\tborder-radius: 999px;\\r\\n\\tborder: 1px solid #E0E0E0;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor button:hover {\\r\\n\\tbackground-color: #E0E0E0;\\r\\n}\\r\\n\\r\\n#srw_editor .header {\\r\\n\\twidth: 100%;\\r\\n\\theight: 50px;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tpadding-left: 10px;\\r\\n\\tfont-size: 20px;\\r\\n\\tcolor: #FFFFFF;\\r\\n\\tbackground-color: var(--theme-color);\\r\\n}\\r\\n\\r\\n#srw_editor .content {\\r\\n\\t/*width: 100%;*/\\r\\n\\theight: calc(100% - 50px);\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor {\\r\\n\\tdisplay: flex;\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor #info_section {\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n#srw_editor #save_def {\\r\\n\\tposition: absolute;\\r\\n    right: 5px;\\r\\n    top: 5px;\\r\\n    width: 100px;\\r\\n    font-size: 25px;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .edit_controls {\\r\\n\\twidth: 30%;\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .timeline{\\r\\n\\theight: 50%;\\r\\n\\twidth: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .edit_panel{\\r\\n\\theight: 50%;\\r\\n\\twidth: 100%;\\r\\n\\tbackground-color: var(--light-theme-color);\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview{\\r\\n\\theight: 100%;\\t\\r\\n    width: 70%;\\r\\n\\tbackground-color: #3a3b55;\\r\\n\\toverflow-y: auto;\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview .fps_counter{\\r\\n\\tposition: absolute;\\r\\n\\ttop: 0;\\r\\n\\tleft: 0;\\r\\n\\tcolor: #FF0000;\\r\\n\\tpadding: 3px;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview .tick_counter{\\r\\n\\tposition: absolute;\\r\\n\\ttop: 20px;\\r\\n\\tleft: 0;\\r\\n\\tcolor: #FFFF00;\\r\\n\\tpadding: 3px;\\r\\n}\\r\\n\\r\\n.camera_info {\\r\\n\\tbackground-color: #FFFFFF;\\r\\n\\tborder-radius: 10px;\\r\\n\\tposition: absolute;\\r\\n\\tright: 5px;\\r\\n\\ttop: 5px;\\r\\n\\twidth: 200px;\\r\\n\\toverflow: hidden;\\r\\n\\tz-index: 100;\\r\\n}\\r\\n\\r\\n.camera_info .title {\\r\\n\\t/*color: #FFFFFF;*/\\r\\n\\tpadding: 2px;\\r\\n\\tbackground-color: #bfc2ff;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n.camera_info .camera_control_header {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n.camera_info .camera_control_header button{\\r\\n\\tmargin-left: 4px;\\r\\n\\tmargin-right: 4px;\\r\\n}\\r\\n\\r\\n.copy_from_cam {\\r\\n\\tmargin-left: 4px;\\r\\n}\\r\\n\\r\\n#camera_info_content {\\r\\n\\tpadding: 3px;\\r\\n}\\r\\n\\r\\n#camera_info_content div{\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tmargin: 1px;\\r\\n}\\r\\n\\r\\n#camera_info_content .prop_control{\\r\\n\\twidth: 12px;\\r\\n\\tmargin-left: 0px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#camera_info_content input{\\r\\n\\twidth: 80%;\\r\\n}\\r\\n\\r\\n#refresh_camera {\\r\\n\\twidth: 14px;\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: 5px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#hide_camera_info {\\r\\n\\twidth: 14px;\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_window_container {\\r\\n\\tposition: relative;\\r\\n\\tmargin-top: 5%;\\r\\n\\tdisplay: flex;  \\r\\n    justify-content: center;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_window {\\r\\n\\twidth: 1110px;\\r\\n    height: 624px;\\r\\n\\tbackground-color: #000000;\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_controls {\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: auto;\\r\\n\\twidth: fit-content;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_extra_controls_flex {\\r\\n\\tdisplay: flex;\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_extra_controls_flex .preview_extra_controls{\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_extra_controls {\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: auto;\\r\\n\\twidth: fit-content;\\t\\r\\n\\tpadding: 5px;\\r\\n\\tbackground-color: #bfc2ff;\\t\\r\\n\\tborder-radius: 5px;\\r\\n\\tmargin-top: 10px;\\r\\n\\theight: fit-content;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .extra_control {\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .editor_label {\\r\\n\\tflex-shrink: none;\\r\\n\\twidth: 130px;\\r\\n}\\r\\n\\r\\n#srw_editor #attack_editor .preview_controls img{\\r\\n\\twidth: 40px;\\r\\n\\tcursor: pointer;\\r\\n\\tfilter: invert(78%) sepia(31%) saturate(3977%) hue-rotate(196deg) brightness(110%) contrast(110%);\\r\\n}\\r\\n\\r\\n#srw_editor #battle_scene_layer {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n#srw_editor #battle_scene_ui_layer {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n#srw_editor #battle_scene_text_layer {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n#srw_editor #battle_scene_pixi_layer {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n#srw_editor #fade_container {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n#srw_editor #battle_scene_movie_layer {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n\\r\\n#srw_editor .definition_select {\\r\\n\\twidth: 200px;\\r\\n}\\r\\n\\r\\n#srw_editor .selection_controls {\\r\\n\\twidth: calc(100% - 10px);\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\theight: 50px;\\r\\n\\tpadding-left: 5px;\\r\\n\\tpadding-right: 5px;\\r\\n\\tborder-bottom: 1px solid #3a3b55;\\r\\n\\tflex-wrap: wrap;\\r\\n}\\r\\n\\r\\n#srw_editor .selection_control_buttons {\\r\\n\\tmargin-left: auto;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .selection_control_buttons button{\\r\\n\\tmargin: 2px;\\r\\n\\twidth: 60px;\\r\\n}\\r\\n\\r\\n#srw_editor .section {\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .section_label {\\r\\n\\tfont-size: 18px;\\r\\n\\tpadding-left: 8px;\\r\\n\\tpadding-top: 8px;\\r\\n\\tcolor: #4f52b1;\\r\\n}\\r\\n\\r\\n#srw_editor .section_content {\\r\\n\\tpadding: 10px;\\r\\n\\tfont-size: 12px;\\r\\n}\\r\\n\\r\\n#srw_editor #def_name {\\r\\n\\tmargin-left: 5px;\\r\\n}\\t\\r\\n\\r\\n#srw_editor #sequence_select {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_block {\\r\\n\\tmargin: 10px;\\r\\n\\tpadding: 5px;\\r\\n\\tborder-radius: 10px;\\r\\n\\tbackground-color: #b8c8f1;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_input {\\r\\n\\twidth: 40px;\\r\\n}\\r\\n\\r\\n#srw_editor .cmd_block {\\r\\n\\tmargin: 4px;\\r\\n\\tpadding: 2px;\\r\\n\\tborder-radius: 10px;\\r\\n\\tbackground-color: #576082;\\r\\n\\tcolor: #FFFFFF;\\r\\n\\toverflow: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .cmd_block_inner {\\r\\n\\tmargin: 4px;\\r\\n\\tpadding: 2px;\\r\\n\\tborder-radius: 10px;\\r\\n\\tbackground-color: #576082;\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n#srw_editor .command_label {\\r\\n\\tdisplay: inline-block;\\r\\n\\twidth: 65px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_label.duration {\\r\\n\\tfont-size: 14px;\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_label.name {\\r\\n\\tfont-size: 14px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_label.variable {\\r\\n\\tfont-size: 14px;\\r\\n\\tmargin-right: 5px;\\r\\n\\twidth: fit-content;\\r\\n}\\r\\n\\r\\n#srw_editor .var_controls {\\r\\n\\tpadding-top: 3px;\\r\\n\\tpadding-bottom: 3px;\\r\\n}\\r\\n\\r\\n#srw_editor .var_controls input{\\r\\n\\twidth: 30px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_label.variable_value {\\r\\n\\tfont-size: 14px;\\r\\n\\tmargin-right: 5px;\\r\\n\\twidth: fit-content;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_variable {\\r\\n\\tmargin-right: 5px;\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_variable_value {\\r\\n\\tmargin-right: 5px;\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_duration {\\r\\n\\twidth: 60px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_id_label {\\r\\n\\tdisplay: inline-block;\\r\\n\\twidth: 80px;\\r\\n\\tfont-size: 14px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_group_label {\\r\\n\\tdisplay: inline-block;\\r\\n\\twidth: 100px;\\r\\n\\tfont-size: 14px;\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .param_label {\\r\\n\\tdisplay: inline-block;\\r\\n\\twidth: 100px;\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_row {\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .target_select {\\r\\n\\tdisplay: inline-block;\\r\\n\\tmargin-left: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor #timeline_section {\\r\\n\\theight: calc(100vh - 200px);\\r\\n\\tpadding-right: 0px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param {\\r\\n\\tdisplay: flex;\\r\\n    align-items: center;\\r\\n\\tmargin-top: 4px;\\r\\n\\tpadding: 2px;\\r\\n\\tborder: 1px solid #FFFFFF;\\r\\n\\tborder-radius: 999px;\\r\\n\\tmargin-left: 4px;\\r\\n\\twidth: fit-content;\\r\\n\\twhite-space: nowrap;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param[data-param=\\\"cleanUpCommands\\\"]{\\r\\n\\tborder-radius: 5px;\\r\\n\\tbackground-color: #b8c8f1;\\r\\n\\tcolor: #2f3754;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param[data-param=\\\"commands\\\"]{\\r\\n\\tborder-radius: 5px;\\r\\n\\tbackground-color: #b8c8f1;\\r\\n\\tcolor: #2f3754;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param[data-param=\\\"cleanUpCommands\\\"] .position_select{\\r\\n\\twidth: 80px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param[data-param=\\\"commands\\\"] .position_select{\\r\\n\\twidth: 80px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param[data-param=\\\"cleanUpCommands\\\"] .rotation_select{\\r\\n\\twidth: 80px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_param[data-param=\\\"commands\\\"] .rotation_select{\\r\\n\\twidth: 80px;\\r\\n}\\r\\n\\r\\n#srw_editor .param_values {\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor .param_value {\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .param_coord {\\r\\n\\twidth: 40px;\\r\\n}\\r\\n\\r\\n#srw_editor .commands_scroll {\\r\\n\\toverflow: auto;\\r\\n\\theight: calc(100% - 40px);\\r\\n}\\r\\n\\r\\n#srw_editor .tick_block input {\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_block select {\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .editor_ui select{\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_tools {\\r\\n\\tdisplay: flex;\\r\\n\\tpadding-bottom: 10px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_controls {\\r\\n\\twidth: 100%;\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_button {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_delete_button {\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_shift_button {\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .command_tools #new_tick {\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .command_type {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .delete_command {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_add_command {\\r\\n\\tmargin-top: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_paste_command {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .copy_command {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .extra_control select{\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n\\twidth: 100px;\\r\\n\\tmargin: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .tick_play_button {\\r\\n\\tfloat: right;\\r\\n}\\r\\n\\r\\n#srw_editor #scale_controls {\\r\\n\\tmargin-left: auto;\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    background-color: rgba(255,255,255,0.7);\\r\\n    color: #444444;\\r\\n    padding: 5px;\\r\\n    font-size: 12px;\\r\\n    border-radius: 999px;\\r\\n}\\r\\n\\r\\n#srw_editor #scale_controls .value {\\r\\n\\twidth: 28px;\\r\\n\\ttext-align: right;\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor #editor_selector {\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 20px;\\r\\n}\\r\\n\\r\\n#srw_editor .bg_label {\\r\\n\\twidth: 80px;\\r\\n}\\r\\n\\r\\n#srw_editor .bg_block {\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .bg_block .param_values{\\r\\n\\talign-items: center;\\r\\n    padding: 2px;\\r\\n}\\r\\n   \\r\\n#srw_editor .bg_block .bg_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .bg_block .bg_controls .label_visible {\\r\\n\\tmargin-left: auto;\\r\\n\\tcolor: #FFFFFF;\\r\\n\\twidth: auto;\\r\\n\\tmargin-right: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor #text_editor_section_tools {\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor #text_editor_section_tools .row {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tpadding: 2px;\\r\\n\\toverflow: auto;\\r\\n    white-space: nowrap;\\r\\n}\\r\\n\\r\\n#srw_editor #text_editor_section_tools select {\\r\\n\\tmargin-right: 4px;\\r\\n\\tflex-shrink: none;\\r\\n}\\r\\n\\r\\n#srw_editor #text_editor_section_tools .select_label {\\r\\n\\tmargin-right: 4px;\\r\\n\\tflex-shrink: none;\\r\\n}\\r\\n\\r\\n#srw_editor .text_block {\\r\\n\\tpadding: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_types {\\r\\n\\tpadding: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_label {\\r\\n\\tfont-size: 14px;\\r\\n\\twidth: 60px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_editor .param_value {\\r\\n\\twidth: 99%;\\r\\n\\tmargin: 1px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_config .command_label {\\r\\n\\twidth: 80px;\\r\\n\\tfont-size: 14px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_config input {\\r\\n\\tmargin-right: 4px;\\r\\n\\twidth: 60px;\\r\\n\\r\\n}\\r\\n\\r\\n#srw_editor .quote_config {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: flex-start;\\r\\n}\\t\\r\\n\\r\\n#srw_editor .quote_config .quote_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tmargin-left: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .controls_line {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_config .quote_controls .duration_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_id_container {\\r\\n\\tdisplay: flex;\\r\\n\\tmargin-top: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_id_container .command_label {\\r\\n\\twidth: 85px;\\r\\n\\tfont-size: 14px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote_id_container input {\\r\\n\\tmargin-right: 4px;\\r\\n\\twidth: 60px;\\r\\n}\\r\\n\\r\\n#srw_editor .quote {\\r\\n\\tpadding: 4px;\\r\\n    border-radius: 8px;\\r\\n    background-color: var(--editor-theme-color2);\\r\\n\\tmargin-bottom: 4px;\\r\\n\\tmargin-top: 4px;\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .quote_line {\\r\\n\\tborder-bottom: 1px solid white;\\r\\n    padding-bottom: 5px;\\t\\r\\n\\tmargin-bottom: 3px;\\r\\n}\\r\\n\\r\\n#srw_editor .view_text_btn {\\r\\n\\tmargin-right: 5px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .view_text_btn img{\\r\\n\\twidth: 16px;\\t\\r\\n}\\r\\n\\r\\n#srw_editor .delete_text_btn {\\t\\r\\n\\tmargin-right: 5px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .delete_text_btn img{\\r\\n\\twidth: 20px;\\t\\r\\n}\\r\\n\\r\\n#srw_editor .text_category_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tmargin: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .add_category_quote_container {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .add_category_quote {\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_scroll_default {\\r\\n\\theight: calc(100% - 95px);\\r\\n}\\r\\n\\r\\n#srw_editor .attack_text {\\r\\n\\tposition: relative;\\r\\n\\tpadding: 4px;\\r\\n\\tborder: 1px solid #FFFFFF;\\r\\n\\tborder-radius: 8px;\\r\\n\\tmargin-top: 2px;\\r\\n\\tmargin-bottom: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .attack_text .title_label {\\r\\n\\twidth: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor .delete_weapon_entry {\\r\\n\\tposition: absolute;\\r\\n\\ttop: 0;\\r\\n\\tright: 0;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .attacks_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .attacks_controls .text_label{\\r\\n\\twidth: 90px;\\r\\n}\\r\\n\\r\\n#srw_editor .group_frequency_controls {\\r\\n\\tpadding: 5px;\\r\\n    color: #FFFFFF;\\r\\n    background-color: var(--editor-theme-color);\\r\\n    margin-bottom: 10px;\\r\\n    border-radius: 10px;\\r\\n}\\r\\n\\r\\n#srw_editor .group_frequency_controls .title {\\r\\n\\tfont-size: 18px;\\r\\n\\tcolor: #000000;\\r\\n}\\r\\n\\r\\n#srw_editor .group_frequency_controls .entry{\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .group_frequency_controls .entry input{\\r\\n\\twidth: 30px;\\r\\n\\tmargin-left: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .group_frequency_controls .entry .group_id {\\r\\n\\tmargin-right: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .group_frequency_controls .scroll_pane {\\r\\n\\tmax-height: 250px;\\r\\n\\toverflow-y: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .add_attack {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .event_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tfont-size: 14px;\\r\\n\\tpadding: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .event_controls button{\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#event_controls .event_controls .event_id {\\r\\n\\twidth: 80px;\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_scroll_event {\\r\\n\\theight: calc(100% - 127px);\\r\\n}\\r\\n\\r\\n#srw_editor .reference_id_label {\\r\\n\\twidth: 100px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_category_controls .text_label {\\r\\n\\twidth: 140px;\\r\\n}\\r\\n\\r\\n#srw_editor .catmullrom_block {\\r\\n\\twidth: 100%; \\r\\n\\tdisplay: block;\\r\\n}\\r\\n#srw_editor .catmullrom_block .param_values{\\r\\n\\tmargin: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .move_command_buttons {\\r\\n\\tmargin-left: auto;\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor .move_command_buttons img{\\r\\n\\twidth: 16px;\\r\\n}\\r\\n\\r\\n#srw_editor .move_command_buttons .move_command_button {\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .line_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n#srw_editor .add_line {\\r\\n\\twidth: 16px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .portrait_preview {\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 144px;\\r\\n\\theight: 144px;\\r\\n\\tbackground-color: rgba(0,0,0,0.5);\\r\\n\\tborder: 1px solid rgba(0,0,0,0.8);\\r\\n\\tmargin: 2px;\\r\\n\\tflex: none;\\r\\n}\\r\\n\\r\\n#srw_editor .face_inputs .command_label{\\r\\n\\tdisplay: none;\\r\\n}\\r\\n\\r\\n#srw_editor .face_inputs input{\\r\\n\\tdisplay: none;\\r\\n}\\r\\n\\r\\n#srw_editor .unit_text {\\r\\n\\tpadding: 5px;\\r\\n    color: #FFFFFF;\\r\\n    background-color: var(--editor-theme-color);\\r\\n    margin-bottom: 10px;\\r\\n    border-radius: 10px;\\r\\n}\\r\\n\\r\\n#srw_editor .text_category_controls .text_label{\\r\\n\\tfont-size: 18px;\\r\\n\\tcolor: #000000;\\r\\n}\\r\\n\\r\\n#srw_editor .portrait_copy {\\r\\n\\tmargin: 2px;\\r\\n\\tdisplay: block;\\r\\n\\twidth: 90px;\\r\\n}\\r\\n\\r\\n#srw_editor .portrait_paste {\\r\\n\\tmargin: 2px;\\r\\n\\tdisplay: block;\\r\\n\\twidth: 90px;\\r\\n}\\r\\n\\r\\n/*===db_list===*/\\r\\n#srw_editor .db_list {\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor .list_controls {\\r\\n\\theight: 49px;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tborder-bottom: 1px solid #FFFFFF;\\r\\n\\tpadding-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .list_controls #max_entries{\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .list_controls #list_search{\\r\\n\\tmargin-left: 5px;\\r\\n\\twidth: 140px;\\r\\n}\\r\\n\\r\\n#srw_editor .list_controls #list_search_label{\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .list_controls #clear_search {\\r\\n\\tmargin-left: 2px;\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 16px;\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .scroll{\\r\\n\\theight: calc(100% - 50px);\\r\\n\\toverflow-y: scroll;\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .scroll .entry{\\r\\n\\tpadding: 5px;\\r\\n\\tcursor: pointer;\\r\\n\\tdisplay: flex;\\t\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n\\r\\n#srw_editor .db_list .scroll .entry:nth-child(even){\\r\\n\\tbackground-color: var(--editor-theme-color3);\\t\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .scroll .entry.selected{\\r\\n\\tbackground-color: var(--editor-theme-color-dark);\\t\\t\\r\\n}\\r\\n\\r\\n\\r\\n#srw_editor .db_list .scroll .entry:hover{\\r\\n\\tbackground-color: var(--editor-theme-color-dark);\\t\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .entry .controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tmargin-left: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .entry .controls button {\\r\\n\\tmargin: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .entry .controls img {\\r\\n\\twidth: 16px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .db_list .scroll .entry.selected .controls img{ \\r\\n\\tfilter: var(--white-filter);\\r\\n}\\r\\n\\r\\n#srw_editor .editor_ui {\\r\\n\\tdisplay: flex;\\r\\n\\theight: 100%;\\r\\n\\tbackground-color: var(--editor-theme-color2);\\r\\n    color: #FFFFFF;\\r\\n}\\r\\n\\r\\n#srw_editor .editor_ui input {\\r\\n    background-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n    border-radius: 99px;\\r\\n    padding-left: 5px;\\r\\n\\tpadding-right: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor .list_pane {\\r\\n\\theight: 100%;\\r\\n\\twidth: calc(20% - 1px);\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane {\\r\\n\\theight: 100%;\\r\\n\\twidth: 80%;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .controls {\\r\\n\\theight: 49px;\\r\\n\\tborder-bottom: 1px solid #FFFFFF;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .controls .cancel{\\r\\n\\tmargin-left: auto;\\r\\n\\tfont-size: 25px;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .controls .save{\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n\\tfont-size: 25px;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info {\\r\\n\\theight: calc(100% - 50px);\\r\\n\\toverflow: auto;\\r\\n\\t\\r\\n}\\r\\n#srw_editor .edit_pane .main_info .row{\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section {\\r\\n\\tborder: 1px solid #FFFFFF;\\r\\n\\tborder-bottom-right-radius: 20px;\\r\\n\\tmargin: 10px;\\r\\n\\twidth: fit-content;\\r\\n\\tbackground-color: var(--editor-theme-color3);\\r\\n\\tflex-shrink: 0;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .title {\\r\\n\\tpadding: 2px;\\r\\n\\twidth: calc(100% - 8px);\\r\\n\\tfont-weight: bold;\\r\\n\\tpadding-left: 10px;\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content {\\r\\n\\tpadding: 10px;\\r\\n\\tpadding-top: 0px;\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content.stats input {\\r\\n\\twidth: 50px;\\r\\n\\ttext-align: right;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table{\\r\\n\\tdisplay: table;\\r\\n\\theight: fit-content;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table.sub_section {\\r\\n\\tmargin: 4px;\\r\\n\\tpadding: 2px;\\r\\n\\tborder:1px solid rgba(255,255,255,0.3);\\r\\n\\tborder-radius: 8px;\\r\\n\\twidth: calc(100% - 12px);\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table .row {\\r\\n\\tdisplay: table-row;\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table .row.numeric input {\\r\\n\\twidth: 40px;\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table .row:nth-child(even){\\r\\n\\tbackground-color: var(--editor-theme-color4);\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table.no_highlights .row:nth-child(even){\\r\\n\\tbackground-color: rgba(0,0,0,0);\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table .row .cell{\\r\\n\\tdisplay: table-cell;\\r\\n\\tpadding: 4px;\\r\\n\\tvertical-align: top;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content .table .row .cell.top{\\r\\n\\tvertical-align: top;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .unit_img_preview{\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 144px;\\r\\n\\theight: 144px;\\r\\n\\tbackground-color: rgba(0,0,0,0.5);\\r\\n\\tborder: 1px solid rgba(0,0,0,0.8);\\r\\n\\tmargin: 2px;\\r\\n\\tflex: none;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .unit_img_preview img{\\r\\n\\twidth: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .terrain_container{\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .terrain_container .column{\\r\\n\\ttext-align: center;\\r\\n\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .terrain_container .entry{\\r\\n\\tcursor: pointer;\\r\\n\\tcursor: pointer;\\r\\n    padding-left: 2px;\\r\\n    padding-right: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .terrain_container .entry.terrain_header{\\r\\n\\t/*border-bottom: 1px solid var(--editor-theme-color-dark);*/\\r\\n}\\r\\n\\r\\n\\r\\n#srw_editor .edit_pane .main_info .terrain_container .entry.selected{\\r\\n\\tbackground-color: var(--editor-theme-color-dark);\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .ability_scroll {\\r\\n\\theight: 270px;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n#srw_editor .edit_pane .main_info .abi_page_control {\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: 5px;\\t\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .abi_page_control img{\\r\\n\\twidth: 16px;\\r\\n\\tfilter: var(--white-filter);\\t\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info #abi_page_left {\\r\\n\\ttransform: scaleX(-1);\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info #rel_page_left {\\r\\n\\ttransform: scaleX(-1);\\r\\n}\\r\\n\\r\\n#srw_editor .preview_selector {\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .view_type_costs_icon {\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 16px;\\r\\n\\tvertical-align: middle;\\r\\n\\tmargin-left: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor #terrain_enabled_select {\\r\\n\\twidth: 50px;\\r\\n}\\r\\n\\r\\n#srw_editor .weapons_scroll {\\r\\n\\toverflow-y: auto;\\r\\n\\toverflow-x: hidden;\\r\\n\\theight: 270px;\\r\\n}\\r\\n\\r\\n#srw_editor .transformation_scroll {\\r\\n\\toverflow-y: scroll;\\r\\n\\toverflow-x: hidden;\\r\\n\\theight: 150px;\\r\\n}\\r\\n\\r\\n#srw_editor .sub_pilot_scroll {\\r\\n\\toverflow-y: scroll;\\r\\n\\toverflow-x: hidden;\\r\\n\\theight: 150px;\\r\\n\\tborder: 1px solid #FFFFFF;\\r\\n\\tmargin-bottom: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .combine_scroll {\\r\\n\\toverflow-y: scroll;\\r\\n\\toverflow-x: hidden;\\r\\n\\theight: 100px;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane .main_info .section .content.transformation{\\r\\n\\tdisplay: block;\\r\\n}\\r\\n\\r\\n#srw_editor .transform_list_controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n#srw_editor .remove_button {\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 16px;\\r\\n\\tvertical-align: sub;\\r\\n}\\r\\n\\r\\n#srw_editor .transform_restore_controls{\\r\\n\\tbackground-color: var(--editor-theme-color4);\\r\\n\\tdisplay: flex;\\r\\n\\tpadding: 4px;\\r\\n\\talign-items: center;\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .transform_restore_controls_header {\\r\\n\\tdisplay: flex;\\r\\n\\tpadding: 4px;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .edit_pane select {\\r\\n\\tmax-width: 150px;\\r\\n}\\r\\n\\r\\n#srw_editor .allowed_sub_pilots_scroll {\\r\\n\\toverflow-y: scroll;\\r\\n\\toverflow-x: hidden;\\r\\n\\theight: 60px;\\r\\n}\\r\\n\\r\\n#srw_editor .allowed_sub_pilots_scroll .entry {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .sub_pilot_controls {\\r\\n\\twidth: 100%;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor #basic_battle_selector_icon{\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 64px;\\r\\n\\theight: 64px;\\r\\n\\tbackground-color: rgba(0,0,0,0.5);\\r\\n\\tborder: 1px solid rgba(0,0,0,0.8);\\r\\n\\tmargin: 2px;\\r\\n\\tflex: none;\\r\\n}\\r\\n\\r\\n#srw_editor #basic_battle_selector_icon img{\\r\\n\\twidth: 100%;\\r\\n}\\r\\n\\r\\n#srw_editor .hint_text {\\r\\n\\tcolor: rgba(255,255,255,0.8);\\r\\n\\tdisplay: inline;\\r\\n\\tmargin: 1px;\\r\\n}\\r\\n#srw_editor .edit_pane .main_info .unit_img_preview.overworld_preview {\\r\\n\\twidth: 144px;\\r\\n    height: 192px;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container{\\r\\n\\tposition: fixed;\\r\\n\\tbackground-color: rgba(0,0,0,0.5);\\r\\n\\ttop: 0;\\r\\n\\tleft: 0;\\r\\n\\twidth: 100vw;\\r\\n\\theight: 100vh;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tz-index: 99;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .content_container {\\r\\n\\t-webkit-box-shadow: 0px 0px 2px 1px rgb(0 0 0);\\r\\n    -moz-box-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n    box-shadow: 0px 0px 2px 1px rgb(0 0 0);\\r\\n    background-color: var(--editor-theme-color);\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .content_container.map .target_control {\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .content_container.map .target_control.title {\\r\\n\\twidth: calc(100% - 8px);\\r\\n\\tcolor: #FFFFFF;\\r\\n\\tbackground-color: var(--editor-theme-color3);\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .content_container .title {\\r\\n\\tpadding: 4px;\\r\\n\\twidth: calc(100% - 8px);\\r\\n\\tcolor: #FFFFFF;\\r\\n\\tbackground-color: var(--editor-theme-color3);\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n} \\r\\n\\r\\n#srw_editor #close_deploy_actions {\\r\\n\\tmargin-left: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .scroll {\\r\\n\\tmax-height: 500px;\\r\\n\\toverflow-y: scroll;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .controls {\\r\\n\\tpadding: 2px;\\r\\n\\twidth: calc(100% - 8px);\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tborder-top: 1px solid #222222;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .controls button{\\r\\n\\tmargin: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .section_block {\\r\\n\\tmargin: 4px;\\r\\n\\tborder: 1px solid #FFFFFF;\\r\\n\\tborder-bottom-right-radius: 10px;\\r\\n\\toverflow: hidden;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .remove_button {\\r\\n\\tmargin-left: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .target_control {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .target_sub_slot {\\r\\n\\twidth: 20px;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .label {\\r\\n\\twidth: 110px;\\r\\n\\tmargin: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container .label.long {\\r\\n\\twidth: auto;\\r\\n}\\r\\n\\r\\n#srw_editor .overlay_container select {\\r\\n\\tmargin: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor.overlay_container .source_slot {\\r\\n\\twidth: 20px;\\r\\n}\\r\\n\\r\\n#srw_editor #edit_map_attack {\\r\\n\\twidth: 44px;\\r\\n}\\r\\n\\r\\n#srw_editor .map_edit_pane_container {\\r\\n\\tposition: relative;\\r\\n\\tmargin: 5px;\\r\\n\\tbackground-color: var(--editor-theme-color3);\\r\\n}\\r\\n\\r\\n#srw_editor .map_edit_pane {\\r\\n\\t\\r\\n\\t\\r\\n}\\r\\n\\r\\n#srw_editor .map_edit_pane .row{\\r\\n\\tdisplay: flex;\\r\\n\\tmargin-bottom: -1px;\\r\\n}\\r\\n\\r\\n#srw_editor .map_edit_pane .row .block {\\r\\n\\twidth: 15px;\\r\\n\\theight: 15px;\\r\\n\\tmargin-right: -1px;\\r\\n\\tborder: 1px solid #FFFFFF;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n#srw_editor .map_edit_pane .row .block.selected {\\r\\n\\tbackground-color: rgba(200,50,50,0.5);\\r\\n}\\r\\n\\r\\n#srw_editor #main_shape .row .block.center {\\t\\r\\n\\tbackground-color: rgba(50,200,50,0.6);\\r\\n}\\r\\n\\r\\n#srw_editor #main_shape .row .block.center.selected {\\t\\r\\n\\tbackground-color: rgba(255,50,50, 1);\\r\\n}\\r\\n\\r\\n#srw_editor .map_retarget_edit_pane {\\r\\n\\tposition: absolute;\\r\\n\\ttop: 0;\\r\\n\\tleft: 0;\\t\\r\\n}\\r\\n\\r\\n#srw_editor .map_retarget_edit_pane .row .block.selected {\\r\\n\\tbackground-color: rgba(240,240,240,0.5);\\r\\n}\\r\\n\\r\\n#srw_editor .map_retarget_edit_pane .row .block.center {\\t\\r\\n\\tbackground-color: rgba(50,50,50,1);\\r\\n}\\r\\n\\r\\n#srw_editor .map_retarget_edit_pane .row .block.center.selected {\\t\\r\\n\\tbackground-color: rgba(240,240,240,1);\\r\\n}\\r\\n\\r\\n#srw_editor .direction_control_container {\\r\\n\\twidth: 40px;\\r\\n\\theight: 40px;\\r\\n\\tbackground-color: var(--editor-theme-color3);\\r\\n\\tborder-radius: 5px;\\r\\n\\tmargin: 4px;\\r\\n\\tmargin-left: auto;\\r\\n\\tposition: relative;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .eyecon {\\r\\n\\twidth: 12px;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .dir_select {\\r\\n\\twidth: 12px;\\r\\n\\tcursor: pointer;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .dir_select.selected {\\r\\n\\tfilter: var(--white-filter);\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .dir_select.right {\\r\\n    right: 1px;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .dir_select.left {\\r\\n\\ttransform: scaleX(-1);\\r\\n\\tleft: 1px;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .dir_select.up {\\r\\n\\ttransform: rotate(-90deg);\\r\\n\\ttop: 1px;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container .dir_select.down {\\r\\n\\ttransform: rotate(90deg);\\r\\n\\tbottom: 1px;\\r\\n}\\r\\n\\r\\n#srw_editor  .direction_control_container.locked img {\\r\\n\\tfilter: var(--grayed-out-filter) !important;\\r\\n\\tcursor: default;\\r\\n}\\r\\n\\r\\n#srw_editor #lock_att_rotation {\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .panes{\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .panes .pane{\\r\\n\\tflex-shrink: 0;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .panes .pane.left{\\r\\n\\tborder-right: 1px solid #222222;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .section {\\r\\n\\tborder: 1px solid #222222;\\r\\n\\tborder-radius: 4px;\\r\\n\\tmargin: 4px;\\r\\n\\toverflow: hidden;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .section .target_control  {\\r\\n\\tpadding: 0px;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .section .target_control.title  {\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .target_control .secondary  {\\r\\n\\twidth: 169px;\\r\\n}\\r\\n\\r\\n#srw_editor #map_att_anim_scale {\\r\\n\\twidth: 50px;\\r\\n}\\r\\n\\r\\n#srw_editor .map_att_offset {\\r\\n\\twidth: 30px;\\r\\n\\tmargin: 2px;\\r\\n}\\r\\n\\r\\n#srw_editor #map_attack_ui .unit_img_preview {\\r\\n\\twidth: 72px;\\r\\n\\theight: 72px;\\r\\n}\\r\\n\\r\\n#face_selector_container {\\r\\n\\tz-index: 100;\\r\\n}\\r\\n\\r\\n#map_att_text {\\r\\n\\tresize: none;\\r\\n\\theight: 3em;\\r\\n\\twidth: 100%;\\r\\n\\tmargin: 3px;\\r\\n\\tbackground-color: #2f3754;\\r\\n    color: white;\\r\\n    border: 0;\\r\\n}\\r\\n\\r\\n#srw_editor #sub_shape {\\r\\n\\tdisplay: none;\\r\\n}\\r\\n\\r\\n#srw_editor #sub_shape.active {\\r\\n\\tdisplay: block;\\r\\n}\\r\\n\\r\\n.editor_tag {\\r\\n\\tmargin-left: 5px;\\r\\n\\tcolor: rgba(255,255,255,0.7);\\r\\n}\\r\\n#srw_editor #helper_target {\\r\\n    width: 90px;\\r\\n    margin-left: 4px;\\r\\n}\\r\\n\\r\\n#srw_editor #inp_play_until {\\r\\n\\twidth: 40px;\\r\\n}\\r\\n\\r\\n.playback img{\\r\\n\\twidth: 12px;\\r\\n\\tcursor: pointer;\\r\\n\\tmargin-left: 5px;\\r\\n}\\r\\n\\r\\n.playback #fast_forward{\\r\\n\\t\\r\\n}\\r\\n\\r\\n.playback #fast_forward.active{\\r\\n\\tfilter: invert(16%) sepia(87%) saturate(5268%) hue-rotate(356deg) brightness(87%) contrast(117%);\\r\\n}\\r\\n.quote_selector_container {\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n.quote_selector_container img {\\r\\n\\twidth: 16px;\\r\\n\\tfilter: var(--white-filter);\\r\\n\\tcursor: pointer;\\r\\n\\tmargin-left: 5px;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n.quote_selector {\\r\\n\\tmax-height: 200px;\\r\\n\\twidth: 300px;\\r\\n\\toverflow-y: scroll;\\r\\n\\toverflow-x: hidden;\\r\\n\\tposition: fixed;\\r\\n\\tdisplay: none;\\r\\n\\ttop: 100%;\\r\\n    -webkit-box-shadow: 0px 0px 2px 1px rgb(0 0 0);\\r\\n    -moz-box-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n    box-shadow: 0px 0px 2px 1px rgb(0 0 0);\\r\\n    background-color: var(--editor-theme-color);\\r\\n\\tcolor: #222222;\\r\\n}\\r\\n\\r\\n.quote_selector .entry{\\r\\n\\tborder: 2px solid var(--editor-theme-color);\\r\\n\\tcursor: pointer;\\r\\n\\tpadding: 5px;\\r\\n\\tbackground-color: var(--editor-theme-color);\\r\\n}\\r\\n.quote_selector .entry:nth-child(even){\\r\\n\\t background-color: var(--light-theme-color);\\r\\n\\t border: 2px solid var(--light-theme-color);\\r\\n}\\r\\n\\r\\n.quote_selector .entry:hover {\\r\\n\\tbackground-color: #576082;\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.quote_selector .entry.selected {\\r\\n\\tborder: 2px solid red;\\r\\n}\\r\\n\\r\\n.quote_selector .entry .display_name {\\r\\n\\tfont-weight: bold;\\r\\n}\\r\\n\\r\\n#srw_editor .hint {\\r\\n\\tdisplay: inline;\\r\\n\\tmargin-left: 5px;\\r\\n\\tfont-size: 12px;\\r\\n\\tcolor: #222222;\\r\\n}\\r\\n/*============*/\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack://src/./js/Editor/style/editor.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./js/Editor/style/faceSelector.css":
/*!********************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./js/Editor/style/faceSelector.css ***!
  \********************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#face_selector_container {\\r\\n\\tposition: fixed;\\r\\n\\toverflow: hidden;\\r\\n\\t-webkit-box-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n\\t-moz-box-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n\\tbox-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n\\tbackground-color: var(--editor-theme-color);\\r\\n}\\r\\n\\r\\n.face_selector {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\t\\r\\n\\theight: 300px;\\r\\n}\\r\\n\\r\\n.face_selector .face_file_list {\\r\\n\\toverflow-y: auto;\\r\\n\\theight: 100%;\\r\\n\\tborder-right: 1px solid  var(--editor-theme-color-dark);\\r\\n\\tmin-width: 150px;\\r\\n}\\r\\n\\r\\n.face_selector .face_file_list .entry {\\r\\n\\tpadding: 3px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n.face_selector .face_file_list .entry:hover {\\r\\n\\tbackground-color: var(--editor-theme-color2);\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.face_selector .face_file_list .entry.selected {\\r\\n\\tbackground-color: var(--editor-theme-color-dark);\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.face_selector .selection_pane {\\r\\n\\tpadding: 10px;\\r\\n\\theight: 100%;\\r\\n\\theight: calc(100% - 20px);\\r\\n}\\r\\n\\r\\n.face_selector .selection_pane .label{\\r\\n\\tdisplay: inline-block;\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.face_selector .selection_pane .selector_container {\\r\\n\\tposition: relative;\\r\\n\\tborder: 1px solid var(--editor-theme-color-dark);\\r\\n\\tcursor: pointer;\\r\\n\\tbackground-color: #FFFFFF;\\r\\n}\\r\\n\\r\\n.selector_square {\\r\\n\\ttransition: 0.2s;\\r\\n\\tborder: 1px solid rgba(0,0,0,0);\\r\\n\\tcursor: pointer;\\r\\n\\tposition: absolute;\\r\\n}\\r\\n\\r\\n.selector_square.current {\\r\\n\\tborder: 1px solid rgba(0,200,0,1);\\r\\n}\\r\\n\\r\\n.selector_square:hover{\\r\\n\\tborder: 1px solid rgba(255,0,0,1);\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack://src/./js/Editor/style/faceSelector.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./js/Editor/style/menuSpriteSelector.css":
/*!**************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./js/Editor/style/menuSpriteSelector.css ***!
  \**************************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#menu_selector_container {\\r\\n\\tposition: fixed;\\r\\n\\toverflow: hidden;\\r\\n\\t-webkit-box-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n\\t-moz-box-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n\\tbox-shadow: 0px 0px 2px 1px rgba(0,0,0,1);\\r\\n\\tbackground-color: var(--editor-theme-color);\\r\\n}\\r\\n\\r\\n.preview_selector {\\r\\n}\\r\\n\\r\\n.preview_selector .controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tpadding: 4px;\\r\\n\\tbackground-color: var(--editor-theme-color3);\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.preview_selector .controls .label{\\r\\n\\tmargin-left: auto;\\r\\n\\tmargin-right: 5px;\\r\\n}\\r\\n\\r\\n.preview_selector .controls input{\\r\\n\\tmargin-right: 5px;\\t\\r\\n}\\r\\n\\r\\n.preview_selector .face_file_list {\\r\\n\\toverflow-y: auto;\\r\\n\\theight: 100%;\\r\\n\\tborder-right: 1px solid  var(--editor-theme-color-dark);\\r\\n\\tmin-width: 150px;\\r\\n}\\r\\n\\r\\n.preview_selector .face_file_list .entry {\\r\\n\\tpadding: 3px;\\r\\n\\tcursor: pointer;\\r\\n}\\r\\n\\r\\n.preview_selector .face_file_list .entry:hover {\\r\\n\\tbackground-color: var(--editor-theme-color2);\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.preview_selector .face_file_list .entry.selected {\\r\\n\\tbackground-color: var(--editor-theme-color-dark);\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.preview_selector .selection_pane {\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\n.preview_selector .selection_pane .label{\\r\\n\\tdisplay: inline-block;\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.preview_selector .selection_pane .selector_container {\\r\\n\\tposition: relative;\\r\\n\\tcursor: pointer;\\r\\n\\toverflow-y: scroll;\\r\\n\\theight: 500px;\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n.preview_selector .selection_pane .selector_container .row{\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n.preview_selector .entry_container {\\r\\n\\tmargin: 4px;\\r\\n}\\r\\n\\r\\n.preview_selector .entry {\\r\\n\\tcursor: pointer;\\r\\n\\twidth: 144px;\\r\\n\\theight: 144px;\\r\\n\\tbackground-color: rgba(0,0,0,0.5);\\r\\n\\tborder: 1px solid rgba(0,0,0,0.8);\\r\\n\\tflex-shrink: 0;\\r\\n\\tfont-size: 20px;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tcolor: #FFFFFF;\\r\\n}\\r\\n\\r\\n.preview_selector .entry:hover{\\r\\n\\tborder: 1px solid rgba(255,0,0,0.8);\\r\\n}\\r\\n\\r\\n.preview_selector .entry.selected{\\r\\n\\tborder: 1px solid rgba(0,255,0,0.8);\\r\\n}\\r\\n\\r\\n.preview_selector .entry img{\\r\\n\\twidth: 100%;\\r\\n}\\r\\n\\r\\n.file_name {\\r\\n\\twidth: 100%;\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    color: #FFFFFF;\\r\\n    background-color: var(--editor-theme-color3);\\r\\n\\toverflow: hidden;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n\n\n//# sourceURL=webpack://src/./js/Editor/style/menuSpriteSelector.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}\n\n//# sourceURL=webpack://src/./node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/copy/copy-sync.js":
/*!*****************************************************!*\
  !*** ./node_modules/fs-extra/lib/copy/copy-sync.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst mkdirsSync = (__webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\").mkdirsSync)\nconst utimesMillisSync = (__webpack_require__(/*! ../util/utimes */ \"./node_modules/fs-extra/lib/util/utimes.js\").utimesMillisSync)\nconst stat = __webpack_require__(/*! ../util/stat */ \"./node_modules/fs-extra/lib/util/stat.js\")\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0002'\n    )\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  return handleFilterAndCopy(destStat, src, dest, opts)\n}\n\nfunction handleFilterAndCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirsSync(destParent)\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction startCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n  else if (srcStat.isSocket()) throw new Error(`Cannot copy a socket file: ${src}`)\n  else if (srcStat.isFIFO()) throw new Error(`Cannot copy a FIFO pipe: ${src}`)\n  throw new Error(`Unknown file: ${src}`)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  fs.copyFileSync(src, dest)\n  if (opts.preserveTimestamps) handleTimestamps(srcStat.mode, src, dest)\n  return setDestMode(dest, srcStat.mode)\n}\n\nfunction handleTimestamps (srcMode, src, dest) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) makeFileWritable(dest, srcMode)\n  return setDestTimestamps(src, dest)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return setDestMode(dest, srcMode | 0o200)\n}\n\nfunction setDestMode (dest, srcMode) {\n  return fs.chmodSync(dest, srcMode)\n}\n\nfunction setDestTimestamps (src, dest) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  const updatedSrcStat = fs.statSync(src)\n  return utimesMillisSync(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts)\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return setDestMode(dest, srcMode)\n}\n\nfunction copyDir (src, dest, opts) {\n  fs.readdirSync(src).forEach(item => copyDirItem(item, src, dest, opts))\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy', opts)\n  return startCopy(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // prevent copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (fs.statSync(dest).isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/copy/copy-sync.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/copy/copy.js":
/*!************************************************!*\
  !*** ./node_modules/fs-extra/lib/copy/copy.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst mkdirs = (__webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\").mkdirs)\nconst pathExists = (__webpack_require__(/*! ../path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\").pathExists)\nconst utimesMillis = (__webpack_require__(/*! ../util/utimes */ \"./node_modules/fs-extra/lib/util/utimes.js\").utimesMillis)\nconst stat = __webpack_require__(/*! ../util/stat */ \"./node_modules/fs-extra/lib/util/stat.js\")\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0001'\n    )\n  }\n\n  stat.checkPaths(src, dest, 'copy', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      if (opts.filter) return handleFilter(checkParentDir, destStat, src, dest, opts, cb)\n      return checkParentDir(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return getStats(destStat, src, dest, opts, cb)\n    mkdirs(destParent, err => {\n      if (err) return cb(err)\n      return getStats(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction handleFilter (onInclude, destStat, src, dest, opts, cb) {\n  Promise.resolve(opts.filter(src, dest)).then(include => {\n    if (include) return onInclude(destStat, src, dest, opts, cb)\n    return cb()\n  }, error => cb(error))\n}\n\nfunction startCopy (destStat, src, dest, opts, cb) {\n  if (opts.filter) return handleFilter(getStats, destStat, src, dest, opts, cb)\n  return getStats(destStat, src, dest, opts, cb)\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n    else if (srcStat.isSocket()) return cb(new Error(`Cannot copy a socket file: ${src}`))\n    else if (srcStat.isFIFO()) return cb(new Error(`Cannot copy a FIFO pipe: ${src}`))\n    return cb(new Error(`Unknown file: ${src}`))\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  fs.copyFile(src, dest, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) return handleTimestampsAndMode(srcStat.mode, src, dest, cb)\n    return setDestMode(dest, srcStat.mode, cb)\n  })\n}\n\nfunction handleTimestampsAndMode (srcMode, src, dest, cb) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) {\n    return makeFileWritable(dest, srcMode, err => {\n      if (err) return cb(err)\n      return setDestTimestampsAndMode(srcMode, src, dest, cb)\n    })\n  }\n  return setDestTimestampsAndMode(srcMode, src, dest, cb)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode, cb) {\n  return setDestMode(dest, srcMode | 0o200, cb)\n}\n\nfunction setDestTimestampsAndMode (srcMode, src, dest, cb) {\n  setDestTimestamps(src, dest, err => {\n    if (err) return cb(err)\n    return setDestMode(dest, srcMode, cb)\n  })\n}\n\nfunction setDestMode (dest, srcMode, cb) {\n  return fs.chmod(dest, srcMode, cb)\n}\n\nfunction setDestTimestamps (src, dest, cb) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  fs.stat(src, (err, updatedSrcStat) => {\n    if (err) return cb(err)\n    return utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime, cb)\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts, cb)\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return setDestMode(dest, srcMode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  stat.checkPaths(srcItem, destItem, 'copy', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { destStat } = stats\n    startCopy(destStat, srcItem, destItem, opts, err => {\n      if (err) return cb(err)\n      return copyDirItems(items, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (destStat.isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/copy/copy.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/copy/index.js":
/*!*************************************************!*\
  !*** ./node_modules/fs-extra/lib/copy/index.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nmodule.exports = {\n  copy: u(__webpack_require__(/*! ./copy */ \"./node_modules/fs-extra/lib/copy/copy.js\")),\n  copySync: __webpack_require__(/*! ./copy-sync */ \"./node_modules/fs-extra/lib/copy/copy-sync.js\")\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/copy/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/empty/index.js":
/*!**************************************************!*\
  !*** ./node_modules/fs-extra/lib/empty/index.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromPromise)\nconst fs = __webpack_require__(/*! ../fs */ \"./node_modules/fs-extra/lib/fs/index.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst mkdir = __webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\")\nconst remove = __webpack_require__(/*! ../remove */ \"./node_modules/fs-extra/lib/remove/index.js\")\n\nconst emptyDir = u(async function emptyDir (dir) {\n  let items\n  try {\n    items = await fs.readdir(dir)\n  } catch {\n    return mkdir.mkdirs(dir)\n  }\n\n  return Promise.all(items.map(item => remove.remove(path.join(dir, item))))\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/empty/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/ensure/file.js":
/*!**************************************************!*\
  !*** ./node_modules/fs-extra/lib/ensure/file.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nconst path = __webpack_require__(/*! path */ \"path\")\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst mkdir = __webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\")\n\nfunction createFile (file, callback) {\n  function makeFile () {\n    fs.writeFile(file, '', err => {\n      if (err) return callback(err)\n      callback()\n    })\n  }\n\n  fs.stat(file, (err, stats) => { // eslint-disable-line handle-callback-err\n    if (!err && stats.isFile()) return callback()\n    const dir = path.dirname(file)\n    fs.stat(dir, (err, stats) => {\n      if (err) {\n        // if the directory doesn't exist, make it\n        if (err.code === 'ENOENT') {\n          return mkdir.mkdirs(dir, err => {\n            if (err) return callback(err)\n            makeFile()\n          })\n        }\n        return callback(err)\n      }\n\n      if (stats.isDirectory()) makeFile()\n      else {\n        // parent is not a directory\n        // This is just to cause an internal ENOTDIR error to be thrown\n        fs.readdir(dir, err => {\n          if (err) return callback(err)\n        })\n      }\n    })\n  })\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch {}\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  try {\n    if (!fs.statSync(dir).isDirectory()) {\n      // parent is not a directory\n      // This is just to cause an internal ENOTDIR error to be thrown\n      fs.readdirSync(dir)\n    }\n  } catch (err) {\n    // If the stat call above failed because the directory doesn't exist, create it\n    if (err && err.code === 'ENOENT') mkdir.mkdirsSync(dir)\n    else throw err\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/ensure/file.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/ensure/index.js":
/*!***************************************************!*\
  !*** ./node_modules/fs-extra/lib/ensure/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst { createFile, createFileSync } = __webpack_require__(/*! ./file */ \"./node_modules/fs-extra/lib/ensure/file.js\")\nconst { createLink, createLinkSync } = __webpack_require__(/*! ./link */ \"./node_modules/fs-extra/lib/ensure/link.js\")\nconst { createSymlink, createSymlinkSync } = __webpack_require__(/*! ./symlink */ \"./node_modules/fs-extra/lib/ensure/symlink.js\")\n\nmodule.exports = {\n  // file\n  createFile,\n  createFileSync,\n  ensureFile: createFile,\n  ensureFileSync: createFileSync,\n  // link\n  createLink,\n  createLinkSync,\n  ensureLink: createLink,\n  ensureLinkSync: createLinkSync,\n  // symlink\n  createSymlink,\n  createSymlinkSync,\n  ensureSymlink: createSymlink,\n  ensureSymlinkSync: createSymlinkSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/ensure/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/ensure/link.js":
/*!**************************************************!*\
  !*** ./node_modules/fs-extra/lib/ensure/link.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nconst path = __webpack_require__(/*! path */ \"path\")\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst mkdir = __webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\")\nconst pathExists = (__webpack_require__(/*! ../path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\").pathExists)\nconst { areIdentical } = __webpack_require__(/*! ../util/stat */ \"./node_modules/fs-extra/lib/util/stat.js\")\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  fs.lstat(dstpath, (_, dstStat) => {\n    fs.lstat(srcpath, (err, srcStat) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n      if (dstStat && areIdentical(srcStat, dstStat)) return callback(null)\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  let dstStat\n  try {\n    dstStat = fs.lstatSync(dstpath)\n  } catch {}\n\n  try {\n    const srcStat = fs.lstatSync(srcpath)\n    if (dstStat && areIdentical(srcStat, dstStat)) return\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/ensure/link.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/ensure/symlink-paths.js":
/*!***********************************************************!*\
  !*** ./node_modules/fs-extra/lib/ensure/symlink-paths.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst path = __webpack_require__(/*! path */ \"path\")\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst pathExists = (__webpack_require__(/*! ../path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\").pathExists)\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nfunction symlinkPaths (srcpath, dstpath, callback) {\n  if (path.isAbsolute(srcpath)) {\n    return fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureSymlink')\n        return callback(err)\n      }\n      return callback(null, {\n        toCwd: srcpath,\n        toDst: srcpath\n      })\n    })\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    return pathExists(relativeToDst, (err, exists) => {\n      if (err) return callback(err)\n      if (exists) {\n        return callback(null, {\n          toCwd: relativeToDst,\n          toDst: srcpath\n        })\n      } else {\n        return fs.lstat(srcpath, (err) => {\n          if (err) {\n            err.message = err.message.replace('lstat', 'ensureSymlink')\n            return callback(err)\n          }\n          return callback(null, {\n            toCwd: srcpath,\n            toDst: path.relative(dstdir, srcpath)\n          })\n        })\n      }\n    })\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  let exists\n  if (path.isAbsolute(srcpath)) {\n    exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    exists = fs.existsSync(relativeToDst)\n    if (exists) {\n      return {\n        toCwd: relativeToDst,\n        toDst: srcpath\n      }\n    } else {\n      exists = fs.existsSync(srcpath)\n      if (!exists) throw new Error('relative srcpath does not exist')\n      return {\n        toCwd: srcpath,\n        toDst: path.relative(dstdir, srcpath)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  symlinkPaths,\n  symlinkPathsSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/ensure/symlink-paths.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/ensure/symlink-type.js":
/*!**********************************************************!*\
  !*** ./node_modules/fs-extra/lib/ensure/symlink-type.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\n\nfunction symlinkType (srcpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n  if (type) return callback(null, type)\n  fs.lstat(srcpath, (err, stats) => {\n    if (err) return callback(null, 'file')\n    type = (stats && stats.isDirectory()) ? 'dir' : 'file'\n    callback(null, type)\n  })\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  let stats\n\n  if (type) return type\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType,\n  symlinkTypeSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/ensure/symlink-type.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/ensure/symlink.js":
/*!*****************************************************!*\
  !*** ./node_modules/fs-extra/lib/ensure/symlink.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nconst path = __webpack_require__(/*! path */ \"path\")\nconst fs = __webpack_require__(/*! ../fs */ \"./node_modules/fs-extra/lib/fs/index.js\")\nconst _mkdirs = __webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\")\nconst mkdirs = _mkdirs.mkdirs\nconst mkdirsSync = _mkdirs.mkdirsSync\n\nconst _symlinkPaths = __webpack_require__(/*! ./symlink-paths */ \"./node_modules/fs-extra/lib/ensure/symlink-paths.js\")\nconst symlinkPaths = _symlinkPaths.symlinkPaths\nconst symlinkPathsSync = _symlinkPaths.symlinkPathsSync\n\nconst _symlinkType = __webpack_require__(/*! ./symlink-type */ \"./node_modules/fs-extra/lib/ensure/symlink-type.js\")\nconst symlinkType = _symlinkType.symlinkType\nconst symlinkTypeSync = _symlinkType.symlinkTypeSync\n\nconst pathExists = (__webpack_require__(/*! ../path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\").pathExists)\n\nconst { areIdentical } = __webpack_require__(/*! ../util/stat */ \"./node_modules/fs-extra/lib/util/stat.js\")\n\nfunction createSymlink (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  fs.lstat(dstpath, (err, stats) => {\n    if (!err && stats.isSymbolicLink()) {\n      Promise.all([\n        fs.stat(srcpath),\n        fs.stat(dstpath)\n      ]).then(([srcStat, dstStat]) => {\n        if (areIdentical(srcStat, dstStat)) return callback(null)\n        _createSymlink(srcpath, dstpath, type, callback)\n      })\n    } else _createSymlink(srcpath, dstpath, type, callback)\n  })\n}\n\nfunction _createSymlink (srcpath, dstpath, type, callback) {\n  symlinkPaths(srcpath, dstpath, (err, relative) => {\n    if (err) return callback(err)\n    srcpath = relative.toDst\n    symlinkType(relative.toCwd, type, (err, type) => {\n      if (err) return callback(err)\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return fs.symlink(srcpath, dstpath, type, callback)\n        mkdirs(dir, err => {\n          if (err) return callback(err)\n          fs.symlink(srcpath, dstpath, type, callback)\n        })\n      })\n    })\n  })\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  let stats\n  try {\n    stats = fs.lstatSync(dstpath)\n  } catch {}\n  if (stats && stats.isSymbolicLink()) {\n    const srcStat = fs.statSync(srcpath)\n    const dstStat = fs.statSync(dstpath)\n    if (areIdentical(srcStat, dstStat)) return\n  }\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/ensure/symlink.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/fs/index.js":
/*!***********************************************!*\
  !*** ./node_modules/fs-extra/lib/fs/index.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'lchmod',\n  'lchown',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'opendir',\n  'readdir',\n  'readFile',\n  'readlink',\n  'realpath',\n  'rename',\n  'rm',\n  'rmdir',\n  'stat',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.opendir was added in Node.js v12.12.0\n  // fs.rm was added in Node.js v14.14.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export cloned fs:\nObject.assign(exports, fs)\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read(), fs.write(), & fs.writev() need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// fs.writev only available in Node v12.9.0+\nif (typeof fs.writev === 'function') {\n  // Function signature is\n  // s.writev(fd, buffers[, position], callback)\n  // We need to handle the optional arg, so we use ...args\n  exports.writev = function (fd, buffers, ...args) {\n    if (typeof args[args.length - 1] === 'function') {\n      return fs.writev(fd, buffers, ...args)\n    }\n\n    return new Promise((resolve, reject) => {\n      fs.writev(fd, buffers, ...args, (err, bytesWritten, buffers) => {\n        if (err) return reject(err)\n        resolve({ bytesWritten, buffers })\n      })\n    })\n  }\n}\n\n// fs.realpath.native sometimes not available if fs is monkey-patched\nif (typeof fs.realpath.native === 'function') {\n  exports.realpath.native = u(fs.realpath.native)\n} else {\n  process.emitWarning(\n    'fs.realpath.native is not a function. Is fs being monkey-patched?',\n    'Warning', 'fs-extra-WARN0003'\n  )\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/fs/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/index.js":
/*!********************************************!*\
  !*** ./node_modules/fs-extra/lib/index.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nmodule.exports = {\n  // Export promiseified graceful-fs:\n  ...__webpack_require__(/*! ./fs */ \"./node_modules/fs-extra/lib/fs/index.js\"),\n  // Export extra methods:\n  ...__webpack_require__(/*! ./copy */ \"./node_modules/fs-extra/lib/copy/index.js\"),\n  ...__webpack_require__(/*! ./empty */ \"./node_modules/fs-extra/lib/empty/index.js\"),\n  ...__webpack_require__(/*! ./ensure */ \"./node_modules/fs-extra/lib/ensure/index.js\"),\n  ...__webpack_require__(/*! ./json */ \"./node_modules/fs-extra/lib/json/index.js\"),\n  ...__webpack_require__(/*! ./mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\"),\n  ...__webpack_require__(/*! ./move */ \"./node_modules/fs-extra/lib/move/index.js\"),\n  ...__webpack_require__(/*! ./output-file */ \"./node_modules/fs-extra/lib/output-file/index.js\"),\n  ...__webpack_require__(/*! ./path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\"),\n  ...__webpack_require__(/*! ./remove */ \"./node_modules/fs-extra/lib/remove/index.js\")\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/json/index.js":
/*!*************************************************!*\
  !*** ./node_modules/fs-extra/lib/json/index.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromPromise)\nconst jsonFile = __webpack_require__(/*! ./jsonfile */ \"./node_modules/fs-extra/lib/json/jsonfile.js\")\n\njsonFile.outputJson = u(__webpack_require__(/*! ./output-json */ \"./node_modules/fs-extra/lib/json/output-json.js\"))\njsonFile.outputJsonSync = __webpack_require__(/*! ./output-json-sync */ \"./node_modules/fs-extra/lib/json/output-json-sync.js\")\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/json/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/json/jsonfile.js":
/*!****************************************************!*\
  !*** ./node_modules/fs-extra/lib/json/jsonfile.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst jsonFile = __webpack_require__(/*! jsonfile */ \"./node_modules/jsonfile/index.js\")\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: jsonFile.readFile,\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: jsonFile.writeFile,\n  writeJsonSync: jsonFile.writeFileSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/json/jsonfile.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/json/output-json-sync.js":
/*!************************************************************!*\
  !*** ./node_modules/fs-extra/lib/json/output-json-sync.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst { stringify } = __webpack_require__(/*! jsonfile/utils */ \"./node_modules/jsonfile/utils.js\")\nconst { outputFileSync } = __webpack_require__(/*! ../output-file */ \"./node_modules/fs-extra/lib/output-file/index.js\")\n\nfunction outputJsonSync (file, data, options) {\n  const str = stringify(data, options)\n\n  outputFileSync(file, str, options)\n}\n\nmodule.exports = outputJsonSync\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/json/output-json-sync.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/json/output-json.js":
/*!*******************************************************!*\
  !*** ./node_modules/fs-extra/lib/json/output-json.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst { stringify } = __webpack_require__(/*! jsonfile/utils */ \"./node_modules/jsonfile/utils.js\")\nconst { outputFile } = __webpack_require__(/*! ../output-file */ \"./node_modules/fs-extra/lib/output-file/index.js\")\n\nasync function outputJson (file, data, options = {}) {\n  const str = stringify(data, options)\n\n  await outputFile(file, str, options)\n}\n\nmodule.exports = outputJson\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/json/output-json.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/mkdirs/index.js":
/*!***************************************************!*\
  !*** ./node_modules/fs-extra/lib/mkdirs/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromPromise)\nconst { makeDir: _makeDir, makeDirSync } = __webpack_require__(/*! ./make-dir */ \"./node_modules/fs-extra/lib/mkdirs/make-dir.js\")\nconst makeDir = u(_makeDir)\n\nmodule.exports = {\n  mkdirs: makeDir,\n  mkdirsSync: makeDirSync,\n  // alias\n  mkdirp: makeDir,\n  mkdirpSync: makeDirSync,\n  ensureDir: makeDir,\n  ensureDirSync: makeDirSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/mkdirs/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/mkdirs/make-dir.js":
/*!******************************************************!*\
  !*** ./node_modules/fs-extra/lib/mkdirs/make-dir.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst fs = __webpack_require__(/*! ../fs */ \"./node_modules/fs-extra/lib/fs/index.js\")\nconst { checkPath } = __webpack_require__(/*! ./utils */ \"./node_modules/fs-extra/lib/mkdirs/utils.js\")\n\nconst getMode = options => {\n  const defaults = { mode: 0o777 }\n  if (typeof options === 'number') return options\n  return ({ ...defaults, ...options }).mode\n}\n\nmodule.exports.makeDir = async (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdir(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n\nmodule.exports.makeDirSync = (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdirSync(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/mkdirs/make-dir.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/mkdirs/utils.js":
/*!***************************************************!*\
  !*** ./node_modules/fs-extra/lib/mkdirs/utils.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("// Adapted from https://github.com/sindresorhus/make-dir\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nconst path = __webpack_require__(/*! path */ \"path\")\n\n// https://github.com/nodejs/node/issues/8987\n// https://github.com/libuv/libuv/pull/1088\nmodule.exports.checkPath = function checkPath (pth) {\n  if (process.platform === 'win32') {\n    const pathHasInvalidWinCharacters = /[<>:\"|?*]/.test(pth.replace(path.parse(pth).root, ''))\n\n    if (pathHasInvalidWinCharacters) {\n      const error = new Error(`Path contains invalid characters: ${pth}`)\n      error.code = 'EINVAL'\n      throw error\n    }\n  }\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/mkdirs/utils.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/move/index.js":
/*!*************************************************!*\
  !*** ./node_modules/fs-extra/lib/move/index.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nmodule.exports = {\n  move: u(__webpack_require__(/*! ./move */ \"./node_modules/fs-extra/lib/move/move.js\")),\n  moveSync: __webpack_require__(/*! ./move-sync */ \"./node_modules/fs-extra/lib/move/move-sync.js\")\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/move/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/move/move-sync.js":
/*!*****************************************************!*\
  !*** ./node_modules/fs-extra/lib/move/move-sync.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst copySync = (__webpack_require__(/*! ../copy */ \"./node_modules/fs-extra/lib/copy/index.js\").copySync)\nconst removeSync = (__webpack_require__(/*! ../remove */ \"./node_modules/fs-extra/lib/remove/index.js\").removeSync)\nconst mkdirpSync = (__webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\").mkdirpSync)\nconst stat = __webpack_require__(/*! ../util/stat */ \"./node_modules/fs-extra/lib/util/stat.js\")\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat, isChangingCase = false } = stat.checkPathsSync(src, dest, 'move', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  if (!isParentRoot(dest)) mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite, isChangingCase)\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase) {\n  if (isChangingCase) return rename(src, dest, overwrite)\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/move/move-sync.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/move/move.js":
/*!************************************************!*\
  !*** ./node_modules/fs-extra/lib/move/move.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst copy = (__webpack_require__(/*! ../copy */ \"./node_modules/fs-extra/lib/copy/index.js\").copy)\nconst remove = (__webpack_require__(/*! ../remove */ \"./node_modules/fs-extra/lib/remove/index.js\").remove)\nconst mkdirp = (__webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\").mkdirp)\nconst pathExists = (__webpack_require__(/*! ../path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\").pathExists)\nconst stat = __webpack_require__(/*! ../util/stat */ \"./node_modules/fs-extra/lib/util/stat.js\")\n\nfunction move (src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  stat.checkPaths(src, dest, 'move', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, isChangingCase = false } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err)\n      if (isParentRoot(dest)) return doRename(src, dest, overwrite, isChangingCase, cb)\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err)\n        return doRename(src, dest, overwrite, isChangingCase, cb)\n      })\n    })\n  })\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase, cb) {\n  if (isChangingCase) return rename(src, dest, overwrite, cb)\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err)\n      return rename(src, dest, overwrite, cb)\n    })\n  }\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err)\n    if (destExists) return cb(new Error('dest already exists.'))\n    return rename(src, dest, overwrite, cb)\n  })\n}\n\nfunction rename (src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb()\n    if (err.code !== 'EXDEV') return cb(err)\n    return moveAcrossDevice(src, dest, overwrite, cb)\n  })\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copy(src, dest, opts, err => {\n    if (err) return cb(err)\n    return remove(src, cb)\n  })\n}\n\nmodule.exports = move\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/move/move.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/output-file/index.js":
/*!********************************************************!*\
  !*** ./node_modules/fs-extra/lib/output-file/index.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst mkdir = __webpack_require__(/*! ../mkdirs */ \"./node_modules/fs-extra/lib/mkdirs/index.js\")\nconst pathExists = (__webpack_require__(/*! ../path-exists */ \"./node_modules/fs-extra/lib/path-exists/index.js\").pathExists)\n\nfunction outputFile (file, data, encoding, callback) {\n  if (typeof encoding === 'function') {\n    callback = encoding\n    encoding = 'utf8'\n  }\n\n  const dir = path.dirname(file)\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return fs.writeFile(file, data, encoding, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n\n      fs.writeFile(file, data, encoding, callback)\n    })\n  })\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (fs.existsSync(dir)) {\n    return fs.writeFileSync(file, ...args)\n  }\n  mkdir.mkdirsSync(dir)\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/output-file/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/path-exists/index.js":
/*!********************************************************!*\
  !*** ./node_modules/fs-extra/lib/path-exists/index.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromPromise)\nconst fs = __webpack_require__(/*! ../fs */ \"./node_modules/fs-extra/lib/fs/index.js\")\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/path-exists/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/remove/index.js":
/*!***************************************************!*\
  !*** ./node_modules/fs-extra/lib/remove/index.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst u = (__webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\").fromCallback)\nconst rimraf = __webpack_require__(/*! ./rimraf */ \"./node_modules/fs-extra/lib/remove/rimraf.js\")\n\nfunction remove (path, callback) {\n  // Node 14.14.0+\n  if (fs.rm) return fs.rm(path, { recursive: true, force: true }, callback)\n  rimraf(path, callback)\n}\n\nfunction removeSync (path) {\n  // Node 14.14.0+\n  if (fs.rmSync) return fs.rmSync(path, { recursive: true, force: true })\n  rimraf.sync(path)\n}\n\nmodule.exports = {\n  remove: u(remove),\n  removeSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/remove/index.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/remove/rimraf.js":
/*!****************************************************!*\
  !*** ./node_modules/fs-extra/lib/remove/rimraf.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst assert = __webpack_require__(/*! assert */ \"assert\")\n\nconst isWindows = (process.platform === 'win32')\n\nfunction defaults (options) {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n}\n\nfunction rimraf (p, options, cb) {\n  let busyTries = 0\n\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert.strictEqual(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  rimraf_(p, options, function CB (er) {\n    if (er) {\n      if ((er.code === 'EBUSY' || er.code === 'ENOTEMPTY' || er.code === 'EPERM') &&\n          busyTries < options.maxBusyTries) {\n        busyTries++\n        const time = busyTries * 100\n        // try again, with the same exact callback as this one.\n        return setTimeout(() => rimraf_(p, options, CB), time)\n      }\n\n      // already gone\n      if (er.code === 'ENOENT') er = null\n    }\n\n    cb(er)\n  })\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === 'ENOENT') {\n      return cb(null)\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === 'EPERM' && isWindows) {\n      return fixWinEPERM(p, options, er, cb)\n    }\n\n    if (st && st.isDirectory()) {\n      return rmdir(p, options, er, cb)\n    }\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === 'ENOENT') {\n          return cb(null)\n        }\n        if (er.code === 'EPERM') {\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        }\n        if (er.code === 'EISDIR') {\n          return rmdir(p, options, er, cb)\n        }\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2) {\n      cb(er2.code === 'ENOENT' ? null : er)\n    } else {\n      options.stat(p, (er3, stats) => {\n        if (er3) {\n          cb(er3.code === 'ENOENT' ? null : er)\n        } else if (stats.isDirectory()) {\n          rmdir(p, options, er, cb)\n        } else {\n          options.unlink(p, cb)\n        }\n      })\n    }\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  let stats\n\n  assert(p)\n  assert(options)\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  if (stats.isDirectory()) {\n    rmdirSync(p, options, er)\n  } else {\n    options.unlinkSync(p)\n  }\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM')) {\n      rmkids(p, options, cb)\n    } else if (er && er.code === 'ENOTDIR') {\n      cb(originalEr)\n    } else {\n      cb(er)\n    }\n  })\n}\n\nfunction rmkids (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er) return cb(er)\n\n    let n = files.length\n    let errState\n\n    if (n === 0) return options.rmdir(p, cb)\n\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState) {\n          return\n        }\n        if (er) return cb(errState = er)\n        if (--n === 0) {\n          options.rmdir(p, cb)\n        }\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  let st\n\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  try {\n    st = options.lstatSync(p)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er.code === 'EPERM' && isWindows) {\n      fixWinEPERMSync(p, options, er)\n    }\n  }\n\n  try {\n    // sunos lets the root user unlink directories, which is... weird.\n    if (st && st.isDirectory()) {\n      rmdirSync(p, options, null)\n    } else {\n      options.unlinkSync(p)\n    }\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    } else if (er.code === 'EPERM') {\n      return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n    } else if (er.code !== 'EISDIR') {\n      throw er\n    }\n    rmdirSync(p, options, er)\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === 'ENOTDIR') {\n      throw originalEr\n    } else if (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM') {\n      rmkidsSync(p, options)\n    } else if (er.code !== 'ENOENT') {\n      throw er\n    }\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  if (isWindows) {\n    // We only end up here once we got ENOTEMPTY at least once, and\n    // at this point, we are guaranteed to have removed all the kids.\n    // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n    // try really hard to delete stuff on windows, because it has a\n    // PROFOUNDLY annoying habit of not closing handles promptly when\n    // files are deleted, resulting in spurious ENOTEMPTY errors.\n    const startTime = Date.now()\n    do {\n      try {\n        const ret = options.rmdirSync(p, options)\n        return ret\n      } catch {}\n    } while (Date.now() - startTime < 500) // give up after 500ms\n  } else {\n    const ret = options.rmdirSync(p, options)\n    return ret\n  }\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/remove/rimraf.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/util/stat.js":
/*!************************************************!*\
  !*** ./node_modules/fs-extra/lib/util/stat.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! ../fs */ \"./node_modules/fs-extra/lib/fs/index.js\")\nconst path = __webpack_require__(/*! path */ \"path\")\nconst util = __webpack_require__(/*! util */ \"util\")\n\nfunction getStats (src, dest, opts) {\n  const statFunc = opts.dereference\n    ? (file) => fs.stat(file, { bigint: true })\n    : (file) => fs.lstat(file, { bigint: true })\n  return Promise.all([\n    statFunc(src),\n    statFunc(dest).catch(err => {\n      if (err.code === 'ENOENT') return null\n      throw err\n    })\n  ]).then(([srcStat, destStat]) => ({ srcStat, destStat }))\n}\n\nfunction getStatsSync (src, dest, opts) {\n  let destStat\n  const statFunc = opts.dereference\n    ? (file) => fs.statSync(file, { bigint: true })\n    : (file) => fs.lstatSync(file, { bigint: true })\n  const srcStat = statFunc(src)\n  try {\n    destStat = statFunc(dest)\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nfunction checkPaths (src, dest, funcName, opts, cb) {\n  util.callbackify(getStats)(src, dest, opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n\n    if (destStat) {\n      if (areIdentical(srcStat, destStat)) {\n        const srcBaseName = path.basename(src)\n        const destBaseName = path.basename(dest)\n        if (funcName === 'move' &&\n          srcBaseName !== destBaseName &&\n          srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n          return cb(null, { srcStat, destStat, isChangingCase: true })\n        }\n        return cb(new Error('Source and destination must not be the same.'))\n      }\n      if (srcStat.isDirectory() && !destStat.isDirectory()) {\n        return cb(new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`))\n      }\n      if (!srcStat.isDirectory() && destStat.isDirectory()) {\n        return cb(new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`))\n      }\n    }\n\n    if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return cb(null, { srcStat, destStat })\n  })\n}\n\nfunction checkPathsSync (src, dest, funcName, opts) {\n  const { srcStat, destStat } = getStatsSync(src, dest, opts)\n\n  if (destStat) {\n    if (areIdentical(srcStat, destStat)) {\n      const srcBaseName = path.basename(src)\n      const destBaseName = path.basename(dest)\n      if (funcName === 'move' &&\n        srcBaseName !== destBaseName &&\n        srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n        return { srcStat, destStat, isChangingCase: true }\n      }\n      throw new Error('Source and destination must not be the same.')\n    }\n    if (srcStat.isDirectory() && !destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n    }\n    if (!srcStat.isDirectory() && destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)\n    }\n  }\n\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nfunction checkParentPaths (src, srcStat, dest, funcName, cb) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return cb()\n  fs.stat(destParent, { bigint: true }, (err, destStat) => {\n    if (err) {\n      if (err.code === 'ENOENT') return cb()\n      return cb(err)\n    }\n    if (areIdentical(srcStat, destStat)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return checkParentPaths(src, srcStat, destParent, funcName, cb)\n  })\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    destStat = fs.statSync(destParent, { bigint: true })\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\nfunction areIdentical (srcStat, destStat) {\n  return destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.reduce((acc, cur, i) => acc && destArr[i] === cur, true)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  checkPaths,\n  checkPathsSync,\n  checkParentPaths,\n  checkParentPathsSync,\n  isSrcSubdir,\n  areIdentical\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/util/stat.js?");

/***/ }),

/***/ "./node_modules/fs-extra/lib/util/utimes.js":
/*!**************************************************!*\
  !*** ./node_modules/fs-extra/lib/util/utimes.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nconst fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', (err, fd) => {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, futimesErr => {\n      fs.close(fd, closeErr => {\n        if (callback) callback(futimesErr || closeErr)\n      })\n    })\n  })\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  utimesMillis,\n  utimesMillisSync\n}\n\n\n//# sourceURL=webpack://src/./node_modules/fs-extra/lib/util/utimes.js?");

/***/ }),

/***/ "./node_modules/graceful-fs/clone.js":
/*!*******************************************!*\
  !*** ./node_modules/graceful-fs/clone.js ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
eval("\n\nmodule.exports = clone\n\nvar getPrototypeOf = Object.getPrototypeOf || function (obj) {\n  return obj.__proto__\n}\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: getPrototypeOf(obj) }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n\n\n//# sourceURL=webpack://src/./node_modules/graceful-fs/clone.js?");

/***/ }),

/***/ "./node_modules/graceful-fs/graceful-fs.js":
/*!*************************************************!*\
  !*** ./node_modules/graceful-fs/graceful-fs.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var fs = __webpack_require__(/*! fs */ \"fs\")\nvar polyfills = __webpack_require__(/*! ./polyfills.js */ \"./node_modules/graceful-fs/polyfills.js\")\nvar legacy = __webpack_require__(/*! ./legacy-streams.js */ \"./node_modules/graceful-fs/legacy-streams.js\")\nvar clone = __webpack_require__(/*! ./clone.js */ \"./node_modules/graceful-fs/clone.js\")\n\nvar util = __webpack_require__(/*! util */ \"util\")\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          resetQueue()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      resetQueue()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      __webpack_require__(/*! assert */ \"assert\").equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb, startTime) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb, startTime) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb, startTime) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$copyFile = fs.copyFile\n  if (fs$copyFile)\n    fs.copyFile = copyFile\n  function copyFile (src, dest, flags, cb) {\n    if (typeof flags === 'function') {\n      cb = flags\n      flags = 0\n    }\n    return go$copyFile(src, dest, flags, cb)\n\n    function go$copyFile (src, dest, flags, cb, startTime) {\n      return fs$copyFile(src, dest, flags, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$copyFile, [src, dest, flags, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  var noReaddirOptionVersions = /^v[0-5]\\./\n  function readdir (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    var go$readdir = noReaddirOptionVersions.test(process.version)\n      ? function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n      : function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, options, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n\n    return go$readdir(path, options, cb)\n\n    function fs$readdirCallback (path, options, cb, startTime) {\n      return function (err, files) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([\n            go$readdir,\n            [path, options, cb],\n            err,\n            startTime || Date.now(),\n            Date.now()\n          ])\n        else {\n          if (files && files.sort)\n            files.sort()\n\n          if (typeof cb === 'function')\n            cb.call(this, err, files)\n        }\n      }\n    }\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb, startTime) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n  retry()\n}\n\n// keep track of the timeout between retry() calls\nvar retryTimer\n\n// reset the startTime and lastTime to now\n// this resets the start of the 60 second overall timeout as well as the\n// delay between attempts so that we'll retry these jobs sooner\nfunction resetQueue () {\n  var now = Date.now()\n  for (var i = 0; i < fs[gracefulQueue].length; ++i) {\n    // entries that are only a length of 2 are from an older version, don't\n    // bother modifying those since they'll be retried anyway.\n    if (fs[gracefulQueue][i].length > 2) {\n      fs[gracefulQueue][i][3] = now // startTime\n      fs[gracefulQueue][i][4] = now // lastTime\n    }\n  }\n  // call retry to make sure we're actively processing the queue\n  retry()\n}\n\nfunction retry () {\n  // clear the timer and remove it to help prevent unintended concurrency\n  clearTimeout(retryTimer)\n  retryTimer = undefined\n\n  if (fs[gracefulQueue].length === 0)\n    return\n\n  var elem = fs[gracefulQueue].shift()\n  var fn = elem[0]\n  var args = elem[1]\n  // these items may be unset if they were added by an older graceful-fs\n  var err = elem[2]\n  var startTime = elem[3]\n  var lastTime = elem[4]\n\n  // if we don't have a startTime we have no way of knowing if we've waited\n  // long enough, so go ahead and retry this item now\n  if (startTime === undefined) {\n    debug('RETRY', fn.name, args)\n    fn.apply(null, args)\n  } else if (Date.now() - startTime >= 60000) {\n    // it's been more than 60 seconds total, bail now\n    debug('TIMEOUT', fn.name, args)\n    var cb = args.pop()\n    if (typeof cb === 'function')\n      cb.call(null, err)\n  } else {\n    // the amount of time between the last attempt and right now\n    var sinceAttempt = Date.now() - lastTime\n    // the amount of time between when we first tried, and when we last tried\n    // rounded up to at least 1\n    var sinceStart = Math.max(lastTime - startTime, 1)\n    // backoff. wait longer than the total time we've been retrying, but only\n    // up to a maximum of 100ms\n    var desiredDelay = Math.min(sinceStart * 1.2, 100)\n    // it's been long enough since the last retry, do it again\n    if (sinceAttempt >= desiredDelay) {\n      debug('RETRY', fn.name, args)\n      fn.apply(null, args.concat([startTime]))\n    } else {\n      // if we can't do this job yet, push it to the end of the queue\n      // and let the next iteration check again\n      fs[gracefulQueue].push(elem)\n    }\n  }\n\n  // schedule our next run if one isn't already scheduled\n  if (retryTimer === undefined) {\n    retryTimer = setTimeout(retry, 0)\n  }\n}\n\n\n//# sourceURL=webpack://src/./node_modules/graceful-fs/graceful-fs.js?");

/***/ }),

/***/ "./node_modules/graceful-fs/legacy-streams.js":
/*!****************************************************!*\
  !*** ./node_modules/graceful-fs/legacy-streams.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var Stream = (__webpack_require__(/*! stream */ \"stream\").Stream)\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n\n\n//# sourceURL=webpack://src/./node_modules/graceful-fs/legacy-streams.js?");

/***/ }),

/***/ "./node_modules/graceful-fs/polyfills.js":
/*!***********************************************!*\
  !*** ./node_modules/graceful-fs/polyfills.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var constants = __webpack_require__(/*! constants */ \"constants\")\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\n// This check is needed until node.js 12 is required\nif (typeof process.chdir === 'function') {\n  var chdir = process.chdir\n  process.chdir = function (d) {\n    cwd = null\n    chdir.call(process, d)\n  }\n  if (Object.setPrototypeOf) Object.setPrototypeOf(process.chdir, chdir)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (fs.chmod && !fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (fs.chown && !fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = typeof fs.rename !== 'function' ? fs.rename\n    : (function (fs$rename) {\n      function rename (from, to, cb) {\n        var start = Date.now()\n        var backoff = 0;\n        fs$rename(from, to, function CB (er) {\n          if (er\n              && (er.code === \"EACCES\" || er.code === \"EPERM\" || er.code === \"EBUSY\")\n              && Date.now() - start < 60000) {\n            setTimeout(function() {\n              fs.stat(to, function (stater, st) {\n                if (stater && stater.code === \"ENOENT\")\n                  fs$rename(from, to, CB);\n                else\n                  cb(er)\n              })\n            }, backoff)\n            if (backoff < 100)\n              backoff += 10;\n            return;\n          }\n          if (cb) cb(er)\n        })\n      }\n      if (Object.setPrototypeOf) Object.setPrototypeOf(rename, fs$rename)\n      return rename\n    })(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = typeof fs.read !== 'function' ? fs.read\n  : (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    if (Object.setPrototypeOf) Object.setPrototypeOf(read, fs$read)\n    return read\n  })(fs.read)\n\n  fs.readSync = typeof fs.readSync !== 'function' ? fs.readSync\n  : (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\") && fs.futimes) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else if (fs.futimes) {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats) {\n        if (stats.uid < 0) stats.uid += 0x100000000\n        if (stats.gid < 0) stats.gid += 0x100000000\n      }\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n\n\n//# sourceURL=webpack://src/./node_modules/graceful-fs/polyfills.js?");

/***/ }),

/***/ "./node_modules/jsonfile/index.js":
/*!****************************************!*\
  !*** ./node_modules/jsonfile/index.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("let _fs\ntry {\n  _fs = __webpack_require__(/*! graceful-fs */ \"./node_modules/graceful-fs/graceful-fs.js\")\n} catch (_) {\n  _fs = __webpack_require__(/*! fs */ \"fs\")\n}\nconst universalify = __webpack_require__(/*! universalify */ \"./node_modules/universalify/index.js\")\nconst { stringify, stripBom } = __webpack_require__(/*! ./utils */ \"./node_modules/jsonfile/utils.js\")\n\nasync function _readFile (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  let data = await universalify.fromCallback(fs.readFile)(file, options)\n\n  data = stripBom(data)\n\n  let obj\n  try {\n    obj = JSON.parse(data, options ? options.reviver : null)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n\n  return obj\n}\n\nconst readFile = universalify.fromPromise(_readFile)\n\nfunction readFileSync (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  try {\n    let content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nasync function _writeFile (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n\n  await universalify.fromCallback(fs.writeFile)(file, str, options)\n}\n\nconst writeFile = universalify.fromPromise(_writeFile)\n\nfunction writeFileSync (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\nconst jsonfile = {\n  readFile,\n  readFileSync,\n  writeFile,\n  writeFileSync\n}\n\nmodule.exports = jsonfile\n\n\n//# sourceURL=webpack://src/./node_modules/jsonfile/index.js?");

/***/ }),

/***/ "./node_modules/jsonfile/utils.js":
/*!****************************************!*\
  !*** ./node_modules/jsonfile/utils.js ***!
  \****************************************/
/***/ ((module) => {

eval("function stringify (obj, { EOL = '\\n', finalEOL = true, replacer = null, spaces } = {}) {\n  const EOF = finalEOL ? EOL : ''\n  const str = JSON.stringify(obj, replacer, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOF\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  return content.replace(/^\\uFEFF/, '')\n}\n\nmodule.exports = { stringify, stripBom }\n\n\n//# sourceURL=webpack://src/./node_modules/jsonfile/utils.js?");

/***/ }),

/***/ "./js/Editor/style/editor.css":
/*!************************************!*\
  !*** ./js/Editor/style/editor.css ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var api = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./editor.css */ \"./node_modules/css-loader/dist/cjs.js!./js/Editor/style/editor.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack://src/./js/Editor/style/editor.css?");

/***/ }),

/***/ "./js/Editor/style/faceSelector.css":
/*!******************************************!*\
  !*** ./js/Editor/style/faceSelector.css ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var api = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./faceSelector.css */ \"./node_modules/css-loader/dist/cjs.js!./js/Editor/style/faceSelector.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack://src/./js/Editor/style/faceSelector.css?");

/***/ }),

/***/ "./js/Editor/style/menuSpriteSelector.css":
/*!************************************************!*\
  !*** ./js/Editor/style/menuSpriteSelector.css ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var api = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./menuSpriteSelector.css */ \"./node_modules/css-loader/dist/cjs.js!./js/Editor/style/menuSpriteSelector.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack://src/./js/Editor/style/menuSpriteSelector.css?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : 0;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack://src/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "./node_modules/universalify/index.js":
/*!********************************************!*\
  !*** ./node_modules/universalify/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function (...args) {\n    if (typeof args[args.length - 1] === 'function') fn.apply(this, args)\n    else {\n      return new Promise((resolve, reject) => {\n        args.push((err, res) => (err != null) ? reject(err) : resolve(res))\n        fn.apply(this, args)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function (...args) {\n    const cb = args[args.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, args)\n    else {\n      args.pop()\n      fn.apply(this, args).then(r => cb(null, r), cb)\n    }\n  }, 'name', { value: fn.name })\n}\n\n\n//# sourceURL=webpack://src/./node_modules/universalify/index.js?");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "constants":
/*!****************************!*\
  !*** external "constants" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("constants");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./js/Editor/main.js");
/******/ 	
/******/ })()
;